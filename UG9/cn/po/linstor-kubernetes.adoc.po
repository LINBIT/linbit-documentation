# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: documentation@linbit.com\n"
"POT-Creation-Date: 2023-05-19 18:19+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1989 UG9/en/linstor-kubernetes.adoc:1889
msgid ""
"This ensures that LINSTOR will not place resources from a node that you are "
"evacuating onto another node that you plan on evacuating."
msgstr ""

#. type: Title ==
#: UG9/en/linstor-kubernetes.adoc:2
#, no-wrap
msgid "LINSTOR Volumes in Kubernetes"
msgstr "Kubernetes的LINSTOR卷"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:7
#, fuzzy
#| msgid ""
#| "indexterm:[Kubernetes]This chapter describes the usage of LINSTOR in "
#| "Kubernetes as managed by the operator and with volumes provisioned using "
#| "the https://github.com/LINBIT/linstor-csi[LINSTOR CSI plugin]."
msgid ""
"indexterm:[Kubernetes]This chapter describes the usage of LINSTOR in "
"Kubernetes (K8s)  as managed by the operator and with volumes provisioned "
"using the https://github.com/LINBIT/linstor-csi[LINSTOR CSI plug-in]."
msgstr ""
"indexterm:[Kubernetes]本章描述了在Kubernetes中由操作员管理的LINSTOR的使用，以"
"及使用 https://github.com/LINBIT/linstor-csi[LINSTOR CSI plugin] 配置卷的情"
"况。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:14
msgid ""
"This Chapter goes into great detail regarding all the install time options "
"and various configurations possible with LINSTOR and Kubernetes. For those "
"more interested in a \"quick-start\" for testing, or those looking for some "
"examples for reference. We have some complete <<s-kubernetes-helm-install-"
"examples,Helm Install Examples>> of a few common uses near the end of the "
"chapter."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-kubernetes.adoc:16
#, fuzzy, no-wrap
#| msgid "Kubernetes Overview"
msgid "Kubernetes Introduction"
msgstr "Kubernetes 概述"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:22
#, fuzzy
#| msgid ""
#| "_Kubernetes_ is a container orchestrator. Kubernetes defines the behavior "
#| "of containers and related services via declarative specifications. In "
#| "this guide, we'll focus on on using `kubectl` to manipulate `.yaml` files "
#| "that define the specifications of Kubernetes objects."
msgid ""
"_Kubernetes_ is a container orchestrator. Kubernetes defines the behavior of "
"containers and related services, using declarative specifications. In this "
"guide, we will focus on using `kubectl` to manipulate YAML files that define "
"the specifications of Kubernetes objects."
msgstr ""
"_Kubernetes_ 是一个容器编排系统。Kubernetes通过声明性规范定义容器和相关服务的"
"行为。在本指南中，我们将重点介绍如何使用 `kubectl` 来操作定义Kubernetes对象规"
"范的 `.yaml` 文件。"

#. type: Title ===
#: UG9/en/linstor-kubernetes.adoc:24
#, no-wrap
msgid "Deploying LINSTOR on Kubernetes"
msgstr "在Kubernetes上部署LINSTOR"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:29
#, fuzzy
#| msgid ""
#| "LINBIT provides a LINSTOR operator to commercial support customers.  The "
#| "operator eases deployment of LINSTOR on Kubernetes by installing DRBD, "
#| "managing Satellite and Controller pods, and other related functions."
msgid ""
"LINBIT provides a LINSTOR Operator to commercial support customers.  The "
"Operator eases deployment of LINSTOR on Kubernetes by installing DRBD, "
"managing Satellite and Controller pods, and other related functions."
msgstr ""
"LINBIT为商业支持客户提供LINSTOR Operator。Operator通过安装DRBD、管理"
"Satellite/Controller Pods以及其他相关功能，简化了LINSTOR在Kubernetes上的部"
"署。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:36
msgid ""
"LINBIT's container image repository (https://drbd.io), used by LINSTOR "
"Operator, is only available to LINBIT customers or through LINBIT customer "
"trial accounts.  link:https://linbit.com/contact-us/[Contact LINBIT for "
"information on pricing or to begin a trial]. Alternatively, you may use "
"LINSTOR SDS' upstream project named link:https://github.com/piraeusdatastore/"
"piraeus-operator[Piraeus], without being a LINBIT customer."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:40
msgid ""
"LINSTOR Operator v2 is the recommended way of deploying LINBIT SDS for "
"Kubernetes on new clusters.  Users of existing Operator v1 deployments "
"should continue to use their Helm deployments, <<s-kubernetes-deploy-linstor-"
"operator-v1,skipping to the Operator v1 instructions>>."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:42
#, fuzzy, no-wrap
#| msgid "Deploying with the LINSTOR Operator"
msgid "Deploying LINSTOR Operator v2"
msgstr "使用LINSTOR Operator部署"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:47
msgid ""
"LINSTOR Operator v2 is deployed using link:https://kubernetes.io/docs/tasks/"
"manage-kubernetes-objects/kustomization[`kustomize` tool], integrated with "
"`kubectl`."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:49
#, fuzzy, no-wrap
#| msgid "Deploying with the LINSTOR Operator"
msgid "Prerequisites for LINSTOR Operator v2"
msgstr "使用LINSTOR Operator部署"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:52
msgid ""
"To deploy LINSTOR Operator v2, you need to meet the following prerequisites:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:55
msgid ""
"link:https://cert-manager.io/docs/installation/[Install `cert-manager`]. You "
"can quickly install `cert-manager` by applying its static manifests:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:58
#, no-wrap
msgid "kubectl apply -f https://github.com/cert-manager/cert-manager/releases/latest/download/cert-manager.yaml\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:60
msgid ""
"link:https://kubernetes.io/docs/tasks/tools/[Install `kubectl` version `>= "
"1.22`]."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:61
msgid "Have your link:https://my.linbit.com[my.linbit.com] credentials ready."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:62
#, fuzzy, no-wrap
#| msgid "Creating the configuration file"
msgid "Creating the Operator"
msgstr "创建配置文件"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:67
msgid ""
"To deploy the Operator, create a `kustomization.yaml` file. This will "
"declare your pull secret for `drbd.io` and allow you to pull in the Operator "
"deployment. The Operator will be deployed in a new namespace `linbit-sds`.  "
"Make sure to replace `MY_LINBIT_USER` and `MY_LINBIT_PASSWORD` with your own "
"credentials."
msgstr ""

#. type: Block title
#: UG9/en/linstor-kubernetes.adoc:68
#, no-wrap
msgid "kustomization.yaml"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:83
#, no-wrap
msgid ""
"apiVersion: kustomize.config.k8s.io/v1beta1\n"
"kind: Kustomization\n"
"namespace: linbit-sds\n"
"resources:\n"
"  - https://github.com/LINBIT/linstor-operator-builder//deploy/default?ref=v2.0.1&timeout=90s <1>\n"
"generatorOptions:\n"
"  disableNameSuffixHash: true\n"
"secretGenerator:\n"
"  - name: drbdio-pull-secret\n"
"    type: kubernetes.io/dockerconfigjson\n"
"    literals:\n"
"      - .dockerconfigjson={\"auths\":{\"drbd.io\":{\"username\":\"MY_LINBIT_USER\",\"password\":\"MY_LINBIT_PASSWORD\"}}}\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:88
msgid ""
"Depending on your internet connection, you can adjust the timeout value "
"higher if you are having issues pulling the LINSTOR Operator when you apply "
"the YAML file. For example, if you get an \"accumulation err\" error message "
"about exceeding a timeout when accumulating resources from the `linbit-"
"operator-builder` GitHub repository."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:90
msgid ""
"Then, apply the `kustomization.yaml` file, by using `kubectl` command, and "
"wait for the Operator to start:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:97
#, no-wrap
msgid ""
"$ kubectl apply -k .\n"
"namespace/linbit-sds created\n"
"...\n"
"$ kubectl -n linbit-sds  wait pod --for=condition=Ready --all\n"
"pod/linstor-operator-controller-manager-6d9847d857-zc985 condition met\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:100
msgid "The Operator is now ready to deploy LINBIT SDS for Kubernetes."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:101
#, fuzzy, no-wrap
#| msgid "Deploying LINSTOR on Kubernetes"
msgid "Deploying LINBIT SDS for Kubernetes"
msgstr "在Kubernetes上部署LINSTOR"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:105
msgid ""
"Deploying LINBIT SDS for Kubernetes with the Operator is a simple as "
"creating a new `LinstorCluster` resource and waiting for the Operator to "
"complete the setup:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:121
#, no-wrap
msgid ""
"$ kubectl create -f - <<EOF\n"
"apiVersion: piraeus.io/v1\n"
"kind: LinstorCluster\n"
"metadata:\n"
"  name: linstorcluster\n"
"spec: {}\n"
"EOF\n"
"$ kubectl wait pod --for=condition=Ready -n linbit-sds --timeout=3m --all\n"
"pod/ha-controller-4tgcg condition met\n"
"pod/k8s-1-26-10.test condition met\n"
"pod/linstor-controller-76459dc6b6-tst8p condition met\n"
"pod/linstor-csi-controller-75dfdc967d-dwdx6 condition met\n"
"pod/linstor-csi-node-9gcwj condition met\n"
"pod/linstor-operator-controller-manager-6d9847d857-zc985 condition met\n"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:123 UG9/en/linstor-kubernetes.adoc:272
#, fuzzy, no-wrap
#| msgid "Configuring quorum"
msgid "Configuring Storage"
msgstr "配置仲裁"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:127
msgid ""
"By default, LINBIT SDS for Kubernetes does not configure any storage. To add "
"storage, you can configure a `LinstorSatelliteConfiguration`, which the "
"Operator uses to configure one or more satellites."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:129
msgid ""
"The following example creates a simple `FILE_THIN` pool and it does not "
"require any additional set up on the host:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:142
#, no-wrap
msgid ""
"$ kubectl apply -f - <<EOF\n"
"apiVersion: piraeus.io/v1\n"
"kind: LinstorSatelliteConfiguration\n"
"metadata:\n"
"  name: storage-pool\n"
"spec:\n"
"  storagePools:\n"
"    - name: pool1\n"
"      fileThinPool:\n"
"        directory: /var/lib/linbit-sds/pool1\n"
"EOF\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:146
msgid ""
"Other types of storage pools can be configured as well. Please check link:"
"https://github.com/piraeusdatastore/piraeus-operator/blob/v2/docs/reference/"
"linstorsatelliteconfiguration.md#specstoragepools[the examples upstream]."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:147
#, no-wrap
msgid "Next Steps"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:153
msgid ""
"After deploying LINBIT SDS for Kubernetes, you can continue with the <<s-"
"kubernetes-basic-configuration-and-deployment,guide for creating basic "
"volumes>>, or refer to the available link:https://github.com/"
"piraeusdatastore/piraeus-operator/tree/v2/docs/tutorial[tutorials] and link:"
"https://github.com/piraeusdatastore/piraeus-operator/tree/v2/docs/how-to[how-"
"to guides] upstream."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:155
#, fuzzy, no-wrap
#| msgid "Deploying with the LINSTOR Operator"
msgid "Deploying LINSTOR Operator v1"
msgstr "使用LINSTOR Operator部署"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:159
msgid ""
"If you plan to deploy LINSTOR Operator on a new cluster, you should use <<s-"
"kubernetes-deploy-linstor-operator-v2, Operator v2>>."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:161
#, fuzzy
#| msgid "The operator itself is installed using a Helm v3 chart as follows:"
msgid "The Operator v1 is installed using a Helm v3 chart as follows:"
msgstr "Operator用Helm v3安装，如下所示："

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:163
#, fuzzy
#| msgid ""
#| "Create a kubernetes secret containing your my.linbit.com credentials:"
msgid "Create a Kubernetes secret containing your my.linbit.com credentials:"
msgstr "创建包含my.linbit.com凭据的kubernetes 密码："

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:167
#, fuzzy, no-wrap
#| msgid "kubectl create secret docker-registry drbdiocred --docker-server=drbd.io --docker-username=<YOUR_LOGIN> --docker-email=<YOUR_EMAIL> --docker-password=<YOUR_PASSWORD>\n"
msgid ""
"kubectl create secret docker-registry drbdiocred --docker-server=drbd.io \\\n"
"  --docker-username=<YOUR_LOGIN> --docker-email=<YOUR_EMAIL> --docker-password=<YOUR_PASSWORD>\n"
msgstr "kubectl create secret docker-registry drbdiocred --docker-server=drbd.io --docker-username=<YOUR_LOGIN> --docker-email=<YOUR_EMAIL> --docker-password=<YOUR_PASSWORD>\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:171
msgid ""
"The name of this secret must match the one specified in the Helm values, by "
"default `drbdiocred`."
msgstr "默认情况下，此密码的名称必须与Helm值中指定的名称 `drbdiocred` 匹配。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:176
msgid ""
"Configure the LINSTOR database back end. By default, the chart configures "
"etcd as database back end. The Operator can also configure LINSTOR to use "
"<<s-kubernetes-linstor-k8s-backend,Kubernetes as datastore>> directly. If "
"you go the etcd route, you should configure persistent storage for it:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:177
msgid "Use an existing storage provisioner with a default `StorageClass`."
msgstr "使用具有默认 `StorageClass` 的现有存储资源调配器。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:178
msgid "<<s-kubernetes-etcd-hostpath-persistence,Use `hostPath` volumes>>."
msgstr "<<s-kubernetes-etcd-hostpath-persistence,Use `hostPath` volumes>>。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:180
#, fuzzy
#| msgid ""
#| "Disable persistence for basic testing. This can be done by adding `--set "
#| "etcd.persistence.enabled=false` to the `helm install` command below."
msgid ""
"Disable persistence, **for basic testing only**. This can be done by adding "
"`--set etcd.persistentVolume.enabled=false` to the `helm install` command "
"below."
msgstr ""
"因为只进行基础测试，我们禁用持久存储。通过在 `helm install` 命令中添加 `--"
"set etcd.persistence.enabled=false` 来完成。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:182
msgid ""
"Read <<s-kubernetes-storage, the storage guide>> and configure a basic "
"storage setup for LINSTOR"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:184
msgid ""
"Read the <<s-kubernetes-securing-deployment,section on securing the "
"deployment>> and configure as needed."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:186
msgid ""
"Select the appropriate kernel module injector using `--set` with the `helm "
"install` command in the final step."
msgstr ""
"在最后一步中，使用带有 `helm install` 命令的 `--set` 选择适当的内核模块注入。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:188
msgid ""
"Choose the injector according to the distribution you are using. Select the "
"latest version from one of `drbd9-rhel7`, `drbd9-rhel8`,...  from http://"
"drbd.io/ as appropriate. The drbd9-rhel8 image should also be used for RHCOS "
"(OpenShift). For the SUSE CaaS Platform use the SLES injector that matches "
"the base system of the CaaS Platform you are using (e.g., `drbd9-"
"sles15sp1`). For example:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:191
#, fuzzy, no-wrap
#| msgid "operator.nodeSet.spec.kernelModImage=drbd.io/drbd9-rhel7\n"
msgid "operator.satelliteSet.kernelModuleInjectionImage=drbd.io/drbd9-rhel8:v9.1.8\n"
msgstr "operator.nodeSet.spec.kernelModImage=drbd.io/drbd9-rhel7\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:194
msgid ""
"Only inject modules that are already present on the host machine. If a "
"module is not found, it will be skipped."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:197
#, fuzzy, no-wrap
#| msgid "operator.nodeSet.spec.drbdKernelModuleInjectionMode=None\n"
msgid "operator.satelliteSet.kernelModuleInjectionMode=DepsOnly\n"
msgstr "operator.nodeSet.spec.drbdKernelModuleInjectionMode=None\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:200
#, fuzzy
#| msgid ""
#| "Disable kernel module injection if you are installing DRBD by other means."
msgid ""
"Disable kernel module injection if you are installing DRBD by other means. "
"Deprecated by `DepsOnly`"
msgstr "如果通过其他方式安装DRBD，请禁用内核模块注入。"

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:203
#, fuzzy, no-wrap
#| msgid "operator.nodeSet.spec.drbdKernelModuleInjectionMode=None\n"
msgid "operator.satelliteSet.kernelModuleInjectionMode=None\n"
msgstr "operator.nodeSet.spec.drbdKernelModuleInjectionMode=None\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:206
msgid ""
"Finally create a Helm deployment named `linstor-op` that will set up "
"everything."
msgstr "最后创建一个名为 `linstor-op` 的Helm部署，它将设置所有内容。"

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:210
#, no-wrap
msgid ""
"helm repo add linstor https://charts.linstor.io\n"
"helm install linstor-op linstor/linstor\n"
msgstr ""
"helm repo add linstor https://charts.linstor.io\n"
"helm install linstor-op linstor/linstor\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:212
msgid ""
"Further deployment customization is discussed in the <<s-kubernetes-advanced-"
"deployments,advanced deployment section>>"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:214
#, fuzzy, no-wrap
#| msgid "Create a new backend type for LINSTOR"
msgid "Kubernetes Back End for LINSTOR"
msgstr "为LINSTOR创建新的后端类型"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:218
msgid ""
"The Controller can use the Kubernetes API directly to persist its cluster "
"state. To enable this back end, use the following override file during the "
"chart installation:"
msgstr ""

#. type: Block title
#: UG9/en/linstor-kubernetes.adoc:219
#, no-wrap
msgid "k8s-backend.yaml"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:227
#, no-wrap
msgid ""
"etcd:\n"
"  enabled: false\n"
"operator:\n"
"  controller:\n"
"    dbConnectionURL: k8s\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:230
msgid ""
"It is **NOT** possible to migrate from an existing cluster with etcd back "
"end to the Kubernetes back end."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:232
#, no-wrap
msgid "Creating Persistent Storage Volumes"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:237
#, fuzzy
#| msgid ""
#| "You can use the `pv-hostpath` Helm templates to create `hostPath` "
#| "persistent volumes. Create as many PVs as needed to satisfy your "
#| "configured etcd `replicaCount` (default 3)."
msgid ""
"You can use the `pv-hostpath` Helm templates to create `hostPath` persistent "
"volumes. Create as many PVs as needed to satisfy your configured etcd "
"`replicas` (default 1)."
msgstr ""
"可以使用 `pv-hostpath` Helm模板创建 `hostpath` 持久卷。根据需要创建尽可能多的"
"pv以满足配置的etcd的 `replicaccount`（默认值为3）。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:240
msgid ""
"Create the `hostPath` persistent volumes, substituting cluster node names "
"accordingly in the `nodes=` option:"
msgstr "创建 `hostPath` 持久卷，在 `nodes=` 选项中相应地替换为集群节点名称："

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:244
#, fuzzy, no-wrap
#| msgid ""
#| "helm repo add linstor https://charts.linstor.io\n"
#| "helm install linstor-op linstor/linstor\n"
msgid ""
"helm repo add linstor https://charts.linstor.io\n"
"helm install linstor-etcd linstor/pv-hostpath\n"
msgstr ""
"helm repo add linstor https://charts.linstor.io\n"
"helm install linstor-op linstor/linstor\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:248
msgid ""
"By default, a PV is created on every `control-plane` node. You can manually "
"select the storage nodes by passing `--set \"nodes={<NODE0>,<NODE1>,"
"<NODE2>}\"` to the install command."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:251
msgid ""
"The correct value to reference the node is the value of the `kubernetes.io/"
"hostname` label. You can list the value for all nodes by running `kubectl "
"get nodes -o custom-columns=\"Name:{.metadata.name},NodeName:{.metadata."
"labels['kubernetes\\.io/hostname']}\"`"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:253
#, no-wrap
msgid "Using an Existing Database"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:257
msgid ""
"LINSTOR can connect to an existing PostgreSQL, MariaDB or etcd database. For "
"instance, for a PostgreSQL instance with the following configuration:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:262
#, no-wrap
msgid ""
"POSTGRES_DB: postgresdb\n"
"POSTGRES_USER: postgresadmin\n"
"POSTGRES_PASSWORD: admin123\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:266
msgid ""
"The Helm chart can be configured to use this database rather than deploying "
"an etcd cluster, by adding the following to the Helm install command:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:269
#, no-wrap
msgid "--set etcd.enabled=false --set \"operator.controller.dbConnectionURL=jdbc:postgresql://postgres/postgresdb?user=postgresadmin&password=admin123\"\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:275
msgid ""
"The LINSTOR Operator can automate some basic storage set up for LINSTOR."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:276
#, fuzzy, no-wrap
#| msgid "Configuring the rate of synchronization"
msgid "Configuring Storage Pool Creation"
msgstr "配置同步速率"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:280
msgid ""
"The LINSTOR Operator can be used to create LINSTOR storage pools. Creation "
"is under control of the LinstorSatelliteSet resource:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:301
#, no-wrap
msgid ""
"$ kubectl get LinstorSatelliteSet.linstor.linbit.com linstor-op-ns -o yaml\n"
"kind: LinstorSatelliteSet\n"
"metadata:\n"
"..\n"
"spec:\n"
"  ..\n"
"  storagePools:\n"
"    lvmPools:\n"
"    - name: lvm-thick\n"
"      volumeGroup: drbdpool\n"
"    lvmThinPools:\n"
"    - name: lvm-thin\n"
"      thinVolume: thinpool\n"
"      volumeGroup: \"\"\n"
"    zfsPools:\n"
"    - name: my-linstor-zpool\n"
"      zPool: for-linstor\n"
"      thin: true\n"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:303
#, no-wrap
msgid "Creating Storage Pools at Installation Time"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:306
msgid ""
"At installation time, by setting the value of `operator.satelliteSet."
"storagePools` when running the `helm install` command."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:308
#, fuzzy
#| msgid "First, we create a new resource definition:"
msgid "First create a file with the storage configuration like:"
msgstr "首先，我们创建一个新的资源定义："

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:317
#, no-wrap
msgid ""
"operator:\n"
"  satelliteSet:\n"
"    storagePools:\n"
"      lvmPools:\n"
"      - name: lvm-thick\n"
"        volumeGroup: drbdpool\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:320
msgid "This file can be passed to the Helm installation like this:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:324
#, fuzzy, no-wrap
#| msgid "# yum install linstor-satellite  linstor-client\n"
msgid "helm install -f <file> linstor-op linstor/linstor\n"
msgstr "# yum install linstor-satellite  linstor-client\n"

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:326
#, no-wrap
msgid "Creating Storage Pools After Installation"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:330
msgid ""
"On a cluster with the operator already configured (that is, after `helm "
"install`), you can edit the LinstorSatelliteSet configuration like this:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:334
#, no-wrap
msgid "$ kubectl edit LinstorSatelliteSet.linstor.linbit.com <satellitesetname>\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:337
msgid ""
"The storage pool configuration can be updated like in the example above."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:338
#, no-wrap
msgid "Preparing Physical Devices"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:343
msgid ""
"By default, LINSTOR expects the referenced VolumeGroups, ThinPools and so on "
"to be present. You can use the `devicePaths: []` option to let LINSTOR "
"automatically prepare devices for the pool. Eligible for automatic "
"configuration are block devices that:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:345
msgid "Are a root device (no partition)"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:346
#, fuzzy
#| msgid "Connection information data"
msgid "do not contain partition information"
msgstr "连接信息数据"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:347
msgid "have more than 1 GiB"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:349
msgid ""
"To enable automatic configuration of devices, set the `devicePaths` key on "
"`storagePools` entries:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:365
#, no-wrap
msgid ""
"  storagePools:\n"
"    lvmPools:\n"
"    - name: lvm-thick\n"
"      volumeGroup: drbdpool\n"
"      devicePaths:\n"
"      - /dev/vdb\n"
"    lvmThinPools:\n"
"    - name: lvm-thin\n"
"      thinVolume: thinpool\n"
"      volumeGroup: linstor_thinpool\n"
"      devicePaths:\n"
"      - /dev/vdc\n"
"      - /dev/vdd\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:368
#, fuzzy
#| msgid "Snapshots are supported with thin LVM and ZFS storage pools."
msgid ""
"Currently, this method supports creation of LVM and LVMTHIN storage pools."
msgstr "精简LVM和ZFS存储池支持快照。"

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:369
#, fuzzy, no-wrap
#| msgid "Configuring the Nodes"
msgid "Configuring LVM Storage Pools"
msgstr "配置节点"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:372
msgid "The available keys for `lvmPools` entries are:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:374 UG9/en/linstor-kubernetes.adoc:392
#: UG9/en/linstor-kubernetes.adoc:404
msgid "`name` name of the LINSTOR storage pool. [Required]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:376
msgid "`volumeGroup` name of the VG to create. [Required]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:378 UG9/en/linstor-kubernetes.adoc:396
msgid ""
"`devicePaths` devices to configure for this pool. Must be empty and >= 1GiB "
"to be recognized. [Optional]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:380 UG9/en/linstor-kubernetes.adoc:398
msgid "`raidLevel` LVM raid level. [Optional]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:382
msgid "`vdo` Enable [VDO] (requires VDO tools in the satellite). [Optional]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:384
msgid ""
"`vdoLogicalSizeKib` Size of the created VG (expected to be bigger than the "
"backing devices by using VDO). [Optional]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:386
msgid "`vdoSlabSizeKib` Slab size for VDO. [Optional]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:388
msgid ""
"[VDO]: https://www.redhat.com/en/blog/look-vdo-new-linux-compression-layer"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:389
#, fuzzy, no-wrap
#| msgid "Configuring the Nodes"
msgid "Configuring LVM Thin Pools"
msgstr "配置节点"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:394
msgid ""
"`volumeGroup` VG to use for the thin pool. If you want to use `devicePaths`, "
"you must set this to `\"\"`.  This is required because LINSTOR does not "
"allow configuration of the VG name when preparing devices.  `thinVolume` "
"name of the thin pool. [Required]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:400
msgid ""
"The volume group created by LINSTOR for LVM thin pools will always follow "
"the scheme \"linstor_$THINPOOL\"."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:401
#, fuzzy, no-wrap
#| msgid "Configuring the Nodes"
msgid "Configuring ZFS Storage Pools"
msgstr "配置节点"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:405
msgid ""
"`zPool` name of the zpool to use. Must already be present on all machines. "
"[Required]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:406
msgid "`thin` `true` to use thin provisioning, `false` otherwise. [Required]"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:407
#, no-wrap
msgid "Automatic Storage Type Provisioning (DEPRECATED)"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:412
msgid ""
"_ALL_ eligible devices will be prepared according to the value of `operator."
"satelliteSet.automaticStorageType`, unless they are already prepared using "
"the `storagePools` section. Devices are added to a storage pool based on the "
"device name (that is, all `/dev/nvme1` devices will be part of the pool "
"`autopool-nvme1`)"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:414
msgid "The possible values for `operator.satelliteSet.automaticStorageType`:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:416
msgid "`None` no automatic set up (default)"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:417
msgid "`LVM` create a LVM (thick) storage pool"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:418
msgid "`LVMTHIN` create a LVM thin storage pool"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:419
msgid "`ZFS` create a ZFS based storage pool (**UNTESTED**)"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:421
#, fuzzy, no-wrap
#| msgid "Terminating Helm deployment"
msgid "Securing Deployment"
msgstr "终止Helm部署"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:425
msgid ""
"This section describes the different options for enabling security features "
"available when using this operator. The following guides assume the operator "
"is installed <<s-kubernetes-deploy-linstor-operator-v1,using Helm>>"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:426
#, no-wrap
msgid "Secure Communication with an Existing etcd Instance"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:430
msgid ""
"Secure communication to an `etcd` instance can be enabled by providing a CA "
"certificate to the operator in form of a kubernetes secret. The secret has "
"to contain the key `ca.pem` with the PEM encoded CA certificate as value."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:432
msgid ""
"The secret can then be passed to the controller by passing the following "
"argument to `helm install`"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:435
#, no-wrap
msgid "--set operator.controller.dbCertSecret=<secret name>\n"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:437
#, no-wrap
msgid "Authentication with `etcd` Using Certificates"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:441
msgid ""
"If you want to use TLS certificates to authenticate with an `etcd` database, "
"you need to set the following option on Helm install:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:444
#, no-wrap
msgid "--set operator.controller.dbUseClientCert=true\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:447
msgid ""
"If this option is active, the secret specified in the above section must "
"contain two additional keys:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:449
msgid ""
"`client.cert` PEM formatted certificate presented to `etcd` for "
"authentication"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:450
msgid ""
"`client.key` private key **in PKCS8 format**, matching the above client "
"certificate."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:452
msgid "Keys can be converted into PKCS8 format using `openssl`:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:455
#, no-wrap
msgid "openssl pkcs8 -topk8 -nocrypt -in client-key.pem -out client-key.pkcs8\n"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:457
#, no-wrap
msgid "Configuring Secure Communication Between LINSTOR Components"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:461
msgid ""
"The default communication between LINSTOR components is not secured by TLS. "
"If this is needed for your setup, choose one of three methods:"
msgstr ""

#.  "cert-manager" is a product name so keep the original case
#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:463
#, no-wrap
msgid "Generating Keys and Certificates Using cert-manager"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:466
msgid ""
"Requires https://cert-manager.io/docs/[cert-manager] to be installed in your "
"cluster."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:468 UG9/en/linstor-kubernetes.adoc:478
msgid "Set the following options in your Helm override file:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:473
#, no-wrap
msgid ""
"linstorSslMethod: cert-manager\n"
"linstorHttpsMethod: cert-manager\n"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:475
#, no-wrap
msgid "Generate Keys and Certificates Using Helm"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:483
#, no-wrap
msgid ""
"linstorSslMethod: helm\n"
"linstorHttpsMethod: helm\n"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:485
#, no-wrap
msgid "Generating Keys and Certificates Manually"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:488
msgid ""
"Create a private key and self-signed certificate for your certificate "
"authorities:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:494
#, no-wrap
msgid ""
"openssl req -new -newkey rsa:2048 -days 5000 -nodes -x509 -keyout ca.key \\\n"
"  -out ca.crt -subj \"/CN=linstor-system\"\n"
"openssl req -new -newkey rsa:2048 -days 5000 -nodes -x509 -keyout client-ca.key \\\n"
"  -out client-ca.crt -subj \"/CN=linstor-client-ca\"\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:497
msgid ""
"Create private keys, two for the controller, one for all nodes and one for "
"all clients:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:503
#, no-wrap
msgid ""
"openssl genrsa -out linstor-control.key 2048\n"
"openssl genrsa -out linstor-satellite.key 2048\n"
"openssl genrsa -out linstor-client.key 2048\n"
"openssl genrsa -out linstor-api.key 2048\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:506
#, fuzzy
#| msgid "Then we import this certificate to our controller truststore:"
msgid "Create trusted certificates for controller and nodes:"
msgstr "然后我们将此证书导入controller信任库："

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:526
#, no-wrap
msgid ""
"openssl req -new -sha256 -key linstor-control.key -subj \"/CN=system:control\" \\\n"
"  -out linstor-control.csr\n"
"openssl req -new -sha256 -key linstor-satellite.key -subj \"/CN=system:node\" \\\n"
"  -out linstor-satellite.csr\n"
"openssl req -new -sha256 -key linstor-client.key -subj \"/CN=linstor-client\" \\\n"
"  -out linstor-client.csr\n"
"openssl req -new -sha256 -key linstor-api.key -subj \"/CN=linstor-controller\" \\\n"
"  -out  linstor-api.csr\n"
"openssl x509 -req -in linstor-control.csr -CA ca.crt -CAkey ca.key -CAcreateserial \\\n"
"  -out linstor-control.crt -days 5000 -sha256\n"
"openssl x509 -req -in linstor-satellite.csr -CA ca.crt -CAkey ca.key -CAcreateserial \\\n"
"  -out linstor-satellite.crt -days 5000 -sha256\n"
"openssl x509 -req -in linstor-client.csr -CA client-ca.crt -CAkey client-ca.key \\\n"
"  -CAcreateserial -out linstor-client.crt -days 5000 -sha256\n"
"openssl x509 -req -in linstor-api.csr -CA client-ca.crt -CAkey client-ca.key \\\n"
"  -CAcreateserial -out linstor-api.crt -days 5000 -sha256 -extensions 'v3_req' \\\n"
"  -extfile <(printf '%s\\n' '[v3_req]' extendedKeyUsage=serverAuth \\\n"
"  subjectAltName=DNS:linstor-op-cs.default.svc)\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:530
msgid ""
"`linstor-op-cs.default.svc` in the last command needs to match create "
"service name. With Helm, this is always `<release-name>-cs.<namespace>.svc`."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:532
msgid ""
"Create kubernetes secrets that can be passed to the controller and node pods:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:546
#, no-wrap
msgid ""
"kubectl create secret generic linstor-control --type=kubernetes.io/tls \\\n"
"  --from-file=ca.crt=ca.crt --from-file=tls.crt=linstor-control.crt \\\n"
"  --from-file=tls.key=linstor-control.key\n"
"kubectl create secret generic linstor-satellite --type=kubernetes.io/tls \\\n"
"  --from-file=ca.crt=ca.crt --from-file=tls.crt=linstor-satellite.crt \\\n"
"  --from-file=tls.key=linstor-satellite.key\n"
"kubectl create secret generic linstor-api --type=kubernetes.io/tls \\\n"
"  --from-file=ca.crt=client-ca.crt --from-file=tls.crt=linstor-api.crt \\\n"
"  --from-file=tls.key=linstor-api.key\n"
"kubectl create secret generic linstor-client --type=kubernetes.io/tls \\\n"
"  --from-file=ca.crt=client-ca.crt --from-file=tls.crt=linstor-client.crt \\\n"
"  --from-file=tls.key=linstor-client.key\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:549
msgid "Pass the names of the created secrets to `helm install`:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:559
#, no-wrap
msgid ""
"linstorHttpsControllerSecret: linstor-api\n"
"linstorHttpsClientSecret: linstor-client\n"
"operator:\n"
"  controller:\n"
"    sslSecret: linstor-control\n"
"  satelliteSet:\n"
"    sslSecret: linstor-satellite\n"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:561
#, no-wrap
msgid "Automatically Set the Passphrase for LINSTOR"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:565
msgid ""
"LINSTOR needs to store confidential data to support encrypted information. "
"This data is protected by a master passphrase. A passphrase is automatically "
"generated on the first chart install."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:567
#, fuzzy
#| msgid ""
#| "If you ever want to change the master passphrase this can be done with:"
msgid "If you want to use a custom passphrase, store it in a secret:"
msgstr "如果您想更改主密码，可以使用以下方法："

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:570
#, no-wrap
msgid "kubectl create secret generic linstor-pass --from-literal=MASTER_PASSPHRASE=<password>\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:573
msgid "On install, add the following arguments to the Helm command:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:576
#, no-wrap
msgid "--set operator.controller.luksSecret=linstor-pass\n"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:579
#, no-wrap
msgid "Helm Install Examples"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:584
msgid ""
"All the below examples use the following `sp-values.yaml` file. Feel free to "
"adjust this for your uses and environment. See <<Configuring storage pool "
"creation>> for further details."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:595
#, no-wrap
msgid ""
"operator:\n"
"  satelliteSet:\n"
"    storagePools:\n"
"      lvmThinPools:\n"
"      - name: lvm-thin\n"
"        thinVolume: thinpool\n"
"        volumeGroup: \"\"\n"
"        devicePaths:\n"
"        - /dev/sdb\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:599
msgid ""
"Default install. Please note this does not setup any persistence for the "
"backing etcd key-value store."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:602
msgid "This is not suggested for any use outside of testing."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:608
#, fuzzy, no-wrap
#| msgid "kubectl create secret docker-registry drbdiocred --docker-server=drbd.io --docker-username=<YOUR_LOGIN> --docker-email=<YOUR_EMAIL> --docker-password=<YOUR_PASSWORD>\n"
msgid ""
"kubectl create secret docker-registry drbdiocred --docker-server=drbd.io \\\n"
"  --docker-username=<YOUR_LOGIN> --docker-password=<YOUR_PASSWORD>\n"
"helm repo add linstor https://charts.linstor.io\n"
"helm install linstor-op linstor/linstor\n"
msgstr "kubectl create secret docker-registry drbdiocred --docker-server=drbd.io --docker-username=<YOUR_LOGIN> --docker-email=<YOUR_EMAIL> --docker-password=<YOUR_PASSWORD>\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:616
msgid ""
"LINBIT's container image repository (http://drbd.io), used in the previous "
"and upcoming `kubectl create` commands, is only available to LINBIT "
"customers or through LINBIT customer trial accounts.  link:https://linbit."
"com/contact-us/[Contact LINBIT for information on pricing or to begin a "
"trial]. Alternatively, you may use LINSTOR SDS' upstream project named link:"
"https://github.com/piraeusdatastore/piraeus-operator[Piraeus], without being "
"a LINBIT customer."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:620
msgid ""
"Install with LINSTOR storage-pools defined at install through `sp-values."
"yaml`, persistent hostPath volumes, 3 etcd replicas, and by compiling the "
"DRBD kernel modules for the host kernels."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:626
msgid ""
"This should be adequate for most basic deployments. Please note that this "
"deployment is not using the pre-compiled DRBD kernel modules just to make "
"this command more portable. Using the pre-compiled binaries will make for a "
"much faster install and deployment. Using the `Compile` option would not be "
"suggested for use in a large Kubernetes clusters."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:634
#, no-wrap
msgid ""
"kubectl create secret docker-registry drbdiocred --docker-server=drbd.io \\\n"
"  --docker-username=<YOUR_LOGIN> --docker-password=<YOUR_PASSWORD>\n"
"helm repo add linstor https://charts.linstor.io\n"
"helm install linstor-etcd linstor/pv-hostpath --set \"nodes={<NODE0>,<NODE1>,<NODE2>}\"\n"
"helm install -f sp-values.yaml linstor-op linstor/linstor --set etcd.replicas=3 \\\n"
"  --set operator.satelliteSet.kernelModuleInjectionMode=Compile\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:640
msgid ""
"Install with LINSTOR storage-pools defined at install through `sp-values."
"yaml`, use an already created PostgreSQL DB (preferably clustered), rather "
"than etcd, and use already compiled kernel modules for DRBD."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:645
msgid ""
"The PostgreSQL database in this particular example is reachable through a "
"service endpoint named `postgres`. PostgreSQL itself is configured with "
"`POSTGRES_DB=postgresdb`, `POSTGRES_USER=postgresadmin`, and "
"`POSTGRES_PASSWORD=admin123`"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:652
#, no-wrap
msgid ""
"kubectl create secret docker-registry drbdiocred --docker-server=drbd.io \\\n"
"  --docker-username=<YOUR_LOGIN> --docker-email=<YOUR_EMAIL> --docker-password=<YOUR_PASSWORD>\n"
"helm repo add linstor https://charts.linstor.io\n"
"helm install -f sp-values.yaml linstor-op linstor/linstor --set etcd.enabled=false \\\n"
"  --set \"operator.controller.dbConnectionURL=jdbc:postgresql://postgres/postgresdb?user=postgresadmin&password=admin123\"\n"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:655
#, fuzzy, no-wrap
#| msgid "Terminating Helm deployment"
msgid "Terminating Helm Deployment"
msgstr "终止Helm部署"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:658
msgid ""
"To protect the storage infrastructure of the cluster from accidentally "
"deleting vital components, it is necessary to perform some manual steps "
"before deleting a Helm deployment."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:660
msgid ""
"Delete all volume claims managed by LINSTOR components. You can use the "
"following command to get a list of volume claims managed by LINSTOR. After "
"checking that none of the listed volumes still hold needed data, you can "
"delete them using the generated kubectl delete command."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:666
#, no-wrap
msgid ""
"$ kubectl get pvc --all-namespaces -o=jsonpath='{range .items[?(@.metadata.annotations.volume\\.beta\\.kubernetes\\.io/storage-provisioner==\"linstor.csi.linbit.com\")]}kubectl delete pvc --namespace {.metadata.namespace} {.metadata.name}{\"\\n\"}{end}'\n"
"kubectl delete pvc --namespace default data-mysql-0\n"
"kubectl delete pvc --namespace default data-mysql-1\n"
"kubectl delete pvc --namespace default data-mysql-2\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:669
msgid "These volumes, once deleted, cannot be recovered."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:671
msgid "Delete the LINSTOR controller and satellite resources."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:673
msgid ""
"Deployment of LINSTOR satellite and controller is controlled by the "
"LinstorSatelliteSet and LinstorController resources. You can delete the "
"resources associated with your deployment using kubectl"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:677
#, no-wrap
msgid ""
"kubectl delete linstorcontroller <helm-deploy-name>-cs\n"
"kubectl delete linstorsatelliteset <helm-deploy-name>-ns\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:680
msgid ""
"After a short wait, the controller and satellite pods should terminate. If "
"they continue to run, you can check the above resources for errors (they are "
"only removed after all associated pods have terminated)."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:682
#, fuzzy
#| msgid "Terminating Helm deployment"
msgid "Delete the Helm deployment."
msgstr "终止Helm部署"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:684
msgid ""
"If you removed all PVCs and all LINSTOR pods have terminated, you can "
"uninstall the Helm deployment"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:687
#, fuzzy, no-wrap
#| msgid "helm delete linstor-op\n"
msgid "helm uninstall linstor-op\n"
msgstr "helm delete linstor-op\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:691
#, fuzzy, no-wrap
#| msgid "More information regarding Helm’s current position on CRD’s can be found https://helm.sh/docs/topics/chart_best_practices/custom_resource_definitions/#method-1-let-helm-do-it-for-you[here]."
msgid ""
"Due to the Helm's current policy, the Custom Resource Definitions named LinstorController and LinstorSatelliteSet will not be deleted by the command.\n"
" More information regarding Helm's current position on CRDs can be found https://helm.sh/docs/chart_best_practices/custom_resource_definitions/#method-1-let-helm-do-it-for-you[here].\n"
msgstr "有关Helm目前在CRD上的位置的更多信息，请访问 https://Helm.sh/docs/topics/chart_best_practices/custom_resource_definitions/#method-1-let-Helm-do-it-for-you[这里]。"

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:693
#, fuzzy, no-wrap
#| msgid "Deployment Options"
msgid "Advanced Deployment Options"
msgstr "部署选项"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:696
msgid ""
"The Helm charts provide a set of further customization options for advanced "
"use cases."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:698
msgid ""
"LINBIT's container image repository (http://drbd.io), used in the Helm chart "
"below, is only available to LINBIT customers or through LINBIT customer "
"trial accounts.  link:https://linbit.com/contact-us/[Contact LINBIT for "
"information on pricing or to begin a trial]. Alternatively, you may use "
"LINSTOR SDS' upstream project named link:https://github.com/piraeusdatastore/"
"piraeus-operator[Piraeus], without being a LINBIT customer."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:832
#, no-wrap
msgid ""
"global:\n"
"  imagePullPolicy: IfNotPresent # empty pull policy means k8s default is used (\"always\" if tag == \":latest\", \"ifnotpresent\" else) <1>\n"
"  setSecurityContext: true # Force non-privileged containers to run as non-root users\n"
"# Dependency charts\n"
"etcd:\n"
"  enabled: true\n"
"  persistentVolume:\n"
"    enabled: true\n"
"    storage: 1Gi\n"
"  replicas: 1 # How many instances of etcd will be added to the initial cluster. <2>\n"
"  resources: {} # resource requirements for etcd containers <3>\n"
"  image:\n"
"    repository: gcr.io/etcd-development/etcd\n"
"    tag: v3.4.15\n"
"stork:\n"
"  enabled: false\n"
"  storkImage: docker.io/openstorage/stork:2.8.2\n"
"  schedulerImage: k8s.gcr.io/kube-scheduler-amd64\n"
"  schedulerTag: \"\"\n"
"  replicas: 1 <2>\n"
"  storkResources: {} # resources requirements for the stork plug-in containers <3>\n"
"  schedulerResources: {} # resource requirements for the kube-scheduler containers <3>\n"
"  podsecuritycontext: {}\n"
"csi:\n"
"  enabled: true\n"
"  pluginImage: \"drbd.io/linstor-csi:v0.20.0\"\n"
"  csiAttacherImage: k8s.gcr.io/sig-storage/csi-attacher:v4.0.0\n"
"  csiLivenessProbeImage: k8s.gcr.io/sig-storage/livenessprobe:v2.7.0\n"
"  csiNodeDriverRegistrarImage: k8s.gcr.io/sig-storage/csi-node-driver-registrar:v2.5.1\n"
"  csiProvisionerImage: k8s.gcr.io/sig-storage/csi-provisioner:v3.2.1\n"
"  csiSnapshotterImage: k8s.gcr.io/sig-storage/csi-snapshotter:v6.0.1\n"
"  csiResizerImage: k8s.gcr.io/sig-storage/csi-resizer:v1.6.0\n"
"  csiAttacherWorkerThreads: 10 <9>\n"
"  csiProvisionerWorkerThreads: 10 <9>\n"
"  csiSnapshotterWorkerThreads: 10 <9>\n"
"  csiResizerWorkerThreads: 10 <9>\n"
"  controllerReplicas: 1 <2>\n"
"  nodeAffinity: {} <4>\n"
"  nodeTolerations: [] <4>\n"
"  controllerAffinity: {} <4>\n"
"  controllerTolerations: [] <4>\n"
"  enableTopology: true\n"
"  resources: {} <3>\n"
"  customLabels: {}\n"
"  customAnnotations: {}\n"
"  kubeletPath: /var/lib/kubelet <7>\n"
"  controllerSidecars: []\n"
"  controllerExtraVolumes: []\n"
"  nodeSidecars: []\n"
"  nodeExtraVolumes: []\n"
"priorityClassName: \"\"\n"
"drbdRepoCred: drbdiocred\n"
"linstorSslMethod: \"manual\" # <- If set to 'helm' or 'cert-manager' the certificates will be generated automatically\n"
"linstorHttpsMethod: \"manual\" # <- If set to 'helm' or 'cert-manager' the certificates will be generated automatically\n"
"linstorHttpsControllerSecret: \"\" # <- name of secret containing linstor server certificates+key. See docs/security.md\n"
"linstorHttpsClientSecret: \"\" # <- name of secret containing linstor client certificates+key. See docs/security.md\n"
"controllerEndpoint: \"\" # <- override to the generated controller endpoint. use if controller is not deployed via operator\n"
"psp:\n"
"  privilegedRole: \"\"\n"
"  unprivilegedRole: \"\"\n"
"operator:\n"
"  replicas: 1 # <- number of replicas for the operator deployment <2>\n"
"  image: \"drbd.io/linstor-operator:v1.10.0\"\n"
"  affinity: {} <4>\n"
"  tolerations: [] <4>\n"
"  resources: {} <3>\n"
"  customLabels: {}\n"
"  customAnnotations: {}\n"
"  podsecuritycontext: {}\n"
"  args:\n"
"    createBackups: true\n"
"    createMonitoring: true\n"
"  sidecars: []\n"
"  extraVolumes: []\n"
"  controller:\n"
"    enabled: true\n"
"    controllerImage: \"drbd.io/linstor-controller:v1.20.0\"\n"
"    dbConnectionURL: \"\"\n"
"    luksSecret: \"\"\n"
"    dbCertSecret: \"\"\n"
"    dbUseClientCert: false\n"
"    sslSecret: \"\"\n"
"    affinity: {} <4>\n"
"    httpBindAddress: \"\"\n"
"    httpsBindAddress: \"\"\n"
"    tolerations: <4>\n"
"      - key: node-role.kubernetes.io/master\n"
"        operator: Exists\n"
"        effect: NoSchedule\n"
"      - key: node-role.kubernetes.io/control-plane\n"
"        operator: Exists\n"
"        effect: NoSchedule\n"
"    resources: {} <3>\n"
"    replicas: 1 <2>\n"
"    additionalEnv: [] <5>\n"
"    additionalProperties: {} <6>\n"
"    sidecars: []\n"
"    extraVolumes: []\n"
"    customLabels: {}\n"
"    customAnnotations: {}\n"
"  satelliteSet:\n"
"    enabled: true\n"
"    satelliteImage: \"drbd.io/linstor-satellite:v1.20.0\"\n"
"    storagePools: {}\n"
"    sslSecret: \"\"\n"
"    automaticStorageType: None\n"
"    affinity: {} <4>\n"
"    tolerations: [] <4>\n"
"    resources: {} <3>\n"
"    monitoringImage: \"drbd.io/drbd-reactor:v0.9.0\"\n"
"    monitoringBindAddress: \"\"\n"
"    mountDrbdResourceDirectoriesFromHost: false <10>\n"
"    kernelModuleInjectionImage: \"drbd.io/drbd9-rhel7:v9.1.11\"\n"
"    kernelModuleInjectionMode: ShippedModules\n"
"    kernelModuleInjectionAdditionalSourceDirectory: \"\" <8>\n"
"    kernelModuleInjectionResources: {} <3>\n"
"    kernelModuleInjectionExtraVolumeMounts: []\n"
"    additionalEnv: [] <5>\n"
"    sidecars: []\n"
"    extraVolumes: []\n"
"    customLabels: {}\n"
"    customAnnotations: {}\n"
"haController:\n"
"  enabled: false\n"
"  image: drbd.io/linstor-k8s-ha-controller:v0.3.0\n"
"  affinity: {} <4>\n"
"  tolerations: [] <4>\n"
"  resources: {} <3>\n"
"  replicas: 1 <2>\n"
"  customLabels: {}\n"
"  customAnnotations: {}\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:834
msgid "Sets the pull policy for all images."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:836
msgid "Controls the number of replicas for each component."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:838
msgid ""
"Set container resource requests and limits. See https://kubernetes.io/docs/"
"tasks/configure-pod-container/assign-cpu-resource/[the kubernetes docs]."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:839
msgid "Most containers need a minimal amount of resources, except for:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:840
msgid ""
"`etcd.resources` See the https://etcd.io/docs/v3.4.0/op-guide/hardware/[etcd "
"docs]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:841
msgid "`operator.controller.resources` Around `700MiB` memory is required"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:842
msgid "`operater.satelliteSet.resources` Around `700MiB` memory is required"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:844
msgid ""
"`operator.satelliteSet.kernelModuleInjectionResources` If kernel modules are "
"compiled, 1GiB of memory is required."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:850
msgid ""
"Affinity and toleration determine where pods are scheduled on the cluster. "
"See the https://kubernetes.io/docs/concepts/scheduling-eviction/[kubernetes "
"docs on affinity and toleration].  This may be especially important for the "
"`operator.satelliteSet` and `csi.node*` values. To schedule a pod using a "
"LINSTOR persistent volume, the node requires a running LINSTOR satellite and "
"LINSTOR CSI pod."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:854
msgid ""
"Sets additional environments variables to pass to the LINSTOR Controller and "
"Satellites.  Uses the same format as https://kubernetes.io/docs/tasks/inject-"
"data-application/define-environment-variable-container/[the `env` value of a "
"container]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:856
msgid ""
"Sets additional properties on the LINSTOR Controller. Expects a simple "
"mapping of `<property-key>: <value>`."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:858
msgid ""
"Kubelet expects every CSI plug-in to mount volumes under a specific "
"subdirectory of its own state directory. By default, this state directory is "
"`/var/lib/kubelet`. Some Kubernetes distributions use a different directory:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:860
msgid "microk8s: `/var/snap/microk8s/common/var/lib/kubelet`"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:862
msgid ""
"Directory on the host that is required for building kernel modules. Only "
"needed if using the `Compile` injection method. Defaults to `/usr/src`, "
"which is where the actual kernel sources are stored on most distributions. "
"Use `\"none\"` to not mount any additional directories."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:864
msgid ""
"Set the number of worker threads used by the CSI driver. Higher values put "
"more load on the LINSTOR Controller, which may lead to instability when "
"creating many volumes at once."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:866
msgid ""
"If set to true, the satellite containers will have the following files and "
"directories mounted from the host OS:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:868
msgid "`/etc/drbd/drbd.conf` (file)"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:869
msgid "`/etc/drbd.d` (directory)"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:870
msgid "`/var/lib/drbd` (directory)"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:871
msgid "`/var/lib/linstor.d` (directory)"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:873
msgid "All files and directories must already exist on the host."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:875
#, no-wrap
msgid "High-Availability Deployment"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:879
msgid ""
"To create a high-availability deployment of all components, consult the "
"https://github.com/piraeusdatastore/piraeus-operator/blob/b00fd34/doc/"
"scheduling.md[upstream guide] The default values are chosen so that scaling "
"the components to multiple replicas ensures that the replicas are placed on "
"different nodes. This ensures that a single node failures will not interrupt "
"the service."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:881
#, no-wrap
msgid "Monitoring with Prometheus"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:884
msgid ""
"You can use https://prometheus.io/[Prometheus] to monitor LINSTOR "
"components.  The operator will set up monitoring containers along the "
"existing components and make them available as a `Service`."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:888
msgid ""
"If you use the https://prometheus-operator.dev/[Prometheus Operator], the "
"LINSTOR Operator will also set up the `ServiceMonitor` instances. The "
"metrics will automatically be collected by the Prometheus instance "
"associated to the operator, assuming https://prometheus-operator.dev/docs/"
"kube/monitoring-other-namespaces/[watching the Piraeus namespace is enabled]."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:890
msgid ""
"To disable exporting of metrics, set `operator.satelliteSet.monitoringImage` "
"to an empty value."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:891
#, fuzzy, no-wrap
#| msgid "LINBIT LINSTOR Controller Appliance"
msgid "LINSTOR Controller Monitoring"
msgstr "LINBIT LINSTOR Controller设备"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:895
msgid ""
"The LINSTOR Controller exports cluster-wide metrics. Metrics are exported on "
"the existing controller service, using the path https://linbit.com/drbd-user-"
"guide/linstor-guide-1_0-en/#s-linstor-monitoring[`/metrics`]."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:896
#, fuzzy, no-wrap
#| msgid "DRBD resource configuration"
msgid "DRBD Resource Monitoring"
msgstr "DRBD资源配置"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:901
msgid ""
"All satellites are bundled with a secondary container that uses https://"
"github.com/LINBIT/drbd-reactor/[`drbd-reactor`] to export metrics directly "
"from DRBD. The metrics are available on port 9942, for convenience a "
"headless service named `<linstorsatelliteset-name>-monitoring` is provided."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:903
msgid ""
"If you want to disable the monitoring container, set `monitoringImage` to "
"`\"\"` in your LinstorSatelliteSet resource."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:905
#, fuzzy, no-wrap
#| msgid "Deploying with the LINSTOR Operator"
msgid "Deploying with an External LINSTOR Controller"
msgstr "使用LINSTOR Operator部署"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:910
msgid ""
"The operator can configure the satellites and CSI plug-in to use an existing "
"LINSTOR setup. This can be useful in cases where the storage infrastructure "
"is separate from the Kubernetes cluster. Volumes can be provisioned in "
"diskless mode on the Kubernetes nodes while the storage nodes will provide "
"the backing disk storage."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:913
msgid ""
"To skip the creation of a LINSTOR Controller deployment and configure the "
"other components to use your existing LINSTOR Controller, use the following "
"options when running `helm install`:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:916
msgid ""
"`operator.controller.enabled=false` This disables creation of the "
"`LinstorController` resource"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:918
msgid ""
"`operator.etcd.enabled=false` Since no LINSTOR Controller will run on "
"Kubernetes, no database is required."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:920
msgid ""
"`controllerEndpoint=<url-of-linstor-controller>` The HTTP endpoint of the "
"existing LINSTOR Controller. For example: `http://linstor.storage."
"cluster:3370/`"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:922
msgid ""
"After all pods are ready, you should see the Kubernetes cluster nodes as "
"satellites in your LINSTOR setup."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:924
msgid ""
"Your kubernetes nodes must be reachable using their IP by the controller and "
"storage nodes."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:926
msgid ""
"Create a storage class referencing an existing storage pool on your storage "
"nodes."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:938
#, no-wrap
msgid ""
"apiVersion: storage.k8s.io/v1\n"
"kind: StorageClass\n"
"metadata:\n"
"  name: linstor-on-k8s\n"
"provisioner: linstor.csi.linbit.com\n"
"parameters:\n"
"  autoPlace: \"3\"\n"
"  storagePool: existing-storage-pool\n"
"  resourceGroup: linstor-on-k8s\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:943
msgid ""
"You can provision new volumes by creating PVCs using your storage class. The "
"volumes will first be placed only on nodes with the given storage pool, that "
"is, your storage infrastructure. Once you want to use the volume in a pod, "
"LINSTOR CSI will create a diskless resource on the Kubernetes node and "
"attach over the network to the diskful resource."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:945
#, no-wrap
msgid "Deploying with the Piraeus Operator"
msgstr "使用Piraeus Operator部署"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:951
msgid ""
"The community supported edition of the LINSTOR deployment in Kubernetes is "
"called Piraeus. The Piraeus project provides https://github.com/"
"piraeusdatastore/piraeus-operator[an operator] for deployment."
msgstr ""
"在Kubernetes中由社区支持的LINSTOR部署版本称为Piraeus。Piraeus项目提供了一个 "
"https://github.com/piraewdatastore/piraeus-operator[an operator] 进行部署。"

#. type: Title ===
#: UG9/en/linstor-kubernetes.adoc:953
#, no-wrap
msgid "Interacting with LINSTOR in Kubernetes"
msgstr "在Kubernetes中与LINSTOR互动"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:957
msgid ""
"The Controller pod includes a LINSTOR Client, making it easy to interact "
"directly with LINSTOR.  For instance:"
msgstr "Controller pod包括LINSTOR客户端，使得直接与LINSTOR交互变得容易。例如："

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:960
#, fuzzy, no-wrap
#| msgid "kubectl exec linstor-op-cs-controller-0 -- linstor storage-pool list\n"
msgid "kubectl exec deployment/linstor-op-cs-controller -- linstor storage-pool list\n"
msgstr "kubectl exec linstor-op-cs-controller-0 -- linstor storage-pool list\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:965
msgid ""
"For a convenient shortcut to the above command, download https://github.com/"
"piraeusdatastore/kubectl-linstor/releases[`kubectl-linstor`] and install it "
"alongside `kubectl`. Then you can use `kubectl linstor` to get access to the "
"complete LINSTOR CLI."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:976
#, no-wrap
msgid ""
"$ kubectl linstor node list\n"
"╭────────────────────────────────────────────────────────────────────────────────────╮\n"
"┊ Node                           ┊ NodeType   ┊ Addresses                   ┊ State  ┊\n"
"╞════════════════════════════════════════════════════════════════════════════════════╡\n"
"┊ kube-node-01.test              ┊ SATELLITE  ┊ 10.43.224.26:3366 (PLAIN)   ┊ Online ┊\n"
"┊ kube-node-02.test              ┊ SATELLITE  ┊ 10.43.224.27:3366 (PLAIN)   ┊ Online ┊\n"
"┊ kube-node-03.test              ┊ SATELLITE  ┊ 10.43.224.28:3366 (PLAIN)   ┊ Online ┊\n"
"┊ linstor-op-cs-controller-[...] ┊ CONTROLLER ┊ 172.24.116.114:3366 (PLAIN) ┊ Online ┊\n"
"╰────────────────────────────────────────────────────────────────────────────────────╯\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:979
msgid "It also expands references to PVCs to the matching LINSTOR resource"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:990
#, no-wrap
msgid ""
"$ kubectl linstor resource list -r pvc:my-namespace/demo-pvc-1 --all\n"
"pvc:my-namespace/demo-pvc-1 -> pvc-2f982fb4-bc05-4ee5-b15b-688b696c8526\n"
"╭─────────────────────────────────────────────────────────────────────────────────────────────╮\n"
"┊ ResourceName ┊ Node              ┊ Port ┊ Usage  ┊ Conns ┊    State   ┊ CreatedOn           ┊\n"
"╞═════════════════════════════════════════════════════════════════════════════════════════════╡\n"
"┊ pvc-[...]    ┊ kube-node-01.test ┊ 7000 ┊ Unused ┊ Ok    ┊   UpToDate ┊ 2021-02-05 09:16:09 ┊\n"
"┊ pvc-[...]    ┊ kube-node-02.test ┊ 7000 ┊ Unused ┊ Ok    ┊ TieBreaker ┊ 2021-02-05 09:16:08 ┊\n"
"┊ pvc-[...]    ┊ kube-node-03.test ┊ 7000 ┊ InUse  ┊ Ok    ┊   UpToDate ┊ 2021-02-05 09:16:09 ┊\n"
"╰─────────────────────────────────────────────────────────────────────────────────────────────╯\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:993
msgid ""
"It also expands references of the form `pod:[<namespace>/]<podname>` into a "
"list resources in use by the pod."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:997 UG9/en/linstor-openshift.adoc:141
#, fuzzy
msgid ""
"This should only be necessary for investigating problems and accessing "
"advanced functionality.  Regular operation such as creating volumes should "
"be achieved through the <<s-kubernetes-basic-configuration-and-deployment,"
"Kubernetes integration>>."
msgstr ""
"这应该只是调研问题和访问高级功能所必需的。常规操作（如创建卷）应通过<<s-"
"kubernetes-basic-configuration-and-deployment,Kubernetes integration>>实现。"

#. type: Title ===
#: UG9/en/linstor-kubernetes.adoc:999
#, no-wrap
msgid "Basic Configuration and Deployment"
msgstr "基本配置和部署"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1003
msgid ""
"Once all linstor-csi __Pod__s are up and running, we can provision volumes "
"using the usual Kubernetes workflows."
msgstr ""
"一旦所有linstor-csi __Pod__s 都启动并运行，我们就可以使用通常的Kubernetes工作"
"流创建卷。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1006
#, fuzzy
#| msgid ""
#| "Configuring the behavior and properties of LINSTOR volumes deployed via "
#| "Kubernetes is accomplished via the use of __StorageClass__es. Here below "
#| "is the simplest practical _StorageClass_ that can be used to deploy "
#| "volumes:"
msgid ""
"Configuring the behavior and properties of LINSTOR volumes deployed through "
"Kubernetes is accomplished using __StorageClass__es."
msgstr ""
"配置通过Kubernetes部署的LINSTOR卷的行为和属性是通过使用 __StorageClass__es 来"
"完成的。下面是可用于部署卷的最简单实用的 _StorageClass_ ："

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1008
msgid ""
"the \"resourceGroup\" parameter is mandatory. Usually you want it to be "
"unique and the same as the storage class name."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1010
msgid ""
"Here below is the simplest practical _StorageClass_ that can be used to "
"deploy volumes:"
msgstr ""

#. type: Block title
#: UG9/en/linstor-kubernetes.adoc:1011
#, no-wrap
msgid "linstor-basic-sc.yaml"
msgstr "linstor-basic-sc.yaml"

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1031
#, fuzzy, no-wrap
#| msgid ""
#| "apiVersion: storage.k8s.io/v1beta1\n"
#| "kind: StorageClass\n"
#| "metadata:\n"
#| "  # The name used to identify this StorageClass.\n"
#| "  name: linstor-basic-storage-class\n"
#| "  # The name used to match this StorageClass with a provisioner.\n"
#| "  # linstor.csi.linbit.com is the name that the LINSTOR CSI plugin uses to identify itself\n"
#| "provisioner: linstor.csi.linbit.com\n"
#| "parameters:\n"
#| "  # LINSTOR will provision volumes from the drbdpool storage pool configured\n"
#| "  # On the satellite nodes in the LINSTOR cluster specified in the plugin's deployment\n"
#| "  storagePool: \"drbdpool\"\n"
msgid ""
"apiVersion: storage.k8s.io/v1\n"
"kind: StorageClass\n"
"metadata:\n"
"  # The name used to identify this StorageClass.\n"
"  name: linstor-basic-storage-class\n"
"  # The name used to match this StorageClass with a provisioner.\n"
"  # linstor.csi.linbit.com is the name that the LINSTOR CSI plug-in uses to identify itself\n"
"provisioner: linstor.csi.linbit.com\n"
"volumeBindingMode: WaitForFirstConsumer\n"
"parameters:\n"
"  # LINSTOR will provision volumes from the drbdpool storage pool configured\n"
"  # On the satellite nodes in the LINSTOR cluster specified in the plug-in's deployment\n"
"  storagePool: \"lvm-thin\"\n"
"  resourceGroup: \"linstor-basic-storage-class\"\n"
"  # Setting a fstype is required for \"fsGroup\" permissions to work correctly.\n"
"  # Currently supported: xfs/ext4\n"
"  csi.storage.k8s.io/fstype: xfs\n"
msgstr ""
"apiVersion: storage.k8s.io/v1beta1\n"
"kind: StorageClass\n"
"metadata:\n"
"  # The name used to identify this StorageClass.\n"
"  name: linstor-basic-storage-class\n"
"  # The name used to match this StorageClass with a provisioner.\n"
"  # linstor.csi.linbit.com is the name that the LINSTOR CSI plugin uses to identify itself\n"
"provisioner: linstor.csi.linbit.com\n"
"parameters:\n"
"  # LINSTOR will provision volumes from the drbdpool storage pool configured\n"
"  # On the satellite nodes in the LINSTOR cluster specified in the plugin's deployment\n"
"  storagePool: \"drbdpool\"\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1034
msgid ""
"The _storagePool_ value, `lvm-thin` in the example YAML configuration file "
"above, must match an available LINSTOR _StoragePool_. You can list storage "
"pool information using the `linstor storage-pool list` command, executed "
"within the running `linstor-op-cs-controller` pod."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1036
msgid "We can create the _StorageClass_ with the following command:"
msgstr "我们可以使用以下命令创建 _StorageClasses_ ："

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1039
#, no-wrap
msgid "kubectl create -f linstor-basic-sc.yaml\n"
msgstr "kubectl create -f linstor-basic-sc.yaml\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1043
msgid ""
"Now that our _StorageClass_ is created, we can now create a "
"_PersistentVolumeClaim_ which can be used to provision volumes known both to "
"Kubernetes and LINSTOR:"
msgstr ""
"现在，我们的存储类已经创建，我们现在可以创建一个 _PersistentVolumeClaim_ ，它"
"可以用来提供Kubernetes和LINSTOR都知道的卷："

#. type: Block title
#: UG9/en/linstor-kubernetes.adoc:1044
#, no-wrap
msgid "my-first-linstor-volume-pvc.yaml"
msgstr "my-first-linstor-volume-pvc.yaml"

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1058
#, fuzzy, no-wrap
#| msgid ""
#| "kind: PersistentVolumeClaim\n"
#| "apiVersion: v1\n"
#| "metadata:\n"
#| "  name: my-first-linstor-volume\n"
#| "  annotations:\n"
#| "    # This line matches the PersistentVolumeClaim with our StorageClass\n"
#| "    # and therefore our provisioner.\n"
#| "    volume.beta.kubernetes.io/storage-class: linstor-basic-storage-class\n"
#| "spec:\n"
#| "  accessModes:\n"
#| "    - ReadWriteOnce\n"
#| "  resources:\n"
#| "    requests:\n"
#| "      storage: 500Mi\n"
msgid ""
"kind: PersistentVolumeClaim\n"
"apiVersion: v1\n"
"metadata:\n"
"  name: my-first-linstor-volume\n"
"spec:\n"
"  storageClassName: linstor-basic-storage-class\n"
"  accessModes:\n"
"    - ReadWriteOnce\n"
"  resources:\n"
"    requests:\n"
"      storage: 500Mi\n"
msgstr ""
"kind: PersistentVolumeClaim\n"
"apiVersion: v1\n"
"metadata:\n"
"  name: my-first-linstor-volume\n"
"  annotations:\n"
"    # This line matches the PersistentVolumeClaim with our StorageClass\n"
"    # and therefore our provisioner.\n"
"    volume.beta.kubernetes.io/storage-class: linstor-basic-storage-class\n"
"spec:\n"
"  accessModes:\n"
"    - ReadWriteOnce\n"
"  resources:\n"
"    requests:\n"
"      storage: 500Mi\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1061
msgid "We can create the _PersistentVolumeClaim_ with the following command:"
msgstr "我们可以使用以下命令创建 _PersistentVolumeClaim_ ："

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1064
#, no-wrap
msgid "kubectl create -f my-first-linstor-volume-pvc.yaml\n"
msgstr "kubectl create -f my-first-linstor-volume-pvc.yaml\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1070
msgid ""
"This will create a _PersistentVolumeClaim_, but no volume will be created "
"just yet.  The storage class we used specified `volumeBindingMode: "
"WaitForFirstConsumer`, which means that the volume is only created once a "
"workload starts using it. This ensures that the volume is placed on the same "
"node as the workload."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1073
msgid ""
"For our example, we create a simple Pod, which mounts or volume by "
"referencing the _PersistentVolumeClaim_."
msgstr ""

#. type: Block title
#: UG9/en/linstor-kubernetes.adoc:1073
#, no-wrap
msgid "my-first-linstor-volume-pod.yaml"
msgstr "my-first-linstor-volume-pod.yaml"

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1096
#, no-wrap
msgid ""
"apiVersion: v1\n"
"kind: Pod\n"
"metadata:\n"
"  name: fedora\n"
"  namespace: default\n"
"spec:\n"
"  containers:\n"
"  - name: fedora\n"
"    image: fedora\n"
"    command: [/bin/bash]\n"
"    args: [\"-c\", \"while true; do sleep 10; done\"]\n"
"    volumeMounts:\n"
"    - name: my-first-linstor-volume\n"
"      mountPath: /data\n"
"    ports:\n"
"    - containerPort: 80\n"
"  volumes:\n"
"  - name: my-first-linstor-volume\n"
"    persistentVolumeClaim:\n"
"      claimName: \"my-first-linstor-volume\"\n"
msgstr ""
"apiVersion: v1\n"
"kind: Pod\n"
"metadata:\n"
"  name: fedora\n"
"  namespace: default\n"
"spec:\n"
"  containers:\n"
"  - name: fedora\n"
"    image: fedora\n"
"    command: [/bin/bash]\n"
"    args: [\"-c\", \"while true; do sleep 10; done\"]\n"
"    volumeMounts:\n"
"    - name: my-first-linstor-volume\n"
"      mountPath: /data\n"
"    ports:\n"
"    - containerPort: 80\n"
"  volumes:\n"
"  - name: my-first-linstor-volume\n"
"    persistentVolumeClaim:\n"
"      claimName: \"my-first-linstor-volume\"\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1099
msgid "We can create the _Pod_ with the following command:"
msgstr "我们可以使用以下命令创建 _Pod_ ："

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1102
#, no-wrap
msgid "kubectl create -f my-first-linstor-volume-pod.yaml\n"
msgstr "kubectl create -f my-first-linstor-volume-pod.yaml\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1107
#, fuzzy
#| msgid ""
#| "Running `kubectl describe pod fedora` can be used to confirm that _Pod_ "
#| "scheduling and volume attachment succeeded."
msgid ""
"Running `kubectl describe pod fedora` can be used to confirm that _Pod_ "
"scheduling and volume attachment succeeded. Examining the "
"_PersistentVolumeClaim_, we can see that it is now bound to a volume."
msgstr "运行 `kubectl describe pod fedora` 可用于确认 _Pod_ 调度和卷附加成功。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1112
#, fuzzy
#| msgid ""
#| "To remove a volume, please ensure that no pod is using it and then delete "
#| "the _PersistentVolumeClaim_ via `kubectl`. For example, to remove the "
#| "volume that we just made, run the following two commands, noting that the "
#| "_Pod_ must be unscheduled before the _PersistentVolumeClaim_ will be "
#| "removed:"
msgid ""
"To remove a volume, please ensure that no pod is using it and then delete "
"the _PersistentVolumeClaim_ using the `kubectl` command. For example, to "
"remove the volume that we just made, run the following two commands, noting "
"that the _Pod_ must be unscheduled before the _PersistentVolumeClaim_ will "
"be removed:"
msgstr ""
"要删除卷，请确保没有pod正在使用它，然后通过 `kubectl` 删除 "
"`PersistentVolumeClaim` 。例如，要删除我们刚刚创建的卷，请运行以下两个命令，"
"注意在删除 _PersistentVolumeClaim_ 之前必须取消调度该 _Pod_ ："

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1115
#, no-wrap
msgid "kubectl delete pod fedora # unschedule the pod.\n"
msgstr "kubectl delete pod fedora # unschedule the pod.\n"

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1117
#, no-wrap
msgid "kubectl get pod -w # wait for pod to be unscheduled\n"
msgstr "kubectl get pod -w # wait for pod to be unscheduled\n"

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1119
#, no-wrap
msgid "kubectl delete pvc my-first-linstor-volume # remove the PersistentVolumeClaim, the PersistentVolume, and the LINSTOR Volume.\n"
msgstr "kubectl delete pvc my-first-linstor-volume # remove the PersistentVolumeClaim, the PersistentVolume, and the LINSTOR Volume.\n"

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1122
#, fuzzy, no-wrap
#| msgid "Available storage plugins"
msgid "Available Parameters in a Storage Class"
msgstr "可用的存储插件"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1125
msgid ""
"The following storage class contains all currently available parameters to "
"configure the provisioned storage."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1127
msgid ""
"`linstor.csi.linbit.com/` is an optional, but recommended prefix for LINSTOR "
"CSI specific parameters."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1161
#, no-wrap
msgid ""
"apiVersion: storage.k8s.io/v1\n"
"kind: StorageClass\n"
"metadata:\n"
"  name: full-example\n"
"provisioner: linstor.csi.linbit.com\n"
"parameters:\n"
"  # CSI related parameters\n"
"  csi.storage.k8s.io/fstype: xfs\n"
"  # LINSTOR parameters\n"
"  linstor.csi.linbit.com/autoPlace: \"2\"\n"
"  linstor.csi.linbit.com/placementCount: \"2\"\n"
"  linstor.csi.linbit.com/resourceGroup: \"full-example\"\n"
"  linstor.csi.linbit.com/storagePool: \"my-storage-pool\"\n"
"  linstor.csi.linbit.com/disklessStoragePool: \"DfltDisklessStorPool\"\n"
"  linstor.csi.linbit.com/layerList: \"drbd storage\"\n"
"  linstor.csi.linbit.com/placementPolicy: \"AutoPlaceTopology\"\n"
"  linstor.csi.linbit.com/allowRemoteVolumeAccess: \"true\"\n"
"  linstor.csi.linbit.com/encryption: \"true\"\n"
"  linstor.csi.linbit.com/nodeList: \"diskful-a diskful-b\"\n"
"  linstor.csi.linbit.com/clientList: \"diskless-a diskless-b\"\n"
"  linstor.csi.linbit.com/replicasOnSame: \"zone=a\"\n"
"  linstor.csi.linbit.com/replicasOnDifferent: \"rack\"\n"
"  linstor.csi.linbit.com/disklessOnRemaining: \"false\"\n"
"  linstor.csi.linbit.com/doNotPlaceWithRegex: \"tainted.*\"\n"
"  linstor.csi.linbit.com/fsOpts: \"-E nodiscard\"\n"
"  linstor.csi.linbit.com/mountOpts: \"noatime\"\n"
"  linstor.csi.linbit.com/postMountXfsOpts: \"extsize 2m\"\n"
"  # Linstor properties\n"
"  property.linstor.csi.linbit.com/*: <x>\n"
"  # DRBD parameters\n"
"  DrbdOptions/*: <x>\n"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1164
#, no-wrap
msgid "csi.storage.k8s.io/fstype"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1167
msgid ""
"The `csi.storage.k8s.io/fstype` parameter sets the file system type to "
"create for `volumeMode: FileSystem` PVCs. Currently supported are:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1169
#, fuzzy
#| msgid "ignore (default)"
msgid "`ext4` (default)"
msgstr "ignore (default)"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1170
msgid "`xfs`"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1172
#, no-wrap
msgid "autoPlace"
msgstr "autoPlace"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1178
#, fuzzy
#| msgid ""
#| "`autoPlace` is an integer that determines the amount of replicas a volume "
#| "of this _StorageClass_ will have.  For instance, `autoPlace: 3` will "
#| "produce volumes with three-way replication. If neither `autoPlace` nor "
#| "`nodeList` are set, volumes will be <<s-autoplace-linstor,automatically "
#| "placed>> on one node."
msgid ""
"`autoPlace` is an integer that determines the amount of replicas a volume of "
"this _StorageClass_ will have. For instance, `autoPlace: \"3\"` will produce "
"volumes with three-way replication. If neither `autoPlace` nor `nodeList` "
"are set, volumes will be <<s-autoplace-linstor,automatically placed>> on one "
"node."
msgstr ""
"`autoPlace` 是一个整数，用于确定此存储类卷的副本数量。例如， `autoPlace:3` 将"
"生成具有三路复制的卷。如果未设置 `autoPlace` 或 `nodeList` ，则卷将<<s-"
"autoplace-linstor,automatically placed>>。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1180
msgid ""
"If you use this option, you must not use <<s-kubernetes-nodelist,nodeList>>."
msgstr "如果使用此选项，则不能使用<<s-kubernetes-nodelist,nodeList>>。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1182
msgid ""
"You have to use quotes, otherwise Kubernetes will complain about a malformed "
"_StorageClass_."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1187
msgid ""
"This option (and all options which affect autoplacement behavior) modifies "
"the number of LINSTOR nodes on which the underlying storage for volumes will "
"be provisioned and is orthogonal to which _kubelets_ those volumes will be "
"accessible from."
msgstr ""
"此选项（以及影响自动放置行为的所有选项）修改将在其上配置卷的底层存储的LINSTOR"
"节点的数量，并且与可从中访问这些卷的 _kubelets_ 正交。"

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1188
#, fuzzy, no-wrap
#| msgid "Manual placement"
msgid "placementCount"
msgstr "手动放置"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1191
#, fuzzy
#| msgid ""
#| "If you use this option, you must not use <<s-kubernetes-autoplace,"
#| "autoPlace>>."
msgid "`placementCount` is an alias for <<s-kubernetes-autoplace,`autoPlace`>>"
msgstr "如果使用此选项，则不能使用<<s-kubernetes-autoplace,autoPlace>>。"

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1192
#, fuzzy, no-wrap
#| msgid "Resource groups"
msgid "resourceGroup"
msgstr "资源组"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1196
msgid ""
"The <<s-linstor-resource-groups, LINSTOR Resource Group (RG)>> to associate "
"with this StorageClass. If not set, a new RG will be created for each new "
"PVC."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1198
#, no-wrap
msgid "storagePool"
msgstr "storagePool"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1202
msgid ""
"`storagePool` is the name of the LINSTOR <<s-storage_pools,storage pool>> "
"that will be used to provide storage to the newly-created volumes."
msgstr ""
"`storagePool` 是用于为新创建的卷提供存储的LINSTOR <<s-storage_pools,storage "
"pool>>的名称。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1207
msgid ""
"Only nodes configured with this same _storage pool_ with be considered for "
"<<s-kubernetes-autoplace,autoplacement>>. Likewise, for _StorageClasses_ "
"using <<s-kubernetes-nodelist,nodeList>> all nodes specified in that list "
"must have this _storage pool_ configured on them."
msgstr ""
"只有配置了相同 _storage pool_ 的节点才被考虑用于<<s-kubernetes-autoplace,"
"autoplacement>>。同样，对于使用<<s-kubernetes-nodelist,nodeList>>该列表中指定"
"的所有节点，都必须在其上配置此 _storage pool_。"

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1209
#, no-wrap
msgid "disklessStoragePool"
msgstr "disklessStoragePool"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1214
msgid ""
"`disklessStoragePool` is an optional parameter that only effects LINSTOR "
"volumes assigned disklessly to _kubelets_ i.e., as clients. If you have a "
"custom _diskless storage pool_ defined in LINSTOR, you'll specify that here."
msgstr ""
"`disklessStoragePool` 是一个可选参数，它只影响作为客户端无磁盘分配给 "
"_kubelets_ 的LINSTOR卷。如果在LINSTOR中定义了自定义 _diskless storage pool_，"
"请在此处指定。"

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1215
#, no-wrap
msgid "layerList"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1219
msgid ""
"A comma-separated list of layers to use for the created volumes. The "
"available layers and their order are described towards the end of <<s-"
"linstor-without-drbd, this section>>. Defaults to `drbd,storage`"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1221
#, no-wrap
msgid "placementPolicy"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1224
msgid "Select from one of the available volume schedulers:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1228
msgid ""
"`AutoPlaceTopology`, the default: Use topology information from Kubernetes "
"together with user provided constraints (see <<s-kubernetes-replicasonsame>> "
"and <<s-kubernetes-replicasondifferent>>)."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1230
msgid ""
"`AutoPlace` Use LINSTOR autoplace, influenced by <<s-kubernetes-"
"replicasonsame>> and <<s-kubernetes-replicasondifferent>>"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1232
msgid ""
"`FollowTopology`: Use CSI Topology information to place at least one volume "
"in each \"preferred\" zone. Only useable if CSI Topology is enabled."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1233
msgid "`Manual`: Use only the nodes listed in `nodeList` and `clientList`."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1235
msgid ""
"`Balanced`: **EXPERIMENTAL** Place volumes across failure domains, using the "
"least used storage pool on each selected node."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1237
#, no-wrap
msgid "allowRemoteVolumeAccess"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1240
msgid ""
"Control on which nodes a volume is accessible. The value for this option can "
"take two different forms:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1243
msgid ""
"A simple `\"true\"` or `\"false\"` allows access from all nodes, or only "
"those nodes with diskfull resources."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1245
msgid ""
"Advanced rules, which allow more granular rules on which nodes can access "
"the volume."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1248
msgid ""
"The current implementation can grant access to the volume for nodes that "
"share the same labels. For example, if you want to allow access from all "
"nodes in the same region and zone as a diskfull resource, you could use:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1256
#, no-wrap
msgid ""
"parameters:\n"
"  linstor.csi.linbit.com/allowRemoteVolumeAccess: |\n"
"    - fromSame:\n"
"      - topology.kubernetes.io/region\n"
"      - topology.kubernetes.io/zone\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1259
msgid ""
"You can specify multiple rules. The rules are additive, a node only need to "
"match one rule to be assignable."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1261
#, no-wrap
msgid "encryption"
msgstr "encryption"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1266
#, fuzzy
#| msgid ""
#| "`encryption` is an optional parameter that determines whether to encrypt "
#| "volumes. LINSTOR must be <<s-linstor-encrypted-Volumes,configured for "
#| "encryption>> for this to work properly."
msgid ""
"`encryption` is an optional parameter that determines whether to encrypt "
"volumes. LINSTOR must be <<s-linstor-encrypted-volumes,configured for "
"encryption>> for this to work properly."
msgstr ""
"`encryption` 是一个可选参数，用于确定是否加密卷。LINSTOR必须<<s-linstor-"
"encrypted-Volumes,configured for encryption>>才能正常工作。"

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1268
#, no-wrap
msgid "nodeList"
msgstr "节点列表"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1274
msgid ""
"`nodeList` is a list of nodes for volumes to be assigned to. This will "
"assign the volume to each node and it will be replicated among all of them. "
"This can also be used to select a single node by hostname, but it's more "
"flexible to use <<s-kubernetes-replicasonsame,replicasOnSame>> to select a "
"single node."
msgstr ""
"`nodeList` 是要分配给卷的节点列表。这将把卷分配给每个节点，并在所有节点之间进"
"行复制。这也可以用于按主机名选择单个节点，但使用<<s-kubernetes-"
"replicasonsame,replicasOnSame>>选择单个节点更灵活。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1276
msgid ""
"If you use this option, you must not use <<s-kubernetes-autoplace,"
"autoPlace>>."
msgstr "如果使用此选项，则不能使用<<s-kubernetes-autoplace,autoPlace>>。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1280
msgid ""
"This option determines on which LINSTOR nodes the underlying storage for "
"volumes will be provisioned and is orthogonal from which _kubelets_ these "
"volumes will be accessible."
msgstr ""
"此选项确定卷的底层存储将在哪个LINSTOR节点上配置，并且与从那个 _kubelets_ 可以"
"访问这些卷位置正交。"

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1281
#, fuzzy, no-wrap
#| msgid "DRBD clients"
msgid "clientList"
msgstr "DRBD客户端"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1284
msgid ""
"`clientList` is a list of nodes for diskless volumes to be assigned to. Use "
"in conjunction with <<s-kubernetes-nodelist>>."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1286
#, no-wrap
msgid "replicasOnSame"
msgstr "replicasOnSame"

#.  These should link to the linstor documentation about node properties, but those
#.  do not exist at the time of this commit.
#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1293
msgid ""
"`replicasOnSame` is a list of `key` or `key=value` items used as "
"autoplacement selection labels when <<s-kubernetes-autoplace,autoplace>> is "
"used to determine where to provision storage. These labels correspond to "
"LINSTOR node properties."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1296
msgid ""
"The operator periodically synchronizes all labels from Kubernetes Nodes, so "
"you can use them as keys for scheduling constraints."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1300
msgid ""
"Let's explore this behavior with examples assuming a LINSTOR cluster such "
"that `node-a` is configured with the following auxiliary property `zone=z1` "
"and `role=backups`, while `node-b` is configured with only `zone=z1`."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1305
msgid ""
"If we configure a _StorageClass_ with `autoPlace: \"1\"` and "
"`replicasOnSame: \"zone=z1 role=backups\"`, then all volumes created from "
"that _StorageClass_ will be provisioned on `node-a`, since that is the only "
"node with all of the correct key=value pairs in the LINSTOR cluster. This is "
"the most flexible way to select a single node for provisioning."
msgstr ""
"如果我们使用 `autoPlace: \"1\" ` 和 `replicasOnSame: \"zone=z1 "
"role=backups\"`来配置一个 _StorageClass_` ，那么从该 _StorageClass_ 创建的所"
"有卷都将配置在 `node-a` 上，因为这是LINSTOR集群中唯一具有所有正确的key=value"
"对的节点。这是选择单个节点进行资源调配的最灵活方式。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1310
msgid ""
"This guide assumes LINSTOR CSI version 0.10.0 or newer. All properties "
"referenced in `replicasOnSame` and `replicasOnDifferent` are interpreted as "
"auxiliary properties. If you are using an older version of LINSTOR CSI, you "
"need to add the `Aux/` prefix to all property names. So `replicasOnSame: "
"\"zone=z1\"` would be `replicasOnSame: \"Aux/zone=z1\"` Using `Aux/` "
"manually will continue to work on newer LINSTOR CSI versions."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1314
msgid ""
"If we configure a _StorageClass_ with `autoPlace: \"1\"` and "
"`replicasOnSame: \"zone=z1\"`, then volumes will be provisioned on either "
"`node-a` or `node-b` as they both have the `zone=z1` aux prop."
msgstr ""
"如果我们使用 `autoPlace: \"1\" ` 和 `replicasOnSame: \"zone=z1\" ` 来配置一"
"个 _StorageClass_ ，那么卷将在 `node-a` 或 `node-b` 上配置，因为它们都有 "
"`zone=z1` 辅助属性。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1318
#, fuzzy
#| msgid ""
#| "If we configure a _StorageClass_ with `autoPlace: \"2\"` and "
#| "`replicasOnSame: \"zone=z1 role=backups\"`, then provisioning will fail, "
#| "as there are not two or more nodes that have the appropriate aux props."
msgid ""
"If we configure a _StorageClass_ with `autoPlace: \"2\"` and "
"`replicasOnSame: \"zone=z1 role=backups\"`, then provisioning will fail, as "
"there are not two or more nodes that have the appropriate auxiliary "
"properties."
msgstr ""
"如果我们使用 `autoPlace: \"2\"` 和  `replicasOnSame: \"zone=z1 "
"role=backups\"`来配置一个 _StorageClass_, 那么设置将失败，因为没有两个或更多"
"节点具有适当的aux props。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1322
msgid ""
"If we configure a _StorageClass_ with `autoPlace: \"2\"` and "
"`replicasOnSame: \"zone=z1\"`, then volumes will be provisioned on both "
"`node-a` and `node-b` as they both have the `zone=z1` aux prop."
msgstr ""
"如果我们用 `autoPlace: \"2\"` 和 `replicasOnSame: \"zone=z1\"` 配置一个存储"
"类，那么卷将同时在 `node-a` 和 `node-b` 上配置，因为它们都有 `zone=z1` 辅助属"
"性。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1326
msgid ""
"You can also use a property key without providing a value to ensure all "
"replicas are placed on nodes with the same property value, with caring about "
"the particular value. Assuming there are 4 nodes, `node-a1` and `node-a2` "
"are configured with `zone=a`. `node-b1` and `node-b2` are configured with "
"`zone=b`. Using `autoPlace: \"2\"` and `replicasOnSame: \"zone\"` will place "
"on either `node-a1` and `node-a2` OR on `node-b1` and `node-b2`."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1328
#, no-wrap
msgid "replicasOnDifferent"
msgstr "replicasOnDifferent"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1332
#, fuzzy
#| msgid ""
#| "`replicasOnDifferent` is a list of key=value pairs to avoid as "
#| "autoplacement selection. It is the inverse of <<s-kubernetes-"
#| "replicasonsame,replicasOnSame>>."
msgid ""
"`replicasOnDifferent` takes a list of properties to consider, same as <<s-"
"kubernetes-replicasonsame,replicasOnSame>>.  There are two modes of using "
"`replicasOnDifferent`:"
msgstr ""
"`replicasOnDifferent`是一个key=value对的列表，避免作为自动放置选择。它与<<s-"
"kubernetes-replicasonsame,replicasOnSame>>相反。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1334
msgid "Preventing volume placement on specific nodes:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1336
msgid ""
"If a value is given for the property, the nodes which have that property-"
"value pair assigned will be considered last."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1339
msgid ""
"Example: `replicasOnDifferent: \"no-csi-volumes=true\"` will place no volume "
"on any node with property `no-csi-volumes=true` unless there are not enough "
"other nodes to fulfill the `autoPlace` setting."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1341
msgid "Distribute volumes across nodes with different values for the same key:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1344
msgid ""
"If no property value is given, LINSTOR will place the volumes across nodes "
"with different values for that property if possible."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1348
msgid ""
"Example: Assuming there are 4 nodes, `node-a1` and `node-a2` are configured "
"with `zone=a`. `node-b1` and `node-b2` are configured with `zone=b`. Using a "
"_StorageClass_ with `autoPlace: \"2\"` and `replicasOnDifferent: \"zone\"`, "
"LINSTOR will create one replica on either `node-a1` or `node-a2` _and_ one "
"replica on either `node-b1` or `node-b2`."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1349
#, no-wrap
msgid "disklessOnRemaining"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1352
msgid ""
"Create a diskless resource on _all_ nodes that were not assigned a diskful "
"resource."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1353
#, no-wrap
msgid "doNotPlaceWithRegex"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1356 UG9/en/linstor-openstack.adoc:472
msgid ""
"Do not place the resource on a node which has a resource with a name "
"matching the regex."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1358
#, no-wrap
msgid "fsOpts"
msgstr "fsOpts"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1361
msgid ""
"`fsOpts` is an optional parameter that passes options to the volume's "
"filesystem at creation time."
msgstr "`fsOpts` 是一个可选参数，在创建时将选项传递给卷的文件系统。"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1364
msgid ""
"Please note these values are specific to your chosen <<s-kubernetes-"
"filesystem, filesystem>>."
msgstr "请注意，这些值特定于您选择的<<s-kubernetes-filesystem, filesystem>>。"

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1366
#, no-wrap
msgid "mountOpts"
msgstr "mountOpts"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1369
msgid ""
"`mountOpts` is an optional parameter that passes options to the volume's "
"filesystem at mount time."
msgstr "`mountOpts` 是一个可选参数，在装载时将选项传递给卷的文件系统。"

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1370
#, fuzzy, no-wrap
#| msgid "mountOpts"
msgid "postMountXfsOpts"
msgstr "mountOpts"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1373
msgid ""
"Extra arguments to pass to `xfs_io`, which gets called before right before "
"first use of the volume."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1375
#, no-wrap
msgid "property.linstor.csi.linbit.com/*"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1379
msgid ""
"Parameters starting with `property.linstor.csi.linbit.com/` are translated "
"to LINSTOR properties that are set on the <<s-linstor-resource-groups,"
"Resource Group>> associated with the StorageClass."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1381
msgid "For example, to set `DrbdOptions/auto-quorum` to `disabled`, use:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1384
#, no-wrap
msgid "property.linstor.csi.linbit.com/DrbdOptions/auto-quorum: disabled\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1387
msgid ""
"The full list of options is available https://app.swaggerhub.com/apis-docs/"
"Linstor/Linstor/1.7.0#/developers/resourceDefinitionModify[here]"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1388
#, no-wrap
msgid "DrbdOptions/*: <x>"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1391
msgid ""
"This option is deprecated, use the more general <<s-kubernetes-storage-class-"
"properties, `property.linstor.csi.linbit.com/*`>> form."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1394
msgid ""
"Advanced DRBD options to pass to LINSTOR. For example, to change the "
"replication protocol, use `DrbdOptions/Net/protocol: \"A\"`."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-kubernetes.adoc:1396
#, no-wrap
msgid "Snapshots"
msgstr "快照"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1401
#, fuzzy
#| msgid ""
#| "Creating <<s-linstor-snapshots, snapshots>> and creating new volumes from "
#| "snapshots is done via the use of __VolumeSnapshot__s, "
#| "__VolumeSnapshotClass__es, and __PVC__s. First, you'll need to create a "
#| "_VolumeSnapshotClass_:"
msgid ""
"Creating <<s-linstor-snapshots, snapshots>> and creating new volumes from "
"snapshots is done using __VolumeSnapshot__s, __VolumeSnapshotClass__es, and "
"__PVC__s."
msgstr ""
"创建<<s-linstor-snapshots, snapshots>>和从快照创建新卷是通过使用 "
"__VolumeSnapshot__s, __VolumeSnapshotClass__es, 和 __PVC__s来完成的。首先，您"
"需要创建卷快照类 _VolumeSnapshotClass_："

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1403
#, fuzzy, no-wrap
#| msgid "Adding a Serial Port"
msgid "Adding Snapshot Support"
msgstr "添加串行端口"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1406
msgid ""
"LINSTOR supports the volume snapshot feature, which is configured in some, "
"but not all Kubernetes distributions."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1408
msgid ""
"To check if your Kubernetes distribution supports snapshots out of the box, "
"run the following command:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1415
#, no-wrap
msgid ""
"$ kubectl get --raw /apis/snapshot.storage.k8s.io/v1\n"
"{\"kind\":\"APIResourceList\",\"apiVersion\":\"v1\",\"groupVersion\":\"snapshot.storage.k8s.io/v1\"...\n"
"$ # If your distribution does NOT support snapshots out of the box, you will get a different response:\n"
"$ kubectl get --raw /apis/snapshot.storage.k8s.io/v1\n"
"Error from server (NotFound): the server could not find the requested resource\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1424
msgid ""
"In case your Kubernetes distribution _does not_ support snapshots, you can "
"manually add the {snapshot-controller-link}[required components] from the "
"Kubernetes Storage SIG. For convenience, you can use {piraeus-charts-link}"
"[Helm Charts] provided by the {piraeus-org}[Piraeus team] to add these "
"components."
msgstr ""

#. type: Block title
#: UG9/en/linstor-kubernetes.adoc:1425
#, no-wrap
msgid "Adding snapshot support using the Piraeus Charts"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1433
#, no-wrap
msgid ""
"$ kubectl create namespace snapshot-controller\n"
"$ helm repo add piraeus-charts https://piraeus.io/helm-charts/\n"
"$ helm install -n snapshot-controller snapshot-validation-webhook \\\n"
"  piraeus-charts/snapshot-validation-webhook\n"
"$ helm install -n snapshot-controller snapshot-controller \\\n"
"  piraeus-charts/snapshot-controller --wait\n"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1436
#, fuzzy, no-wrap
#| msgid "Restoring a snapshot"
msgid "Using Volume Snapshots"
msgstr "还原快照"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1438
#, fuzzy
#| msgid "Create the _VolumeSnapshotClass_ with `kubectl`:"
msgid "Then we can create our _VolumeSnapshotClass_:"
msgstr "使用 `kubectl` 创建 _VolumeSnapshotClass_ ："

#. type: Block title
#: UG9/en/linstor-kubernetes.adoc:1439
#, no-wrap
msgid "my-first-linstor-snapshot-class.yaml"
msgstr "my-first-linstor-snapshot-class.yaml"

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1448
#, fuzzy, no-wrap
#| msgid ""
#| "apiVersion: snapshot.storage.k8s.io/v1alpha1\n"
#| "kind: VolumeSnapshot\n"
#| "metadata:\n"
#| "  name: my-first-linstor-snapshot\n"
#| "spec:\n"
#| "  snapshotClassName: my-first-linstor-snapshot-class\n"
#| "  source:\n"
#| "    name: my-first-linstor-volume\n"
#| "    kind: PersistentVolumeClaim\n"
msgid ""
"apiVersion: snapshot.storage.k8s.io/v1\n"
"kind: VolumeSnapshotClass\n"
"metadata:\n"
"  name: my-first-linstor-snapshot-class\n"
"driver: linstor.csi.linbit.com\n"
"deletionPolicy: Delete\n"
msgstr ""
"apiVersion: snapshot.storage.k8s.io/v1alpha1\n"
"kind: VolumeSnapshot\n"
"metadata:\n"
"  name: my-first-linstor-snapshot\n"
"spec:\n"
"  snapshotClassName: my-first-linstor-snapshot-class\n"
"  source:\n"
"    name: my-first-linstor-volume\n"
"    kind: PersistentVolumeClaim\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1451
msgid "Create the _VolumeSnapshotClass_ with `kubectl`:"
msgstr "使用 `kubectl` 创建 _VolumeSnapshotClass_ ："

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1454
#, no-wrap
msgid "kubectl create -f my-first-linstor-snapshot-class.yaml\n"
msgstr "kubectl create -f my-first-linstor-snapshot-class.yaml\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1458
msgid ""
"Now we will create a volume snapshot for the volume that we created above. "
"This is done with a _VolumeSnapshot_:"
msgstr "现在，我们将为上面创建的卷创建卷快照。这是用 _VolumeSnapshot_ 完成的："

#. type: Block title
#: UG9/en/linstor-kubernetes.adoc:1459
#, no-wrap
msgid "my-first-linstor-snapshot.yaml"
msgstr "my-first-linstor-snapshot.yaml"

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1470
#, fuzzy, no-wrap
#| msgid ""
#| "apiVersion: snapshot.storage.k8s.io/v1alpha1\n"
#| "kind: VolumeSnapshot\n"
#| "metadata:\n"
#| "  name: my-first-linstor-snapshot\n"
#| "spec:\n"
#| "  snapshotClassName: my-first-linstor-snapshot-class\n"
#| "  source:\n"
#| "    name: my-first-linstor-volume\n"
#| "    kind: PersistentVolumeClaim\n"
msgid ""
"apiVersion: snapshot.storage.k8s.io/v1\n"
"kind: VolumeSnapshot\n"
"metadata:\n"
"  name: my-first-linstor-snapshot\n"
"spec:\n"
"  volumeSnapshotClassName: my-first-linstor-snapshot-class\n"
"  source:\n"
"    persistentVolumeClaimName: my-first-linstor-volume\n"
msgstr ""
"apiVersion: snapshot.storage.k8s.io/v1alpha1\n"
"kind: VolumeSnapshot\n"
"metadata:\n"
"  name: my-first-linstor-snapshot\n"
"spec:\n"
"  snapshotClassName: my-first-linstor-snapshot-class\n"
"  source:\n"
"    name: my-first-linstor-volume\n"
"    kind: PersistentVolumeClaim\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1473
msgid "Create the _VolumeSnapshot_ with `kubectl`:"
msgstr "使用 `kubectl` 创建 _VolumeSnapshot_ ："

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1476
#, no-wrap
msgid "kubectl create -f my-first-linstor-snapshot.yaml\n"
msgstr "kubectl create -f my-first-linstor-snapshot.yaml\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1479
msgid "You can check that the snapshot creation was successful"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1492
#, no-wrap
msgid ""
"kubectl describe volumesnapshots.snapshot.storage.k8s.io my-first-linstor-snapshot\n"
"...\n"
"Spec:\n"
"  Source:\n"
"    Persistent Volume Claim Name:  my-first-linstor-snapshot\n"
"  Volume Snapshot Class Name:      my-first-linstor-snapshot-class\n"
"Status:\n"
"  Bound Volume Snapshot Content Name:  snapcontent-b6072ab7-6ddf-482b-a4e3-693088136d2c\n"
"  Creation Time:                       2020-06-04T13:02:28Z\n"
"  Ready To Use:                        true\n"
"  Restore Size:                        500Mi\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1495
msgid "Finally, we'll create a new volume from the snapshot with a _PVC_."
msgstr "最后，我们将使用 _PVC_ 从快照创建一个新卷。"

#. type: Block title
#: UG9/en/linstor-kubernetes.adoc:1496
#, no-wrap
msgid "my-first-linstor-volume-from-snapshot.yaml"
msgstr "my-first-linstor-volume-from-snapshot.yaml"

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1514
#, no-wrap
msgid ""
"apiVersion: v1\n"
"kind: PersistentVolumeClaim\n"
"metadata:\n"
"  name: my-first-linstor-volume-from-snapshot\n"
"spec:\n"
"  storageClassName: linstor-basic-storage-class\n"
"  dataSource:\n"
"    name: my-first-linstor-snapshot\n"
"    kind: VolumeSnapshot\n"
"    apiGroup: snapshot.storage.k8s.io\n"
"  accessModes:\n"
"    - ReadWriteOnce\n"
"  resources:\n"
"    requests:\n"
"      storage: 500Mi\n"
msgstr ""
"apiVersion: v1\n"
"kind: PersistentVolumeClaim\n"
"metadata:\n"
"  name: my-first-linstor-volume-from-snapshot\n"
"spec:\n"
"  storageClassName: linstor-basic-storage-class\n"
"  dataSource:\n"
"    name: my-first-linstor-snapshot\n"
"    kind: VolumeSnapshot\n"
"    apiGroup: snapshot.storage.k8s.io\n"
"  accessModes:\n"
"    - ReadWriteOnce\n"
"  resources:\n"
"    requests:\n"
"      storage: 500Mi\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1517
msgid "Create the _PVC_ with `kubectl`:"
msgstr "用 `kubectl` 创建 _PVC_ ："

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1520
#, no-wrap
msgid "kubectl create -f my-first-linstor-volume-from-snapshot.yaml\n"
msgstr "kubectl create -f my-first-linstor-volume-from-snapshot.yaml\n"

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:1522
#, no-wrap
msgid "Storing Snapshots on S3 Storage"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1526
msgid ""
"LINSTOR can store snapshots on S3 compatible storage for disaster recovery. "
"This is integrated in Kubernetes using special a special VolumeSnapshotClass:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1529 UG9/en/linstor-kubernetes.adoc:1588
#, no-wrap
msgid "---\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1548
#, no-wrap
msgid ""
"kind: VolumeSnapshotClass\n"
"apiVersion: snapshot.storage.k8s.io/v1\n"
"metadata:\n"
"  name: linstor-csi-snapshot-class-s3\n"
"driver: linstor.csi.linbit.com\n"
"deletionPolicy: Retain\n"
"parameters:\n"
"  snap.linstor.csi.linbit.com/type: S3\n"
"  snap.linstor.csi.linbit.com/remote-name: backup-remote\n"
"  snap.linstor.csi.linbit.com/allow-incremental: \"false\"\n"
"  snap.linstor.csi.linbit.com/s3-bucket: snapshot-bucket\n"
"  snap.linstor.csi.linbit.com/s3-endpoint: s3.us-west-1.amazonaws.com\n"
"  snap.linstor.csi.linbit.com/s3-signing-region: us-west-1\n"
"  snap.linstor.csi.linbit.com/s3-use-path-style: \"false\"\n"
"  # Refer here to the secret that holds access and secret key for the S3 endpoint.\n"
"  # See below for an example.\n"
"  csi.storage.k8s.io/snapshotter-secret-name: linstor-csi-s3-access\n"
"  csi.storage.k8s.io/snapshotter-secret-namespace: storage\n"
"---\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1559
#, no-wrap
msgid ""
"kind: Secret\n"
"apiVersion: v1\n"
"metadata:\n"
"  name: linstor-csi-s3-access\n"
"  namespace: storage\n"
"immutable: true\n"
"type: linstor.csi.linbit.com/s3-credentials.v1\n"
"stringData:\n"
"  access-key: access-key\n"
"  secret-key: secret-key\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1564
msgid ""
"Check <<s-shipping_snapshots-linstor, the LINSTOR snapshot guide>> on the "
"exact meaning of the `snap.linstor.csi.linbit.com/` parameters. The "
"credentials used to log in are stored in a separate secret, as show in the "
"example above."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1567
msgid ""
"Referencing the above storage class when creating snapshots causes the "
"snapshots to be automatically uploaded to the configured S3 storage."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:1568
#, fuzzy, no-wrap
#| msgid "Restoring a snapshot"
msgid "Restoring from Pre-existing Snapshots"
msgstr "还原快照"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1572
msgid ""
"Restoring from pre-existing snapshots is an important step in disaster "
"recovery. A snapshot needs to be registered with Kubernetes before it can be "
"used to restore."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1574
msgid ""
"If the snapshot that should be restored is part of a backup to S3, the "
"LINSTOR \"remote\" needs to be configured first."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1579
#, no-wrap
msgid ""
"linstor remote create s3 backup-remote s3.us-west-1.amazonaws.com \\\n"
"  snapshot-bucket us-west-1 access-key secret-key\n"
"linstor backup list backup-remote\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1582
msgid ""
"The snapshot you want to register needs to be one of the listed snapshots."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1585
msgid ""
"To register the snapshot with Kubernetes, you need to create two resources, "
"one VolumeSnapshotContent referencing the ID of the snapshot and one "
"VolumeSnapshot, referencing the content."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1598
#, fuzzy, no-wrap
#| msgid ""
#| "apiVersion: snapshot.storage.k8s.io/v1alpha1\n"
#| "kind: VolumeSnapshot\n"
#| "metadata:\n"
#| "  name: my-first-linstor-snapshot\n"
#| "spec:\n"
#| "  snapshotClassName: my-first-linstor-snapshot-class\n"
#| "  source:\n"
#| "    name: my-first-linstor-volume\n"
#| "    kind: PersistentVolumeClaim\n"
msgid ""
"apiVersion: snapshot.storage.k8s.io/v1\n"
"kind: VolumeSnapshot\n"
"metadata:\n"
"  name: example-backup-from-s3\n"
"  namespace: project\n"
"spec:\n"
"  source:\n"
"    volumeSnapshotContentName: restored-snap-content-from-s3\n"
"  volumeSnapshotClassName: linstor-csi-snapshot-class-s3\n"
"---\n"
msgstr ""
"apiVersion: snapshot.storage.k8s.io/v1alpha1\n"
"kind: VolumeSnapshot\n"
"metadata:\n"
"  name: my-first-linstor-snapshot\n"
"spec:\n"
"  snapshotClassName: my-first-linstor-snapshot-class\n"
"  source:\n"
"    name: my-first-linstor-volume\n"
"    kind: PersistentVolumeClaim\n"

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1614
#, no-wrap
msgid ""
"apiVersion: snapshot.storage.k8s.io/v1\n"
"kind: VolumeSnapshotContent\n"
"metadata:\n"
"  name: restored-snap-content-from-s3\n"
"spec:\n"
"  deletionPolicy: Delete\n"
"  driver: linstor.csi.linbit.com\n"
"  source:\n"
"    snapshotHandle: snapshot-id\n"
"  volumeSnapshotClassName: linstor-csi-snapshot-class-s3\n"
"  volumeSnapshotRef:\n"
"    apiVersion: snapshot.storage.k8s.io/v1\n"
"    kind: VolumeSnapshot\n"
"    name: example-backup-from-s3\n"
"    namespace: project\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1618
msgid ""
"Once applied, the VolumeSnapshot should be shown as `ready`, at which point "
"you can reference it as a `dataSource` in a PVC."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-kubernetes.adoc:1620
#, fuzzy, no-wrap
#| msgid "Volume Accessibility"
msgid "Volume Accessibility and Locality"
msgstr "卷可访问性"

#.  This only covers DRBD volumes, section might change if linked docs are updated.
#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1626
msgid ""
"LINSTOR volumes are typically accessible both locally and <<s-drbd_clients,"
"over the network>>. The CSI driver will ensure that the volume is accessible "
"on whatever node was selected for the consumer. The driver also provides "
"options to ensure volume locality (the consumer is placed on the same node "
"as the backing data) and restrict accessibility (only a subset of nodes can "
"access the volume over the network)."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1631
msgid ""
"Volume locality is achieved by setting `volumeBindingMode: "
"WaitForFirstConsumer` in the storage class. This tell Kubernetes and the CSI "
"driver to wait until the first consumer (Pod) referencing the PVC is "
"scheduled. The CSI driver then provisions the volume with backing data on "
"the same node as the consumer. In case a node without appropriate storage "
"pool was selected, a replacement node in the set of accessible nodes is "
"chosen (see below)."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1636
msgid ""
"Volume accessibility is controlled by the <<s-kubernetes-params-allow-remote-"
"volume-access,`allowRemoteVolumeAccess` parameter>>. Whenever the CSI plug-"
"in needs to place a volume, this parameter is consulted to get the set of "
"\"accessible\" nodes. This means they can share volumes placed on them "
"through the network. This information is also propagated to Kubernetes using "
"label selectors on the PV."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-kubernetes.adoc:1637
#, fuzzy, no-wrap
#| msgid "Volume Accessibility"
msgid "Volume Accessibility and Locality Examples"
msgstr "卷可访问性"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1641
msgid ""
"The following example show common scenarios where you want to optimize "
"volume accessibility and locality. It also includes examples of how to "
"spread volume replicas across zones in a cluster."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:1642
#, no-wrap
msgid "Single-zone Homogeneous Clusters"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1646
msgid ""
"The cluster only spans a single zone, so latency between nodes is low. The "
"cluster is homogeneous, that is, all nodes are configured similarly. All "
"nodes have their own local storage pool."
msgstr ""

#. type: Block title
#: UG9/en/linstor-kubernetes.adoc:1647 UG9/en/linstor-kubernetes.adoc:1679
#: UG9/en/linstor-kubernetes.adoc:1713 UG9/en/linstor-kubernetes.adoc:1748
#, no-wrap
msgid "example-storage-class.yaml"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1660
#, no-wrap
msgid ""
"apiVersion: storage.k8s.io/v1\n"
"kind: StorageClass\n"
"metadata:\n"
"  name: linstor-storage\n"
"provisioner: linstor.csi.linbit.com\n"
"volumeBindingMode: WaitForFirstConsumer <1>\n"
"parameters:\n"
"  linstor.csi.linbit.com/storagePool: linstor-pool <2>\n"
"  linstor.csi.linbit.com/placementCount: \"2\" <3>\n"
"  linstor.csi.linbit.com/allowRemoteVolumeAccess: \"true\" <4>\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1664 UG9/en/linstor-kubernetes.adoc:1699
#: UG9/en/linstor-kubernetes.adoc:1733
msgid ""
"Enable late volume binding. This places one replica on the same node as the "
"first consuming pod, if possible."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1666 UG9/en/linstor-kubernetes.adoc:1701
#: UG9/en/linstor-kubernetes.adoc:1735 UG9/en/linstor-kubernetes.adoc:1763
#, fuzzy
#| msgid "To list your storage-pools you can use:"
msgid "Set the storage pool(s) to use."
msgstr "要列出您可以使用的存储池，请执行以下操作："

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1668 UG9/en/linstor-kubernetes.adoc:1703
#: UG9/en/linstor-kubernetes.adoc:1737
msgid ""
"Ensure that the data is replicated, so that at least 2 nodes store the data."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1671
msgid ""
"Allow using the volume even on nodes without replica. Since all nodes are "
"connected equally, performance impact should be manageable."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:1672
#, no-wrap
msgid "Multi-zonal Homogenous Clusters"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1678
msgid ""
"As before, in our homogenous cluster all nodes are configured similarly with "
"their own local storage pool. The cluster spans now multiple zones, with "
"increased latency across nodes in different zones. To ensure low latency, we "
"want to restrict access to the volume with a local replica to only those "
"zones that do have a replica. At the same time, we want to spread our data "
"across multiple zones."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1695
#, no-wrap
msgid ""
"apiVersion: storage.k8s.io/v1\n"
"kind: StorageClass\n"
"metadata:\n"
"  name: linstor-storage\n"
"provisioner: linstor.csi.linbit.com\n"
"volumeBindingMode: WaitForFirstConsumer <1>\n"
"parameters:\n"
"  linstor.csi.linbit.com/storagePool: linstor-pool <2>\n"
"  linstor.csi.linbit.com/placementCount: \"2\" <3>\n"
"  linstor.csi.linbit.com/allowRemoteVolumeAccess: | <4>\n"
"    - fromSame:\n"
"      - topology.kubernetes.io/zone\n"
"  linstor.csi.linbit.com/replicasOnDifferent: topology.kubernetes.io/zone <5>\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1706 UG9/en/linstor-kubernetes.adoc:1740
msgid ""
"Allow using the volume on nodes in the same zone as a replica, under the "
"assumption that zone internal networking is fast and low latency."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1708
msgid "Spread the replicas across different zones."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:1709
#, no-wrap
msgid "Multi-region Clusters"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1712
msgid ""
"Our cluster now spans multiple regions. We don't want to incur the latency "
"penalty to replicate our data across regions, we just want to replicate in "
"the same zone."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1729
#, no-wrap
msgid ""
"apiVersion: storage.k8s.io/v1\n"
"kind: StorageClass\n"
"metadata:\n"
"  name: linstor-storage\n"
"provisioner: linstor.csi.linbit.com\n"
"volumeBindingMode: WaitForFirstConsumer <1>\n"
"parameters:\n"
"  linstor.csi.linbit.com/storagePool: linstor-pool <2>\n"
"  linstor.csi.linbit.com/placementCount: \"2\" <3>\n"
"  linstor.csi.linbit.com/allowRemoteVolumeAccess: | <4>\n"
"    - fromSame:\n"
"      - topology.kubernetes.io/zone\n"
"  linstor.csi.linbit.com/replicasOnSame: topology.kubernetes.io/region <5>\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1742
msgid "Restrict replicas to only a single region."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-kubernetes.adoc:1743
#, no-wrap
msgid "Cluster with External Storage"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1747
msgid ""
"Our cluster now only consists of compute nodes without local storage. Any "
"volume access has to occur through remote volume access."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1760
#, no-wrap
msgid ""
"apiVersion: storage.k8s.io/v1\n"
"kind: StorageClass\n"
"metadata:\n"
"  name: linstor-storage\n"
"provisioner: linstor.csi.linbit.com\n"
"parameters:\n"
"  linstor.csi.linbit.com/storagePool: linstor-pool <1>\n"
"  linstor.csi.linbit.com/placementCount: \"1\" <2>\n"
"  linstor.csi.linbit.com/allowRemoteVolumeAccess: \"true\" <3>\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1766
msgid ""
"Assuming we only have one storage host, we can only place a single volume "
"without additional replicas."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1768
msgid ""
"Our worker nodes need to be allowed to connect to the external storage host."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-kubernetes.adoc:1770
#, no-wrap
msgid "LINSTOR Affinity Controller"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1774
msgid ""
"Volume Accessibility is controlled by the https://kubernetes.io/docs/"
"concepts/scheduling-eviction/assign-pod-node/#node-affinity[node affinity] "
"of the PersistentVolume (PV). This affinity is static, that is once defined "
"it cannot be changed."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1778
msgid ""
"This can be an issue if you would like to use a strict affinity: Your PV is "
"pinned to specific nodes, but you might want to remove or add nodes. While "
"LINSTOR can move the volume (for example: this happens automatically if you "
"remove a node in kubernetes), the PV affinity is not updated to reflect this."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1781
msgid ""
"This is where the LINSTOR Affinity Controller comes in: it watches PVs and "
"compares their affinity with the volumes' states in LINSTOR. If they go out "
"of sync, the PV is replaced with an updated version."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1784
msgid ""
"The LINSTOR Affinity Controller is packaged in a Helm chart. If you install "
"it in the same namespace as the Operator, simply run:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1788
#, fuzzy, no-wrap
#| msgid "# zypper install linstor-controller linstor-satellite  linstor-client\n"
msgid ""
"$ helm repo update\n"
"$ helm install linstor-affinity-controller linstor/linstor-affinity-controller\n"
msgstr "# zypper install linstor-controller linstor-satellite  linstor-client\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1791
msgid ""
"Additional options for the chart are available at the https://github.com/"
"piraeusdatastore/linstor-affinity-controller[upstream project]."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-kubernetes.adoc:1793
#, no-wrap
msgid "Volume Locality Optimization Using LINSTOR Scheduler"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1798
msgid ""
"We maintain an open source plug-in for the Kubernetes scheduler. The "
"scheduler will take the current placement of volumes into account and "
"optimize for data locality. If possible, the pod will be assigned to a node "
"that also hosts replicas of attached volumes, reducing latency for read "
"operations."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1801
msgid ""
"The scheduler is available as a separate chart https://artifacthub.io/"
"packages/helm/piraeus-charts/linstor-scheduler[from artifacthub.io].  The "
"chart will deploy a new scheduler, which you can later use when creating pod "
"resources:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1823
#, fuzzy, no-wrap
#| msgid ""
#| "apiVersion: v1\n"
#| "kind: Pod\n"
#| "metadata:\n"
#| "  name: fedora\n"
#| "  namespace: default\n"
#| "spec:\n"
#| "  containers:\n"
#| "  - name: fedora\n"
#| "    image: fedora\n"
#| "    command: [/bin/bash]\n"
#| "    args: [\"-c\", \"while true; do sleep 10; done\"]\n"
#| "    volumeMounts:\n"
#| "    - name: my-first-linstor-volume\n"
#| "      mountPath: /data\n"
#| "    ports:\n"
#| "    - containerPort: 80\n"
#| "  volumes:\n"
#| "  - name: my-first-linstor-volume\n"
#| "    persistentVolumeClaim:\n"
#| "      claimName: \"my-first-linstor-volume\"\n"
msgid ""
"apiVersion: v1\n"
"kind: Pod\n"
"metadata:\n"
"  name: busybox\n"
"spec:\n"
"  schedulerName: linstor-scheduler <1>\n"
"  containers:\n"
"  - name: busybox\n"
"    image: busybox\n"
"    command: [\"tail\", \"-f\", \"/dev/null\"]\n"
"    volumeMounts:\n"
"    - name: my-first-linstor-volume\n"
"      mountPath: /data\n"
"    ports:\n"
"    - containerPort: 80\n"
"  volumes:\n"
"  - name: my-first-linstor-volume\n"
"    persistentVolumeClaim:\n"
"      claimName: \"test-volume\"\n"
msgstr ""
"apiVersion: v1\n"
"kind: Pod\n"
"metadata:\n"
"  name: fedora\n"
"  namespace: default\n"
"spec:\n"
"  containers:\n"
"  - name: fedora\n"
"    image: fedora\n"
"    command: [/bin/bash]\n"
"    args: [\"-c\", \"while true; do sleep 10; done\"]\n"
"    volumeMounts:\n"
"    - name: my-first-linstor-volume\n"
"      mountPath: /data\n"
"    ports:\n"
"    - containerPort: 80\n"
"  volumes:\n"
"  - name: my-first-linstor-volume\n"
"    persistentVolumeClaim:\n"
"      claimName: \"my-first-linstor-volume\"\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1826
msgid "Add the name of the scheduler to your pod."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-kubernetes.adoc:1828
#, no-wrap
msgid "Fast Workload Failover Using the High Availability Controller"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1833
msgid ""
"When node failures occur, Kubernetes is very conservative in rescheduling "
"stateful workloads. This means it can take more than 15 minutes for Pods to "
"be moved from unreachable nodes. With the information available to DRBD and "
"LINSTOR, this process can be sped up significantly."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1836
msgid ""
"The LINSTOR High Availability Controller (HA Controller) speeds up the "
"failover process for stateful workloads using LINSTOR for storage. It "
"monitors and manages any Pod that is attached to at least one DRBD resource."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1839
msgid ""
"For the HA Controller to work properly, you need quorum, that is at least "
"three replicas (or two replicas + one diskless tiebreaker). If using lower "
"replica counts, attached Pods will be ignored and are not eligible for "
"faster failover."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1841
msgid ""
"The HA Controller is packaged as a Helm chart, and can be deployed using:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1845
#, fuzzy, no-wrap
#| msgid "# zypper install linstor-controller linstor-satellite  linstor-client\n"
msgid ""
"$ helm repo update\n"
"$ helm install linstor-ha-controller linstor/linstor-ha-controller\n"
msgstr "# zypper install linstor-controller linstor-satellite  linstor-client\n"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1849
msgid ""
"If you are using the HA Controller in your cluster you can set additional "
"parameters in all StorageClasses. These parameters ensure that the volume is "
"not accidentally remounted as read-only, leading to degraded Pods."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1857
#, no-wrap
msgid ""
"parameters:\n"
"  property.linstor.csi.linbit.com/DrbdOptions/auto-quorum: suspend-io\n"
"  property.linstor.csi.linbit.com/DrbdOptions/Resource/on-no-data-accessible: suspend-io\n"
"  property.linstor.csi.linbit.com/DrbdOptions/Resource/on-suspended-primary-outdated: force-secondary\n"
"  property.linstor.csi.linbit.com/DrbdOptions/Net/rr-conflict: retry-connect\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1860
msgid ""
"To exempt a Pod from management by the HA Controller, add the following "
"annotation to the Pod:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1863
#, no-wrap
msgid "$ kubectl annotate pod <podname> drbd.linbit.com/ignore-fail-over=\"\"\n"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-kubernetes.adoc:1866
#, fuzzy, no-wrap
#| msgid "Interacting with LINSTOR in Kubernetes"
msgid "Evacuating a Node in Kubernetes"
msgstr "在Kubernetes中与LINSTOR互动"

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1871
msgid ""
"If you want to evacuate a LINSTOR node of its resources, so that they are "
"placed onto other nodes within your cluster, the process is detailed in <<s-"
"linstor-node-evacuate>>. However, before evacuating a LINSTOR node in "
"Kubernetes, you need to take an additional action."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1873
msgid ""
"First move the node's workload to another node. You can do this by entering "
"the command:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1876
#, no-wrap
msgid "# kubectl drain --ignore-daemonsets <node_name>\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1880
msgid ""
"After verifying that your cluster is running all right, you can continue to "
"follow the steps in <<s-linstor-node-evacuate>>."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-kubernetes.adoc:1883
msgid ""
"If you are planning on evacuating more than one node, enter the following "
"command on all the nodes that you will be evacuating:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-kubernetes.adoc:1886
#, no-wrap
msgid "# linstor node set-property n1.k8s-mwa.at.linbit.com AutoplaceTarget false\n"
msgstr ""
