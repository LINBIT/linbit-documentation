# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: documentation@linbit.com\n"
"POT-Creation-Date: 2023-10-31 19:39+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: en\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Title ====
#: UG9/en/drbd-fundamentals.adoc:219 UG9/en/linstor-administration.adoc:32
#, no-wrap
msgid "FIPS Compliance"
msgstr ""

#. type: Plain text
#: UG9/en/drbd-fundamentals.adoc:222 UG9/en/linstor-administration.adoc:35
msgid ""
"\"This standard shall be used in designing and implementing cryptographic "
"modules...\""
msgstr ""

#. type: Plain text
#: UG9/en/drbd-fundamentals.adoc:223 UG9/en/linstor-administration.adoc:36
msgid ""
"https://csrc.nist.gov/publications/detail/fips/140/3/final[NIST's _FIPS "
"140-3_ publication]"
msgstr ""

#. type: delimited block -
#: UG9/en/drbd-install-packages.adoc:65 UG9/en/linstor-administration.adoc:96
#, no-wrap
msgid ""
"# curl -O https://my.linbit.com/linbit-manage-node.py\n"
"# chmod +x ./linbit-manage-node.py\n"
"# ./linbit-manage-node.py\n"
msgstr ""

#. type: Plain text
#: UG9/en/drbd-install-packages.adoc:115 UG9/en/linstor-administration.adoc:122
msgid ""
"Before it closes, the script will show a message that suggests different "
"packages that you can install for different use cases."
msgstr ""

#. type: delimited block -
#: UG9/en/drbd-install-packages.adoc:174 UG9/en/linstor-administration.adoc:149
#, no-wrap
msgid "# ./linbit-manage-node.py --hints\n"
msgstr ""

#. type: Plain text
#: UG9/en/drbd-install-packages.adoc:180 UG9/en/linstor-administration.adoc:126
msgid ""
"On DEB based systems you can install a precompiled DRBD kernel module "
"package, `drbd-module-$(uname -r)`, or a source version of the kernel "
"module, `drbd-dkms`. Install one or the other package but not both."
msgstr ""

#. type: Plain text
#: UG9/en/drbd-install-packages.adoc:221 UG9/en/linstor-administration.adoc:206
#: UG9/en/linstor-nomad.adoc:28
msgid ""
"LINBIT's container image repository (http://drbd.io) is only available to "
"LINBIT customers or through LINBIT customer trial accounts.  link:https://"
"linbit.com/contact-us/[Contact LINBIT for information on pricing or to begin "
"a trial]. Alternatively, you may use LINSTOR SDS' upstream project named "
"link:https://github.com/piraeusdatastore/piraeus-operator[Piraeus], without "
"being a LINBIT customer."
msgstr ""

#. type: delimited block -
#: UG9/en/drbd-install-packages.adoc:226 UG9/en/linstor-administration.adoc:212
#, no-wrap
msgid "# docker login drbd.io\n"
msgstr ""

#. type: Title ===
#: UG9/en/drbd-proxy.adoc:73 UG9/en/linstor-administration.adoc:2936
#, no-wrap
msgid "Configuring DRBD Proxy Using LINSTOR"
msgstr ""

#. type: Title ==
#: UG9/en/linstor-administration.adoc:2
#, no-wrap
msgid "Basic Administrative Tasks and System Setup"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:6
msgid ""
"This is a how-to style chapter that covers basic LINSTOR administrative "
"tasks, including installing LINSTOR and how to get started using LINSTOR."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:8
#, no-wrap
msgid "Before Installing LINSTOR"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:12
msgid ""
"Before you install LINSTOR, there are a few things that you should be aware "
"of that might affect how you install LINSTOR."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:14
#, no-wrap
msgid "Packages"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:17
msgid "LINSTOR is packaged in both the RPM and the DEB variants:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:21
msgid ""
"_linstor-client_ contains the command line client program. It depends on "
"Python which is usually already installed. In RHEL 8 systems you will need "
"to symlink `python`."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:24
msgid ""
"_linstor-controller_ and _linstor-satellite_ Both contain systemd unit files "
"for the services. They depend on Java runtime environment (JRE) version 1.8 "
"(headless) or higher."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:27
msgid ""
"For further details about these packages see the <<Installable Components,"
"Installable Components>> section above."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:30
msgid ""
"If you have a LINBIT(R) support subscription, you will have access to "
"certified binaries through LINBIT customer-only repositories."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:40
msgid ""
"You can configure LINSTOR to encrypt storage volumes, by using LUKS (`dm-"
"crypt`), as detailed in the <<s-linstor-encrypted-volumes, Encrypted "
"Volumes>> section of this user's guide. Refer to the LUKS and `dm-crypt` "
"projects for FIPS compliance status."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:44
msgid ""
"You can also configure LINSTOR to encrypt communication traffic between a "
"LINSTOR satellite and a LINSTOR controller, by using SSL/TLS, as detailed in "
"the <<s-linstor-secure-connections, Secure Satellite Connections>> section "
"of this user's guide."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:49
msgid ""
"LINSTOR can also interface with Self-Encrypting Drives (SEDs) and you can "
"use LINSTOR to initialize an SED drive. LINSTOR stores the drive's password "
"as a property that applies to the storage pool associated with the drive. "
"LINSTOR encrypts the SED drive password by using the <<s-encrypt_commands, "
"LINSTOR master passphrase>> that you must create first."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:51
msgid "By default, LINSTOR uses the following cryptographic algorithms:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:53
msgid "HMAC-SHA2-512"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:54
msgid "PBKDF2"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:55
msgid "AES-128"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:59
msgid ""
"A FIPS compliant version of LINSTOR is available for the use cases mentioned "
"in this section. If you or your organization require FIPS compliance at this "
"level, please contact sales@linbit.com for details."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:61
#, no-wrap
msgid "Installing LINSTOR"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:65
msgid ""
"If you want to use LINSTOR in containers, skip this section and use the <<s-"
"containers,Containers>> section below for the installation."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:66
#, no-wrap
msgid "Installing a Volume Manager"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:70
msgid ""
"To use LINSTOR to create storage volumes, you will need to install a volume "
"manager, either LVM or ZFS, if one is not already installed on your system."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:73
#, no-wrap
msgid "Using a Script to Manage LINBIT Cluster Nodes"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:77
msgid ""
"If you are a LINBIT customer, you can download a LINBIT created helper "
"script and run it on your nodes to:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:79
msgid "Register a cluster node with LINBIT."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:80
msgid "Join a node to an existing LINBIT cluster."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:81
msgid "Enable LINBIT package repositories on your node."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:85
msgid ""
"Enabling LINBIT package repositories will give you access to LINBIT software "
"packages, DRBD kernel modules, and other related software such as cluster "
"managers and OCF scripts. You can then use a package manager to fetch, "
"install, and manage updating installed packages."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:86
#, no-wrap
msgid "Downloading the LINBIT Manage Node Script"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:91
msgid ""
"To register your cluster nodes with LINBIT, and configure LINBIT's "
"repositories, first download and then run the manage node helper script by "
"entering the following commands on all cluster nodes:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:99
msgid "You must run the script as the `root` user."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:103
msgid ""
"The script will prompt you for your https://my.linbit.com/[LINBIT customer "
"portal] username and password. After entering your credentials, the script "
"will list cluster nodes associated with your account (none at first)."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:105
#, no-wrap
msgid "Enabling LINBIT Package Repositories"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:112
msgid ""
"After you specify which cluster to register the node with, have the script "
"write the registration data to a JSON file when prompted. Next, the script "
"will show you a list of LINBIT repositories that you can enable or disable. "
"You can find LINSTOR and other related packages in the `drbd-9` repository. "
"In most cases, unless you have a need to be on a different DRBD version "
"branch, you should enable at least this repository."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:114
#, no-wrap
msgid "Final Tasks Within Manage Nodes Script"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:119
msgid ""
"After you have finished making your repositories selection, you can write "
"the configuration to a file by following the script's prompting. Next, be "
"sure to answer yes to the question about installing LINBIT's public signing "
"key to your node's keyring."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:128
#, no-wrap
msgid "Using a Package Manager to Install LINSTOR"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:132
msgid ""
"After registering your node and enabling the `drbd-9` LINBIT package "
"repository, you can use a DEB, RPM, or YaST2 based package manager to "
"install LINSTOR and related components."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:135
msgid ""
"If you are using a DEB based package manager, refresh your package "
"repositories list by entering: `apt update`, before proceeding."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:137
#, no-wrap
msgid "Installing DRBD Packages for Replicated LINSTOR Storage"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:141
msgid ""
"If you will be <<linstor-administration.adoc#s-linstor-without-drbd,using "
"LINSTOR without DRBD>>, you can skip installing theses packages."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:146
msgid ""
"If you want to be able to use LINSTOR to create DRBD replicated storage, you "
"will need to install the required DRBD packages. Depending on the Linux "
"distribution that you are running on your node, install the DRBD-related "
"packages that the helper script suggested. If you need to review the "
"script's suggested packages and installation commands, you can enter:"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:152
#, no-wrap
msgid "Installing LINSTOR Packages"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:156
msgid ""
"To install LINSTOR on a controller node, use your package manager to install "
"the `linbit-sds-controller` package."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:159
msgid ""
"To install LINSTOR on a satellite node, use your package manager to install "
"the `linbit-sds-satellite` package."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:161
msgid ""
"Install both packages if your node will be both a satellite and controller "
"(_Combined_ role)."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:164
#, no-wrap
msgid "Installing LINSTOR from Source Code"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:167
msgid ""
"The LINSTOR project's GitHub page is here: https://github.com/LINBIT/linstor-"
"server."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:171
msgid ""
"LINBIT also has downloadable archived files of source code for LINSTOR, "
"DRBD, and more, available here: https://linbit.com/linbit-software-download-"
"page-for-linstor-and-drbd-linux-driver/."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:173
#, no-wrap
msgid "Upgrading LINSTOR"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:179
msgid ""
"LINSTOR doesn't support rolling upgrades. Controller and satellites must "
"have the same version, otherwise the controller will discard the satellite "
"with a `VERSION_MISMATCH`.  But this isn't a problem, as the satellite won't "
"do any actions as long it isn't connected to a controller and DRBD will not "
"be disrupted by any means."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:185
msgid ""
"If you are using the embedded default H2 database and the linstor-controller "
"package is upgraded an automatic backup file of the database will be created "
"in the default `/var/lib/linstor` directory.  This file is a good restore "
"point if for any reason a linstor-controller database migration should fail, "
"then it is recommended to report the error to LINBIT and restore the old "
"database file and roll back to your previous controller version."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:188
msgid ""
"If you use any external database or etcd, it is recommended to do a manual "
"backup of your current database to have a restore point."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:193
msgid ""
"First, upgrade the `linstor-controller` and `linstor-client` packages on "
"your controller host and then restart the `linstor-controller`.  The "
"controller should start and all of its clients should show "
"`OFFLINE(VERSION_MISMATCH)`.  After that you can continue upgrading the "
"`linstor-satellite` package on all satellite nodes and restart them, after a "
"short reconnection time they should all show `ONLINE` again and your upgrade "
"is finished."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:195
#, no-wrap
msgid "Containers"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:199
msgid ""
"LINSTOR and related software are also available as containers. The base "
"images are available in LINBIT's container registry, `drbd.io`."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:209
msgid ""
"To access the images, you first have to login to the registry using your "
"LINBIT Customer Portal credentials."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:215
msgid "The containers available in this repository are:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:217
msgid "drbd.io/drbd9-rhel8"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:218
msgid "drbd.io/drbd9-rhel7"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:219
msgid "drbd.io/drbd9-sles15sp1"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:220
msgid "drbd.io/drbd9-bionic"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:221
msgid "drbd.io/drbd9-focal"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:222
msgid "drbd.io/linstor-csi"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:223
msgid "drbd.io/linstor-controller"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:224
msgid "drbd.io/linstor-satellite"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:225
msgid "drbd.io/linstor-client"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:228
msgid ""
"An up-to-date list of available images with versions can be retrieved by "
"opening http://drbd.io in your browser. Be sure to browse the image "
"repository through HTTP, although the registry's images themselves are "
"pulled through HTTPS, using the associated `docker pull` command."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:236
msgid ""
"To load the kernel module, needed only for LINSTOR satellites, you'll need "
"to run a `drbd9-$dist` container in privileged mode. The kernel module "
"containers either retrieve an official LINBIT package from a customer "
"repository, use shipped packages, or they try to build the kernel modules "
"from source. If you intend to build from source, you need to have the "
"according kernel headers (e.g., `kernel-devel`) installed on the host. There "
"are four ways to execute such a module load container:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:238
msgid "Building from shipped source"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:239
msgid "Using a shipped/pre-built kernel module"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:240
msgid "Specifying a LINBIT node hash and a distribution."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:241
msgid "Bind-mounting an existing repository configuration."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:243
msgid "Example building from shipped source (RHEL based):"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:248
#, no-wrap
msgid ""
"# docker run -it --rm --privileged -v /lib/modules:/lib/modules \\\n"
"  -v /usr/src:/usr/src:ro \\\n"
"  drbd.io/drbd9-rhel7\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:251
msgid ""
"Example using a module shipped with the container, which is enabled by *not* "
"bind-mounting `/usr/src`:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:255
#, no-wrap
msgid ""
"# docker run -it --rm --privileged -v /lib/modules:/lib/modules \\\n"
"  drbd.io/drbd9-rhel8\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:258
msgid "Example using a hash and a distribution (rarely used):"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:263
#, no-wrap
msgid ""
"# docker run -it --rm --privileged -v /lib/modules:/lib/modules \\\n"
"  -e LB_DIST=rhel7.7 -e LB_HASH=ThisIsMyNodeHash \\\n"
"  drbd.io/drbd9-rhel7\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:266
msgid "Example using an existing repo configuration (rarely used):"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:271
#, no-wrap
msgid ""
"# docker run -it --rm --privileged -v /lib/modules:/lib/modules \\\n"
"  -v /etc/yum.repos.d/linbit.repo:/etc/yum.repos.d/linbit.repo:ro \\\n"
"  drbd.io/drbd9-rhel7\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:276
msgid ""
"In both cases (hash + distribution, as well as bind-mounting a repo)  the "
"hash or repo configuration has to be from a node that has a special property "
"set. Feel free to contact our support, and we will set this property."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:283
msgid ""
"For now (i.e., pre DRBD 9 version \"9.0.17\"), you must use the "
"containerized DRBD kernel module, as opposed to loading a kernel module onto "
"the host system. If you intend to use the containers you should not install "
"the DRBD kernel module on your host systems. For DRBD version 9.0.17 or "
"greater, you can install the kernel module as usual on the host system, but "
"you need to load the module with the `usermode_helper=disabled` parameter (e."
"g., `modprobe drbd usermode_helper=disabled`)."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:285
msgid "Then run the LINSTOR satellite container, also privileged, as a daemon:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:289
#, no-wrap
msgid ""
"# docker run -d --name=linstor-satellite --net=host -v /dev:/dev \\\n"
"  --privileged drbd.io/linstor-satellite\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:293
msgid ""
"`net=host` is required for the containerized `drbd-utils` to be able to "
"communicate with the host-kernel through Netlink."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:295
msgid ""
"To run the LINSTOR controller container as a daemon, mapping TCP port `3370` "
"on the host to the container, enter the following command:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:298
#, no-wrap
msgid "# docker run -d --name=linstor-controller -p 3370:3370 drbd.io/linstor-controller\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:303
msgid ""
"To interact with the containerized LINSTOR cluster, you can either use a "
"LINSTOR client installed on a system using repository packages, or using the "
"containerized LINSTOR client. To use the LINSTOR client container:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:307
#, no-wrap
msgid ""
"# docker run -it --rm -e LS_CONTROLLERS=<controller-host-IP-address> \\\n"
"  drbd.io/linstor-client node list\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:312
msgid ""
"From this point you would use the LINSTOR client to initialize your cluster "
"and begin creating resources using the typical LINSTOR patterns."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:314
msgid "To stop and remove a daemonized container and image:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:318
#, no-wrap
msgid ""
"# docker stop linstor-controller\n"
"# docker rm linstor-controller\n"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:321
#, no-wrap
msgid "Initializing Your Cluster"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:323
msgid ""
"We assume that the following steps are accomplished on *all* cluster nodes:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:325
msgid "The DRBD9 kernel module is installed and loaded."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:326
msgid "`drbd-utils` are installed."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:327
msgid "`LVM` tools are installed."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:328
msgid ""
"`linstor-controller` and/or `linstor-satellite` its dependencies are "
"installed."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:329
msgid "The `linstor-client` is installed on the `linstor-controller` node."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:331
msgid ""
"Enable and also start the `linstor-controller` service on the host where it "
"has been installed:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:334
#, no-wrap
msgid "# systemctl enable --now linstor-controller\n"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:337
#, no-wrap
msgid "Using the LINSTOR Client"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:342
msgid ""
"Whenever you run the LINSTOR command line client, it needs to know where "
"your linstor-controller runs. If you do not specify it, it will try to reach "
"a locally running linstor-controller listening on IP `127.0.0.1` port "
"`3370`. Therefore we will use the `linstor-client` on the same host as the "
"`linstor-controller`."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:345
msgid ""
"The `linstor-satellite` requires TCP ports 3366 and 3367. The `linstor-"
"controller` requires TCP port 3370. Verify that you have this port allowed "
"on your firewall."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:348
#, no-wrap
msgid "# linstor node list\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:351
msgid ""
"Output from this command should show you an empty list and not an error "
"message."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:356
msgid ""
"You can use the `linstor` command on any other machine, but then you need to "
"tell the client how to find the linstor-controller. As shown, this can be "
"specified as a command line option, an environment variable, or in a global "
"file:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:360
#, no-wrap
msgid ""
"# linstor --controllers=alice node list\n"
"# LS_CONTROLLERS=alice linstor node list\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:364
msgid ""
"Alternatively you can create the `/etc/linstor/linstor-client.conf` file and "
"populate it like below."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:369
#, no-wrap
msgid ""
"[global]\n"
"controllers=alice\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:374
msgid ""
"If you have multiple linstor-controllers configured you can simply specify "
"them all in a comma separated list. The linstor-client will simply try them "
"in the order listed."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:379
msgid ""
"The linstor-client commands can also be used in a much faster and convenient "
"way by only writing the starting letters of the parameters e.g.: `linstor "
"node list` -> `linstor n l`"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:381
#, no-wrap
msgid "Adding Nodes to Your Cluster"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:383
msgid "The next step is to add nodes to your LINSTOR cluster."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:386
#, no-wrap
msgid "# linstor node create bravo 10.43.70.3\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:390
msgid ""
"If the IP is omitted, the client will try to resolve the given node-name as "
"host-name by itself."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:393
msgid ""
"LINSTOR will automatically detect the node's local `uname -n` which is later "
"used for the DRBD-resource."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:397
msgid ""
"When you use `linstor node list` you will see that the new node is marked as "
"offline. Now start and enable the linstor-satellite on that node so that the "
"service comes up on reboot as well:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:400
#, no-wrap
msgid "# systemctl enable --now  linstor-satellite\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:405
msgid ""
"You can also use `systemctl start linstor-satellite` if you are sure that "
"the service is already enabled as default and comes up on reboot."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:409
msgid ""
"About 10 seconds later you will see the status in `linstor node list` "
"becoming online. Of course the satellite process may be started before the "
"controller knows about the existence of the satellite node."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:413
msgid ""
"In case the node which hosts your controller should also contribute storage "
"to the LINSTOR cluster, you have to add it as a node and start the linstor-"
"satellite as well."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:417
msgid ""
"If you want to have other services wait until the linstor-satellite had a "
"chance to create the necessary devices (that is, after a boot), you can "
"update the corresponding `.service` file and change `Type=simple` to "
"`Type=notify`."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:421
msgid ""
"This will cause the satellite to delay sending the `READY=1` message to "
"systemd until the controller connects, sends all required data to the "
"satellite and the satellite at least tried once to get the devices up and "
"running."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:423
#, no-wrap
msgid "Storage Pools"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:430
msgid ""
"<<StoragePool,StoragePools>> identify storage in the context of LINSTOR.  To "
"group storage pools from multiple nodes, simply use the same name on each "
"node.  For example, one valid approach is to give all SSDs one name and all "
"HDDs another."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:432
#, no-wrap
msgid "Creating Storage Pools"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:439
msgid ""
"On each host contributing storage, you need to create either an LVM volume "
"group (VG) or a ZFS zPool. The VGs and zPools identified with one LINSTOR "
"storage pool name may have different VG or zPool names on the hosts, but do "
"yourself a favor, for coherency, use the same VG or zPool name on all nodes."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:442
#, no-wrap
msgid "# vgcreate vg_ssd /dev/nvme0n1 /dev/nvme1n1 [...]\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:446
msgid ""
"After creating a volume group on each of your nodes, you can create a "
"storage pool that is backed by the volume group on each of your nodes, by "
"entering the following commands:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:450
#, no-wrap
msgid ""
"# linstor storage-pool create lvm alpha pool_ssd vg_ssd\n"
"# linstor storage-pool create lvm bravo pool_ssd vg_ssd\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:453
msgid "To list your storage pools you can enter:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:456
#, no-wrap
msgid "# linstor storage-pool list\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:459
msgid "or using LINSTOR abbreviated notation:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:462
#, no-wrap
msgid "# linstor sp l\n"
msgstr ""

#
#
#
#
#. In case anything goes wrong with the storage pool's VG/zPool, e.g. the VG having been renamed or somehow
#. became invalid you can delete the storage pool in LINSTOR with the following command, given that only
#. resources with all their volumes in the so-called 'lost' storage pool are attached. This feature is available
#. since LINSTOR v0.9.13.
#. ----
#. # linstor storage-pool lost alpha pool_ssd
#. ----
#. or using the short version
#. ----
#. # linstor sp lo alpha pool_ssd
#. ----
#. Should the deletion of the storage pool be prevented due to attached resources or snapshots with some of its
#. volumes in another still functional storage pool, hints will be given in the 'status' column of the
#. corresponding list-command (e.g. `linstor resource list`). After deleting the LINSTOR-objects in the lost storage pool
#. manually, the lost-command can be executed again to ensure a complete deletion of the storage pool and its
#. remaining objects.
#. type: Title ====
#: UG9/en/linstor-administration.adoc:488
#, no-wrap
msgid "Using Storage Pools To Confine Failure Domains to a Single Back-end Device"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:494
msgid ""
"In clusters where you have only one kind of storage and the capability to "
"hot swap storage devices, you may choose a model where you create one "
"storage pool per physical backing device. The advantage of this model is to "
"confine failure domains to a single storage device."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:496
#, no-wrap
msgid "Sharing Storage Pools with Multiple Nodes"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:504
msgid ""
"Both the Exos and LVM2 storage providers offer the option of multiple server "
"nodes directly connected to the storage array and drives. With LVM2 the "
"external locking service (lvmlockd) manages volume groups created with the --"
"shared options with vgcreate. The `--shared-space` can be used when "
"configuring a LINSTOR pool to use the same LVM2 volume group accessible by "
"two or more nodes. The example below shows using the LVM2 volume group UUID "
"as the shared space identifier for a pool accessible by nodes alpha and "
"bravo:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:512
#, no-wrap
msgid ""
"# linstor storage-pool create lvm --external-locking \\\n"
"  --shared-space O1btSy-UO1n-lOAo-4umW-ETZM-sxQD-qT4V87 \\\n"
"  alpha pool_ssd shared_vg_ssd\n"
"# linstor storage-pool create lvm --external-locking \\\n"
"  --shared-space O1btSy-UO1n-lOAo-4umW-ETZM-sxQD-qT4V87 \\\n"
"  bravo pool_ssd shared_vg_ssd\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:515
msgid ""
"Exos pools will use the Exos pool serial number by default for the shared-"
"space identifier."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:517
#, no-wrap
msgid "Creating Storage Pools by Using the Physical Storage Command"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:522
msgid ""
"Since linstor-server 1.5.2 and a recent linstor-client, LINSTOR can create "
"LVM/ZFS pools on a satellite for you.  The linstor-client has the following "
"commands to list possible disks and create storage pools, but such LVM/ZFS "
"pools are not managed by LINSTOR and there is no delete command, so such "
"action must be done manually on the nodes."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:525
#, no-wrap
msgid "# linstor physical-storage list\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:528
msgid ""
"Will give you a list of available disks grouped by size and rotational(SSD/"
"Magnetic Disk)."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:530
msgid "It will only show disks that pass the following filters:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:532
msgid "The device size must be greater than 1GiB."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:533
msgid ""
"The device is a root device (not having children), for example, `/dev/vda`, "
"`/dev/sda`."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:534
msgid ""
"The device does not have any file system or other `blkid` marker (`wipefs -"
"a` might be needed)."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:535
msgid "The device is not a DRBD device."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:539
msgid ""
"With the `create-device-pool` command you can create a LVM pool on a disk "
"and also directly add it as a storage pool in LINSTOR."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:543
#, no-wrap
msgid ""
"# linstor physical-storage create-device-pool --pool-name lv_my_pool \\\n"
"  LVMTHIN node_alpha /dev/vdc --storage-pool newpool\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:546
msgid ""
"If the `--storage-pool` option was provided, LINSTOR will create a storage "
"pool with the given name."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:548
msgid ""
"For more options and exact command usage please check the linstor-client "
"help."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:550
#, no-wrap
msgid "Using Resource Groups to Deploy LINSTOR Provisioned Volumes"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:557
msgid ""
"Using resource groups to define how you would like your resources "
"provisioned should be considered the de facto method for deploying volumes "
"provisioned by LINSTOR. Chapters that follow which describe creating each "
"_resource_ from a _resource-definition_ and _volume-definition_ should only "
"be used in special scenarios."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:562
msgid ""
"Even if you choose not to create and use _resource-groups_ in your LINSTOR "
"cluster, all resources created from _resource-definitions_ and _volume-"
"definitions_ will exist in the 'DfltRscGrp' _resource-group_."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:565
msgid ""
"A simple pattern for deploying resources using resource groups would look "
"like this:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:570
#, no-wrap
msgid ""
"# linstor resource-group create my_ssd_group --storage-pool pool_ssd --place-count 2\n"
"# linstor volume-group create my_ssd_group\n"
"# linstor resource-group spawn-resources my_ssd_group my_ssd_res 20G\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:575
msgid ""
"The commands above would result in a resource named 'my_ssd_res' with a 20GB "
"volume replicated twice being automatically provisioned from nodes who "
"participate in the storage pool named 'pool_ssd'."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:582
msgid ""
"A more useful pattern could be to create a resource group with settings "
"you've determined are optimal for your use case. Perhaps you have to run "
"nightly online verifications of your volumes' consistency, in that case, you "
"could create a resource group with the 'verify-alg' of your choice already "
"set so that resources spawned from the group are pre-configured with 'verify-"
"alg' set:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:590
#, no-wrap
msgid ""
"# linstor resource-group create my_verify_group --storage-pool pool_ssd --place-count 2\n"
"# linstor resource-group drbd-options --verify-alg crc32c my_verify_group\n"
"# linstor volume-group create my_verify_group\n"
"# for i in {00..19}; do\n"
"    linstor resource-group spawn-resources my_verify_group res$i 10G\n"
"  done\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:594
msgid ""
"The commands above result in twenty 10GiB resources being created each with "
"the 'crc32c' 'verify-alg' pre-configured."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:601
msgid ""
"You can tune the settings of individual resources or volumes spawned from "
"resource groups by setting options on the respective _resource-definition_ "
"or _volume-definition_. For example, if 'res11' from the example above is "
"used by a very active database receiving many small random writes, you might "
"want to increase the 'al-extents' for that specific resource:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:604
#, no-wrap
msgid "# linstor resource-definition drbd-options --al-extents 6007 res11\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:613
msgid ""
"If you configure a setting in a _resource-definition_ that is already "
"configured on the _resource-group_ it was spawned from, the value set in the "
"_resource-definition_ will override the value set on the parent _resource-"
"group_. For example, if the same 'res11' was required to use the slower but "
"more secure 'sha256' hash algorithm in its verifications, setting the "
"'verify-alg' on the _resource-definition_ for 'res11' would override the "
"value set on the _resource-group_:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:616
#, no-wrap
msgid "# linstor resource-definition drbd-options --verify-alg sha256 res11\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:623
msgid ""
"A guiding rule for the hierarchy in which settings are inherited is that the "
"value \"closer\" to the resource or volume wins: _volume-definition_ "
"settings take precedence over _volume-group_ settings, and _resource-"
"definition_ settings take precedence over _resource-group_ settings."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:625
#, no-wrap
msgid "Configuring a Cluster"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:628
#, no-wrap
msgid "indexterm:[linstor, storage plug-ins]Available Storage Plug-ins"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:631
msgid ""
"LINSTOR has the following supported storage plug-ins at the time of writing:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:633
msgid "Thick LVM"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:635
msgid "Thin LVM with a single thin pool"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:637
msgid "Thick ZFS"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:639
msgid "Thin ZFS"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:641
#, no-wrap
msgid "Creating and Deploying Resources and Volumes"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:645
msgid ""
"You can use the LINSTOR `create` command to create various LINSTOR objects, "
"such as resource definitions, volume definitions, and resources. Some of "
"these commands are shown below."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:648
msgid ""
"In the following example scenario, assume that you have a goal of creating a "
"resource named 'backups' with a size of '500GiB' that is replicated among "
"three cluster nodes."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:650
msgid "First, create a new resource definition:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:653
#, no-wrap
msgid "# linstor resource-definition create backups\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:656
msgid "Second, create a new volume definition within that resource definition:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:659
#, no-wrap
msgid "# linstor volume-definition create backups 500G\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:663
msgid ""
"If you want to resize (grow or shrink) the volume definition you can do that "
"by specifying a new size with the `set-size` command:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:666
#, no-wrap
msgid "# linstor volume-definition set-size backups 0 100G\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:671
msgid ""
"The size of a volume definition can only be decreased if it has no "
"associated resource.  However, you can freely increase the size of a volume "
"definition, even one having a deployed resource."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:676
msgid ""
"The parameter `0` is the number of the volume in the resource `backups`. You "
"have to provide this parameter because resources can have multiple volumes "
"that are identified by a so-called volume number. You can find this number "
"by listing the volume definitions (`linstor vd l`). The list table will show "
"volume numbers for the listed resources."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:680
msgid ""
"So far you have only created definition objects in LINSTOR's database. "
"However, not a single logical volume (LV) has been created on the satellite "
"nodes. Now you have the choice of delegating the task of deploying resources "
"to LINSTOR or else doing it yourself."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:682
#, no-wrap
msgid "Manually Placing Resources"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:686
msgid ""
"With the `resource create` command you may assign a resource definition to "
"named nodes explicitly."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:691
#, no-wrap
msgid ""
"# linstor resource create alpha backups --storage-pool pool_hdd\n"
"# linstor resource create bravo backups --storage-pool pool_hdd\n"
"# linstor resource create charlie backups --storage-pool pool_hdd\n"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:694
#, no-wrap
msgid "Automatically Placing Resources"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:700
msgid ""
"It is possible to have LINSTOR select nodes and storage pools to deploy a "
"resource to, by using the `linstor resource create --auto-place` or `linstor "
"resource-definition auto-place` commmands. This section will use the "
"`resource create --auto-place` command in examples.  However, you can use "
"either command to produce the same results."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:707
msgid ""
"LINSTOR's `resource-group create` command does not have an `--auto-place` "
"option, because the command does not deploy resources; it only creates a "
"template from which you can later deploy (spawn) resources. However, you can "
"use the arguments described in this section that accompany the `--auto-"
"place` option with the `resource-group create` command. When used this way, "
"when you spawn a resource from a resource group, LINSTOR will deploy the "
"resource as if you had used the `resource create --auto-place` command."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:711
msgid ""
"If the nodes (or storage pools) in your cluster cannot fulfill the "
"constraints of your `--auto-place` command arguments, then LINSTOR will "
"reject your command with an error message."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:714
msgid ""
"In the following example, the value after the `--auto-place` option tells "
"LINSTOR how many replicas you want to have. The `--storage-pool` option "
"should be obvious."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:717
#, no-wrap
msgid "# linstor resource create backups --auto-place 3 --storage-pool pool_hdd\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:721
msgid ""
"Maybe not so obvious is that you may omit the `--storage-pool` option, then "
"LINSTOR may select a storage pool on its own. The selection follows these "
"rules:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:723
msgid "Ignore all nodes and storage pools the current user has no access to"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:724
msgid "Ignore all diskless storage pools"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:725
msgid "Ignore all storage pools not having enough free space"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:728
msgid ""
"The remaining storage pools will be rated by different strategies.  LINSTOR "
"has currently three strategies:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:733
msgid ""
"`MaxFreeSpace`: This strategy maps the rating 1:1 to the remaining free "
"space of the storage pool. However, this strategy only considers the "
"actually allocated space (in case of thin-provisioned storage pool this "
"might grow with time without creating new resources)"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:737
msgid ""
"`MinReservedSpace`: Unlike the \"MaxFreeSpace\", this strategy considers the "
"reserved space. That is the space that a thin volume can grow to before "
"reaching its limit. The sum of reserved spaces might exceed the storage "
"pool's capacity, which is as overprovisioning."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:739
msgid ""
"`MinRscCount`: Simply the count of resources already deployed in a given "
"storage pool"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:744
msgid ""
"`MaxThroughput`: For this strategy, the storage pool's `Autoplacer/"
"MaxThroughput` property is the base of the score, or 0 if the property is "
"not present. Every Volume deployed in the given storage pool will subtract "
"its defined `sys/fs/blkio_throttle_read` and `sys/fs/blkio_throttle_write` "
"property- value from the storage pool's max throughput. The resulting score "
"might be negative."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:748
msgid ""
"The scores of the strategies will be normalized, weighted and summed up, "
"where the scores of minimizing strategies will be converted first to allow "
"an overall maximization of the resulting score."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:750
msgid ""
"The weights of the strategies can be configured with the following command:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:753
#, no-wrap
msgid "linstor controller set-property Autoplacer/Weights/$name_of_the_strategy $weight\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:756
msgid ""
"The strategy names are listed above and the weight can be an arbitrary "
"decimal."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:759
msgid ""
"To keep the behavior of the Autoplacer compatible with previous LINSTOR "
"versions, all strategies have a default-weight of 0, except the "
"`MaxFreeSpace` which has a weight of 1."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:762
msgid ""
"Neither 0 nor a negative score will prevent a storage pool from getting "
"selected. A storage pool with these scores will just be considered later."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:767
msgid ""
"Finally, LINSTOR tries to find the best matching group of storage pools "
"meeting all requirements. This step also considers other auto-placement "
"restrictions such as `--replicas-on-same`, `--replicas-on-different`, `--do-"
"not-place-with`, `--do-not-place-with-regex`, `--layer-list`, and `--"
"providers`."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:768
#, no-wrap
msgid "Avoiding Colocating Resources When Automatically Placing a Resource"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:773
msgid ""
"The `--do-not-place-with <resource_name_to_avoid>` argument specifies that "
"LINSTOR should try to avoid deploying the resource on nodes that already "
"have the specified, `resource_name_to_avoid` resource deployed."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:778
msgid ""
"By using the `--do-not-place-with-regex <regular_expression>` argument, you "
"can specify that LINSTOR should try to avoid placing the resource on nodes "
"that already have a resource deployed whose name matches the regular "
"expression that you provide with the argument. In this way, you can specify "
"multiple resources to try to avoid placing your resource with."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:779
#, no-wrap
msgid "Constraining Automatic Resource Placement by Using Auxiliary Node Properties"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:783
msgid ""
"You can constrain automatic resource placement to place (or avoid placing) a "
"resource with nodes having a specified auxiliary node property."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:790
msgid ""
"This ability can be particularly useful if you are trying to constrain "
"resource placement within Kubernetes environments that use LINSTOR managed "
"storage. For example, you might set an auxiliary node property that "
"corresponds to a Kubernetes label. See the <<linstor-kubernetes.adoc#s-"
"kubernetes-replicasonsame,\"replicasOnSame\" section>> within the \"LINSTOR "
"Volumes in Kubernetes\" _LINSTOR User's Guide_ chapter for more details "
"about this use case."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:793
msgid ""
"The arguments, `--replicas-on-same` and `--replicas-on-different` expect the "
"name of a property within the `Aux/` namespace."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:799
msgid ""
"The following example shows setting an auxiliary node property, "
"`testProperty`, on three LINSTOR satellite nodes. Next, you create a "
"resource group, `testRscGrp`, with a place count of two and a constraint to "
"place spawned resources on nodes that have a `testProperty` value of `1`. "
"After creating a volume group, you can spawn a resource from the resource "
"group. For simplicity, output from the following commands is not shown."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:806
#, no-wrap
msgid ""
"# for i in {0,2}; do linstor node set-property --aux node-$i testProperty 1; done\n"
"# linstor node set-property --aux node-1 testProperty 0\n"
"# linstor resource-group create testRscGrp --place-count 2 --replicas-on-same testProperty=1\n"
"# linstor volume-group create testRscGrp\n"
"# linstor resource-group spawn-resources testRscGrp testResource 100M\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:809
msgid ""
"You can verify the placement of the spawned resource by using the following "
"command:"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:818
#, no-wrap
msgid ""
"# linstor resource list\n"
"+-------------------------------------------------------------------------------------+\n"
"| ResourceName      | Node   | Port | Usage  | Conns |    State | CreatedOn           |\n"
"| testResource      | node-0 | 7000 | Unused | Ok    | UpToDate | 2022-07-27 16:14:16 |\n"
"| testResource      | node-2 | 7000 | Unused | Ok    | UpToDate | 2022-07-27 16:14:16 |\n"
"+-------------------------------------------------------------------------------------+\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:826
#, no-wrap
msgid ""
"Because of the `--replicas-on-same` constraint, LINSTOR did not place the spawned resource on\n"
"satellite node `node-1`, because the value of its auxiliary node property, `testProperty` was\n"
"`0` and not `1`.\n"
"\n"
"You can verify the node properties of `node-1`, by using the `list-properties` command:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:830
#, no-wrap
msgid ""
"# linstor node list-properties node-1\n"
"+----------------------------+\n"
"| Key              | Value   |\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:835
#, no-wrap
msgid ""
"| Aux/testProperty | 0       |\n"
"| CurStltConnName  | default |\n"
"| NodeUname        | node-1  |\n"
"+----------------------------+\n"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:837
#, no-wrap
msgid "Using Auto-place to Extend Existing Resource Deployments"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:844
msgid ""
"Besides specifying a positive integer for the `--auto-place` value for the "
"number of replicas of your resource to place, you can also specify a value "
"of `+1`, should you want to extend existing resource deployments. By using "
"this value, LINSTOR will create an additional replica, no matter what the `--"
"place-count` is configured for on the corresponding resource group that the "
"resource was created from."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:850
msgid ""
"For example, you can use the `+1` auto-place value to deploy an additional "
"replica of the `testResource` resource used in the previous example. You "
"will first need to set the auxiliary node property, `testProperty` to `1` on "
"`node-1`. Otherwise, LINSTOR will not be able to deploy the replica because "
"of the previously configured `--replicas-on-same` constraint. For "
"simplicity, not all output from the commands below is shown."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:857
#, no-wrap
msgid ""
"# linstor node set-property --aux node-1 testProperty 1\n"
"# linstor resource create --auto-place +1 testResource\n"
"# linstor resource list\n"
"+----+\n"
"| ResourceName      | Node   | Port | Usage  | Conns |    State | CreatedOn           |\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:862
#, no-wrap
msgid ""
"| testResource      | node-0 | 7000 | Unused | Ok    | UpToDate | 2022-07-27 16:14:16 |\n"
"| testResource      | node-1 | 7000 | Unused | Ok    | UpToDate | 2022-07-28 19:27:30 |\n"
"| testResource      | node-2 | 7000 | Unused | Ok    | UpToDate | 2022-07-27 16:14:16 |\n"
"+-------------------------------------------------------------------------------------+\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:867
#, no-wrap
msgid ""
"WARNING: The `+1` value is not valid for the `resource-group create --place-count` command. This\n"
"is because the command does not deploy resources, it only creates templates from which to deploy\n"
"them later.\n"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:868
#, no-wrap
msgid "Constraining Automatic Resource Placement by LINSTOR Layers or Storage Pool Providers"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:877
msgid ""
"You can specify the `--layer-list` or `--providers` arguments, followed by a "
"comma-separated values (CSV) list of LINSTOR layers or storage pool "
"providers, to influence where LINSTOR places your resource. The possible "
"layers and storage pool providers that you can specify in your CSV list can "
"be shown by using the `--help` option with the `--auto-place` option. A CSV "
"list of layers would constrain automatic resource placement for your "
"specified resource to nodes that have storage that conformed with your list. "
"For example, given an existing resource definition named `my_luks_resource`, "
"consider the following command:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:880
msgid ""
"# linstor resource create my_luks_resource --auto-place 3 --layer-list drbd,"
"luks"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:886
#, no-wrap
msgid ""
"This command would create a resource deployed across three nodes having storage pools backed by\n"
"a DRBD layer backed by a LUKS layer (and implicitly backed by a \"storage\" layer). The order of\n"
"layers that you specify in your CSV list is \"top-down\", where a layer on the left in the list is\n"
"above a layer on its right.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:893
#, no-wrap
msgid ""
"The `--providers` argument can be used to constrain automatic resource placement to only storage\n"
"pools that match those in a specified CSV list. You can use this argument to have explicit\n"
"control over which storage pools will back your deployed resource. If for example, you had a\n"
"mixed environment of `ZFS`, `LVM`, and `LVM_THIN` storage pools in your cluster, by using the\n"
"`--providers LVM,LVM_THIN` argument, you can specify that a resource only gets backed by either\n"
"an `LVM` or `LVM_THIN` storage pool, when using the `--auto-place` option.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:898
#, no-wrap
msgid ""
"NOTE: The `--providers` argument's CSV list does not specify an order of priority for the list\n"
"elements. Instead, LINSTOR will use factors like additional `--auto-place` constraints,\n"
"available free space, and LINSTOR's storage pool selection strategies that were previously\n"
"described, when placing a resource.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:900
#, no-wrap
msgid "[[s-linstor-deleting-resource-tasks]]\n"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:900
#, no-wrap
msgid "Deleting Resources, Resource Definitions, and Resource Groups"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:906
msgid ""
"You can delete LINSTOR resources, resource definitions, and resource groups "
"by using the `delete` command after the LINSTOR object that you want to "
"delete. Depending on which object you delete, there will be different "
"implications for your LINSTOR cluster and other associated LINSTOR objects."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:908
msgid "[[s-linstor-deleting-resource-definitions]]"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:908
#, no-wrap
msgid "Deleting a Resource Definition"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:911
msgid "You can delete a resource definition by using the command:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:914
msgid "# linstor resource-definition delete <resource_definition_name>"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:920
#, no-wrap
msgid ""
"This will remove the named resource definition from the entire LINSTOR cluster. The resource is\n"
"removed from all nodes and the resource entry is marked for removal from LINSTOR's database\n"
"tables. After LINSTOR has removed the resource from all the nodes, the resource entry is\n"
"removed from LINSTOR's database tables.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:924
#, no-wrap
msgid ""
"WARNING: If your resource definition has existing snapshots, you will not be able to delete the\n"
"resource definition until you delete its snapshots. See the\n"
"<<#s-removing_a_snapshot-linstor,_Removing a Snapshot_>> section in this guide.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:926
#, no-wrap
msgid "[[s-linstor-deleting-resources]]\n"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:926
#, no-wrap
msgid "Deleting a Resource"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:929
msgid "You can delete a resource using the command:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:932
msgid "# linstor resource delete <node_name> <resource_name>"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:938
#, no-wrap
msgid ""
"Unlike deleting a resource definition, this command will only delete a LINSTOR resource from the\n"
"node (or nodes) that you specify. The resource is removed from the node and the resource entry\n"
"is marked for removal from LINSTOR's database tables. After LINSTOR has removed the resource\n"
"from the node, the resource entry is removed from LINSTOR's database tables.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:945
#, no-wrap
msgid ""
"Deleting a LINSTOR resource may have implications for a cluster, beyond just removing the\n"
"resource. For example, if the resource is backed by a DRBD layer, removing a resource from one\n"
"node in a three node cluster could also remove certain quorum related DRBD options, if any\n"
"existed for the resource. After removing such a resource from a node in a three node cluster,\n"
"the resource would no longer have quorum as it would now only be deployed on two nodes in the\n"
"three node cluster.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:948
#, no-wrap
msgid ""
"After running a `linstor resource delete` command to remove a resource from a single node, you\n"
"might see informational messages such as:\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:954
#, no-wrap
msgid ""
"INFO:\n"
"    Resource-definition property 'DrbdOptions/Resource/quorum' was removed as there are not enough resources for quorum\n"
"INFO:\n"
"    Resource-definition property 'DrbdOptions/Resource/on-no-quorum' was removed as there are not enough resources for quorum\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:959
#, no-wrap
msgid ""
"Also unlike deleting a resource definition, you can delete a resource while there are existing\n"
"snapshots of the resource's storage pool. Any existing snapshots for the resource's storage pool\n"
"will persist.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:961
#, no-wrap
msgid "[[s-linstor-deleting-resource-groups]]\n"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:961
#, no-wrap
msgid "Deleting a Resource Group"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:964
msgid "You can delete a resource group by using the command:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:967
msgid "# linstor resource-group delete <resource_group_name>"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:972
#, no-wrap
msgid ""
"As you might expect, this command deletes the named resource group. You can only delete a\n"
"resource group if it has no associated resource definitions, otherwise LINSTOR will present an\n"
"error message, such as:\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:977
#, no-wrap
msgid ""
"ERROR:\n"
"Description:\n"
"    Cannot delete resource group 'my_rg' because it has existing resource definitions.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:982
#, no-wrap
msgid ""
"To resolve this error so that you can delete the resource group, you can either delete the\n"
"associated resource definitions, or your can move the resource definitions to another (existing)\n"
"resource group:\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:986
msgid ""
"# linstor resource-definition modify <resource_definition_name> \\ --"
"resource-group <another_resource_group_name>"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:990
#, no-wrap
msgid ""
"You can find which resource definitions are associated with your resource group by entering\n"
"the following command:\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:993
msgid "# linstor resource-definition list"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:997
#, no-wrap
msgid "[[s-export-import-db]]\n"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:997
#, no-wrap
msgid "Backup and Restore Database"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1000
msgid ""
"Since version 1.24.0, LINSTOR has a tool that you can use to export and "
"import a LINSTOR database."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1004
msgid ""
"This tool has an executable file called `/usr/share/linstor-server/bin/"
"linstor-database`. This executable has two subcommands, `export-db` and "
"`import-db`. Both subcommands accept an optional `--config-directory` "
"argument that you can use to specify the directory containing the `linstor."
"toml` configuration file."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1007
msgid ""
"IMPORTANT: To ensure a consistent database backup, take the controller "
"offline by stopping the controller service as shown in the commands below, "
"before creating a backup of the LINSTOR database."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1009
msgid "[[s-export-db]]"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:1009
#, no-wrap
msgid "Backing Up the Database"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1013
msgid ""
"To backup the LINSTOR database to a new file named `db_export` in your home "
"directory, enter the following commands:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1018
msgid ""
"# systemctl stop linstor-controller # /usr/share/linstor-server/bin/linstor-"
"database export-db ~/db_export # systemctl start linstor-controller"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1023
#, no-wrap
msgid ""
"NOTE: You can use the `--config-directory` argument with the `linstor-database` utility to specify a\n"
"LINSTOR configuration directory if needed. If you omit this argument, the utility uses the\n"
"`/etc/linstor` directory by default.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1025
#, no-wrap
msgid "After backing up the database, you can copy the backup file to a safe place.\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1028
msgid "# cp ~/db_export <somewhere safe>"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1032
#, no-wrap
msgid ""
"The resulting database backup is a plain JSON document, containing not just the actual data,\n"
"but also some metadata about when the backup was created, from which database, and other information.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1034
#, no-wrap
msgid "[[s-import-db]]\n"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:1034
#, no-wrap
msgid "Restoring the Database From a Backup"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1038
msgid ""
"Restoring the database from a previously made backup is similar to `export-"
"db` from the <<s-export-db,previous section>>."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1041
msgid ""
"For example, to restore the previously made backup from the `db_export` "
"file, enter the following commands:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1046
msgid ""
"# systemctl stop linstor-controller # /usr/share/linstor-server/bin/linstor-"
"database import-db ~/db_export # systemctl start linstor-controller"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1055
#, no-wrap
msgid ""
"You can only import a database from a previous backup if the currently installed\n"
"version of LINSTOR is the same (or higher) version as the version that you created the backup from.\n"
"If the currently installed LINSTOR version is higher than the version that the database backup\n"
"was created from, when you import the backup the data will be restored with the same database\n"
"scheme of the version used during the export. Then, the next time that the controller starts, the\n"
"controller will detect that the database has an old scheme and it will automatically migrate the\n"
"data to the scheme of the current version.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1057
#, no-wrap
msgid "[[s-convert-db]]\n"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:1057
#, no-wrap
msgid "Converting Databases"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1061
msgid ""
"Since the exported database file contains some metadata, an exported "
"database file can be imported into a different database type than it was "
"exported from."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1070
msgid ""
"This allows the user to convert, for example, from an etcd setup to an SQL "
"based setup.  There is no special command for converting the database "
"format. You only have to specify the correct `linstor.toml` configuration "
"file by using the `--config-directory` argument (or updating the default `/"
"etc/linstor/linstor.toml` and specifying the database type that you want to "
"use before importing). See the <<#s-linstor-external-database,LINSTOR User's "
"Guide>> for more information about specifying a database type. Regardless of "
"the type of database that the backup was created from, it will be imported "
"in the database type that is specified in the `linstor.toml` configuration "
"file."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1072
msgid "[[s-more-about-linstor]]"
msgstr ""

#. type: Title ==
#: UG9/en/linstor-administration.adoc:1072
#, no-wrap
msgid "Further LINSTOR Tasks"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1075
msgid "[[s-linstor_ha]]"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:1075
#, no-wrap
msgid "Creating a Highly Available LINSTOR Cluster"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1082
msgid ""
"By default a LINSTOR cluster consists of exactly one active LINSTOR "
"controller node. Making LINSTOR highly available involves providing "
"replicated storage for the controller database, multiple LINSTOR controller "
"nodes where only one is active at a time, and a service manager (here DRBD "
"Reactor) that takes care of mounting and unmounting the highly available "
"storage as well as starting and stopping the LINSTOR controller service on "
"nodes."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:1083
#, no-wrap
msgid "Configuring Highly Available Storage"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1088
msgid ""
"For configuring the highly available (HA) storage, you can use LINSTOR "
"itself. One of the benefits of having the storage under LINSTOR control is "
"that you can easily extend the HA storage to new cluster nodes."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1092
msgid ""
"First, create a new resource that is 200MiB in size and set the necessary "
"DRBD options, as shown in the example commands below. You will need to adapt "
"the storage pool name to match an existing storage pool in your environment."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1103
msgid ""
"# linstor resource-definition create linstor_db # linstor rd drbd-options --"
"auto-promote=no linstor_db # linstor rd drbd-options --quorum=majority "
"linstor_db # linstor rd drbd-options --on-suspended-primary-outdated=force-"
"secondary linstor_db # linstor rd drbd-options --on-no-quorum=io-error "
"linstor_db # linstor rd drbd-options --on-no-data-accessible=io-error "
"linstor_db # linstor rd drbd-options --rr-conflict=retry-connect linstor_db "
"# linstor volume-definition create linstor_db 200M # linstor resource create "
"linstor_db --storage-pool pool1 --auto-place 3"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1107
#, no-wrap
msgid ""
"It is crucial that your cluster qualifies for auto-quorum and uses the `io-error` policy (see\n"
"Section <<s-linstor-auto-quorum>>), and that `auto-promote` is disabled.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1112
#, no-wrap
msgid ""
"From now on it is assumed that the resource's name is `linstor_db`. After creating the\n"
"`linstor_db` resource, you can move the LINSTOR database to the new storage and create a\n"
"systemd mount service. First, stop the current controller service and disable it, as it will\n"
"be managed by DRBD Reactor later.\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1115
msgid "# systemctl disable --now linstor-controller"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1118
#, no-wrap
msgid "Next, create the systemd mount service.\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1121
msgid "# cat << EOF > /etc/systemd/system/var-lib-linstor.mount"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1123
msgid "Description=Filesystem for the LINSTOR controller"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1129
msgid ""
"# you can use the minor like /dev/drbdX or the udev symlink What=/dev/drbd/"
"by-res/linstor_db/0 Where=/var/lib/linstor EOF"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1138
msgid ""
"# mv /var/lib/linstor{,.orig} # mkdir /var/lib/linstor # chattr +i /var/lib/"
"linstor # only if on LINSTOR >= 1.14.0 # drbdadm primary linstor_db # mkfs."
"ext4 /dev/drbd/by-res/linstor_db/0 # systemctl start var-lib-linstor.mount # "
"cp -r /var/lib/linstor.orig/* /var/lib/linstor # systemctl start linstor-"
"controller"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1143
#, no-wrap
msgid ""
"Copy the `/etc/systemd/system/var-lib-linstor.mount` mount file to all the cluster nodes that\n"
"you want to have the potential to run the LINSTOR controller service (standby controller nodes).\n"
"Again, do not `systemctl enable` any of these services because DRBD Reactor will manage them.\n"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:1144
#, no-wrap
msgid "Installing Multiple LINSTOR Controllers"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1154
msgid ""
"The next step is to install LINSTOR controllers on all nodes that have "
"access to the `linstor_db` DRBD resource (as they need to mount the DRBD "
"volume) and which you want to become a possible LINSTOR controller. It is "
"important that the controllers are manged by `drbd-reactor`, so verify that "
"the `linstor-controller.service` is disabled on all nodes! To be sure, "
"execute `systemctl disable linstor-controller` on all cluster nodes and "
"`systemctl stop linstor-controller` on all nodes except the one it is "
"currently running from the previous step. Also verify that you have set "
"`chattr +i /var/lib/linstor` on all potential controller nodes if you use "
"LINSTOR version equal or greater to 1.14.0."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:1155
#, no-wrap
msgid "Managing the Services"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1160
msgid ""
"For starting and stopping the mount service and the linstor-controller "
"service we use `drbd-reactor`. Install this component on all nodes that "
"could become a LINSTOR controller and edit their `/etc/drbd-reactor.d/"
"linstor_db.toml` configuration file. It should contain an enabled promoter "
"plug-in section like this:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1164
msgid "id = \"linstor_db\""
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1166
msgid "start = [\"var-lib-linstor.mount\", \"linstor-controller.service\"]"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1169
#, no-wrap
msgid "Depending on your requirements you might also want to set an `on-stop-failure` action and set `stop-services-on-exit`.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1171
#, no-wrap
msgid "After that restart `drbd-reactor` and enable it on all the nodes you configured it.\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1175
msgid "# systemctl restart drbd-reactor # systemctl enable drbd-reactor"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1180
#, no-wrap
msgid ""
"Check that there are no warnings from `drbd-reactor` service in the logs by running `systemctl status drbd-reactor`.\n"
"As there is already an active LINSTOR controller things will just stay the way they are.\n"
"Run `drbd-reactorctl status linstor_db` to check the health of the linstor_db target unit.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1185
#, no-wrap
msgid ""
"The last but nevertheless important step is to configure the LINSTOR\n"
"satellite services to not delete (and then regenerate) the resource file for the\n"
"LINSTOR controller DB at its startup. Do not edit the service files directly, but use `systemctl edit`. Edit\n"
"the service file on all nodes that could become a LINSTOR controller and that are also LINSTOR satellites.\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1188
msgid "# systemctl edit linstor-satellite"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1190
msgid "Environment=LS_KEEP_RES=linstor_db"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1193
#, no-wrap
msgid "After this change you should execute `systemctl restart linstor-satellite` on all satellite nodes.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1198
#, no-wrap
msgid ""
"CAUTION: Be sure to configure your LINSTOR client for use with multiple controllers as described in\n"
"the section titled, <<s-using_the_linstor_client>> and verify that you also\n"
"configured your integration plug-ins (for example, the Proxmox plug-in) to be ready for\n"
"multiple LINSTOR controllers.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1200
#, no-wrap
msgid "[[s-drbd_clients]]\n"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:1200
#, no-wrap
msgid "DRBD Clients"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1208
msgid ""
"By using the `--drbd-diskless` option instead of `--storage-pool` you can "
"have a permanently diskless DRBD device on a node. This means that the "
"resource will appear as block device and can be mounted to the filesystem "
"without an existing storage-device. The data of the resource is accessed "
"over the network on another node with the same resource."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1211
msgid "# linstor resource create delta backups --drbd-diskless"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1215
#, no-wrap
msgid ""
"NOTE: The option `--diskless` was deprecated. Please use `--drbd-diskless`\n"
"or `--nvme-initiator` instead.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1217
#, no-wrap
msgid "[[s-linstor-drbd-consistency-group-multiple-volumes]]\n"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:1217
#, no-wrap
msgid "DRBD Consistency Groups (Multiple Volumes within a Resource)"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1222
msgid ""
"The so called consistency group is a feature from DRBD. It is mentioned in "
"this user's guide, due to the fact that one of LINSTOR's main functions is "
"to manage storage-clusters with DRBD. Multiple volumes in one resource are a "
"consistency group."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1225
msgid ""
"This means that changes on different volumes from one resource are getting "
"replicated in the same chronological order on the other Satellites."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1228
msgid ""
"Therefore you don't have to worry about the timing if you have "
"interdependent data on different volumes in a resource."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1230
msgid ""
"To deploy more than one volume in a LINSTOR-resource you have to create two "
"volume-definitions with the same name."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1234
msgid ""
"# linstor volume-definition create backups 500G # linstor volume-definition "
"create backups 100G"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1237
#, no-wrap
msgid "[[s-volumes_of_one_resource_to_different_storage_pools]]\n"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:1237
#, no-wrap
msgid "Placing Volumes of One Resource in Different Storage Pools"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1241
msgid ""
"This can be achieved by setting the `StorPoolName` property to the volume "
"definitions before the resource is deployed to the nodes:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1251
msgid ""
"# linstor resource-definition create backups # linstor volume-definition "
"create backups 500G # linstor volume-definition create backups 100G # "
"linstor volume-definition set-property backups 0 StorPoolName pool_hdd # "
"linstor volume-definition set-property backups 1 StorPoolName pool_ssd # "
"linstor resource create alpha backups # linstor resource create bravo "
"backups # linstor resource create charlie backups"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1256
#, no-wrap
msgid ""
"NOTE: Since the `volume-definition create` command is used without the `--vlmnr` option\n"
"LINSTOR assigned the volume numbers starting at 0. In the following two\n"
"lines the 0 and 1 refer to these automatically assigned volume numbers.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1261
#, no-wrap
msgid ""
"Here the 'resource create' commands do not need a `--storage-pool` option.\n"
"In this case LINSTOR uses a 'fallback' storage pool. Finding that\n"
"storage pool, LINSTOR queries the properties of the following objects\n"
"in the following order:\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1266
#, no-wrap
msgid ""
"  * Volume definition\n"
"  * Resource\n"
"  * Resource definition\n"
"  * Node\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1269
#, no-wrap
msgid ""
"If none of those objects contain a `StorPoolName` property, the controller\n"
"falls back to a hard-coded 'DfltStorPool' string as a storage pool.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1273
#, no-wrap
msgid ""
"This also means that if you forgot to define a storage pool prior deploying a\n"
"resource, you will get an error message that LINSTOR could not find the\n"
"storage pool named 'DfltStorPool'.\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1275
#, no-wrap
msgid "[[s-linstor-without-drbd]]\n"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:1275
#, no-wrap
msgid "Using LINSTOR Without DRBD"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1280
msgid ""
"LINSTOR can be used without DRBD as well. Without DRBD, LINSTOR is able to "
"provision volumes from LVM and ZFS backed storage pools, and create those "
"volumes on individual nodes in your LINSTOR cluster."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1284
msgid ""
"Currently LINSTOR supports the creation of LVM and ZFS volumes with the "
"option of layering some combinations of LUKS, DRBD, or NVMe-oF/NVMe-TCP on "
"top of those volumes."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1287
msgid ""
"For example, assume we have a Thin LVM backed storage pool defined in our "
"LINSTOR cluster named, `thin-lvm`:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1298
#, no-wrap
msgid ""
"# linstor --no-utf8 storage-pool list\n"
"+--------------------------------------------------------------+\n"
"| StoragePool | Node      | Driver   | PoolName          | ... |\n"
"|--------------------------------------------------------------|\n"
"| thin-lvm    | linstor-a | LVM_THIN | drbdpool/thinpool | ... |\n"
"| thin-lvm    | linstor-b | LVM_THIN | drbdpool/thinpool | ... |\n"
"| thin-lvm    | linstor-c | LVM_THIN | drbdpool/thinpool | ... |\n"
"| thin-lvm    | linstor-d | LVM_THIN | drbdpool/thinpool | ... |\n"
"+--------------------------------------------------------------+\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1302
#, no-wrap
msgid ""
"We could use LINSTOR to create a Thin LVM on `linstor-d` that's 100GiB\n"
"in size using the following commands:\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1308
#, no-wrap
msgid ""
"# linstor resource-definition create rsc-1\n"
"# linstor volume-definition create rsc-1 100GiB\n"
"# linstor resource create --layer-list storage \\\n"
"          --storage-pool thin-lvm linstor-d rsc-1\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1313
#, no-wrap
msgid ""
"You should then see you have a new Thin LVM on `linstor-d`. You can\n"
"extract the device path from LINSTOR by listing your linstor resources\n"
"with the `--machine-readable` flag set:\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1317
#, no-wrap
msgid ""
"# linstor --machine-readable resource list | grep device_path\n"
"            \"device_path\": \"/dev/drbdpool/rsc-1_00000\",\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1322
#, no-wrap
msgid ""
"If you wanted to layer DRBD on top of this volume, which is the default\n"
"`--layer-list` option in LINSTOR for ZFS or LVM backed volumes, you\n"
"would use the following resource creation pattern instead:\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1328
#, no-wrap
msgid ""
"# linstor resource-definition create rsc-1\n"
"# linstor volume-definition create rsc-1 100GiB\n"
"# linstor resource create --layer-list drbd,storage \\\n"
"          --storage-pool thin-lvm linstor-d rsc-1\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1332
#, no-wrap
msgid ""
"You would then see that you have a new Thin LVM backing a DRBD volume\n"
"on `linstor-d`:\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1337
#, no-wrap
msgid ""
"# linstor --machine-readable resource list | grep -e device_path -e backing_disk\n"
"            \"device_path\": \"/dev/drbd1000\",\n"
"            \"backing_disk\": \"/dev/drbdpool/rsc-1_00000\",\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1340
#, no-wrap
msgid "The following table shows which layer can be followed by which child-layer:\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:1351
#, no-wrap
msgid ""
"[cols=\">1,<5\"]\n"
"| Layer | Child layer\n"
"\n"
"| DRBD | CACHE, WRITECACHE, NVME, LUKS, STORAGE\n"
"| CACHE | WRITECACHE, NVME, LUKS, STORAGE\n"
"| WRITECACHE | CACHE, NVME, LUKS, STORAGE\n"
"| NVME | CACHE, WRITECACHE, LUKS, STORAGE\n"
"| LUKS | STORAGE\n"
"| STORAGE | -\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1354
msgid "One layer can only occur once in the layer-list"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1357
msgid ""
"For information about the prerequisites for the `LUKS` layer, refer to the "
"Encrypted Volumes section of this User's Guide."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:1359
#, no-wrap
msgid "NVMe-oF/NVMe-TCP LINSTOR Layer"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1368
msgid ""
"NVMe-oF/NVMe-TCP allows LINSTOR to connect diskless resources to a node with "
"the same resource where the data is stored over NVMe fabrics. This leads to "
"the advantage that resources can be mounted without using local storage by "
"accessing the data over the network.  LINSTOR is not using DRBD in this "
"case, and therefore NVMe resources provisioned by LINSTOR are not "
"replicated, the data is stored on one node."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1372
msgid ""
"NVMe-oF only works on RDMA-capable networks and NVMe-TCP on networks that "
"can carry IP traffic. You can use tools such as `lshw` or `ethtool` to "
"verify the capabilities of your network adapters."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1377
msgid ""
"To use NVMe-oF/NVMe-TCP with LINSTOR the package `nvme-cli` needs to be "
"installed on every node which acts as a satellite and will use NVMe-oF/NVMe-"
"TCP for a resource. For example, on a DEB-based system, to install the "
"package, enter the following command:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1380
#, no-wrap
msgid "# apt install nvme-cli\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1385
msgid ""
"If you are not on a DEB-based system, use the suitable command for "
"installing packages on your operating system, for example, on SLES: "
"`zypper`; on RPM-based systems: `dnf`."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1388
msgid ""
"To make a resource which uses NVMe-oF/NVMe-TCP an additional parameter has "
"to be given as you create the resource-definition:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1391
#, no-wrap
msgid "# linstor resource-definition create nvmedata -l nvme,storage\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1397
msgid ""
"As default the -l (layer-stack) parameter is set to `drbd, storage` when "
"DRBD is used. If you want to create LINSTOR resources with neither NVMe nor "
"DRBD you have to set the `-l` parameter to only `storage`."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1400
msgid ""
"To use NVMe-TCP rather than the default NVMe-oF, the following property "
"needs to be set:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1403
#, no-wrap
msgid "# linstor resource-definition set-property nvmedata NVMe/TRType tcp\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1407
msgid ""
"The property `NVMe/TRType` can alternatively be set on resource-group or "
"controller level."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1409
msgid "Next, create the volume-definition for our resource:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1412
#, no-wrap
msgid "# linstor volume-definition create nvmedata 500G\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1417
msgid ""
"Before you create the resource on your nodes you have to know where the data "
"will be stored locally and which node accesses it over the network."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1419
msgid "First we create the resource on the node where our data will be stored:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1422
#, no-wrap
msgid "# linstor resource create alpha nvmedata --storage-pool pool_ssd\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1426
msgid ""
"On the nodes where the resource-data will be accessed over the network, the "
"resource has to be defined as diskless:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1429
#, no-wrap
msgid "# linstor resource create beta nvmedata --nvme-initiator\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1432
msgid "Now you can mount the resource `nvmedata` on one of your nodes."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1436
msgid ""
"If your nodes have more than one NIC you should force the route between them "
"for NVMe-of/NVME-TCP, otherwise multiple NICs could cause troubles."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:1438
#, no-wrap
msgid "OpenFlex(TM) Layer"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1446
msgid ""
"Since version 1.5.0 the additional Layer `openflex` can be used in LINSTOR.  "
"From LINSTOR's perspective, the https://www.westerndigital.com/products/"
"storage-platforms/openflex-composable-infrastructure[OpenFlex Composable "
"Infrastructure] takes the role of a combined layer acting as a storage layer "
"(like LVM) and also providing the allocated space as an NVMe target.  "
"OpenFlex has a REST API which is also used by LINSTOR to operate with."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1450
msgid ""
"As OpenFlex combines concepts of LINSTOR's storage as well as NVMe-layer, "
"LINSTOR was added both, a new storage driver for the storage pools as well "
"as a dedicated `openflex` layer which uses the mentioned REST API."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1453
msgid ""
"In order for LINSTOR to communicate with the OpenFlex-API, LINSTOR needs "
"some additional properties, which can be set once on `controller` level to "
"take LINSTOR-cluster wide effect:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1455
msgid ""
"`StorDriver/Openflex/ApiHost` specifies the host or IP of the API entry-point"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1458
msgid ""
"`StorDriver/Openflex/ApiPort` this property is glued with a colon to the "
"previous to form the basic `http://ip:port` part used by the REST calls "
"`StorDriver/Openflex/UserName` the REST username"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1459
msgid "`StorDriver/Openflex/UserPassword` the password for the REST user"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1465
msgid ""
"Once that is configured, we can now create LINSTOR objects to represent the "
"OpenFlex architecture.  The theoretical mapping of LINSTOR objects to "
"OpenFlex objects are as follows: Obviously an OpenFlex storage pool is "
"represented by a LINSTOR storage pool. As the next thing above a LINSTOR "
"storage pool is already the node, a LINSTOR node represents an OpenFlex "
"storage device.  The OpenFlex objects above storage device are not mapped by "
"LINSTOR."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1474
msgid ""
"When using NVMe, LINSTOR was designed to run on both sides, the NVMe target "
"as well as on the NVMe initiator side. In the case of OpenFlex, LINSTOR "
"cannot (or even should not) run on the NVMe target side as that is "
"completely managed by OpenFlex. As LINSTOR still needs nodes and storage "
"pools to represent the OpenFlex counterparts, the LINSTOR client was "
"extended with special node create commands since 1.0.14. These commands not "
"only accept additionally needed configuration data, but also starts a "
"\"special satellite\" besides the already running controller instance. These "
"special satellites are completely LINSTOR managed. They will shut down when "
"the controller shuts down and will be started again when the controller "
"starts."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1476
msgid ""
"The new client command for creating a \"special satellite\" representing an "
"OpenFlex storage device is:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1479
#, no-wrap
msgid "$ linstor node create-openflex-target ofNode1 192.168.166.7 000af795789d\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1482
msgid "The arguments are as follows:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1484
msgid ""
"`ofNode1` is the node name which is also used by the standard `linstor node "
"create` command"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1488
msgid ""
"`192.168.166.7` is the address on which the provided NVMe devices can be "
"accessed. As the NVMe devices are accessed by a dedicated network interface, "
"this address differs from the address specified with the property "
"`StorDriver/Openflex/ApiHost`. The latter is used for the management / REST "
"API."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1489
msgid "`000af795789d` is the identifier for the OpenFlex storage device."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1491
msgid ""
"The last step of the configuration is the creation of LINSTOR storage pools:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1494
#, no-wrap
msgid "$ linstor storage-pool create openflex ofNode1 sp0 0\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1498
msgid ""
"`ofNode1` and `sp0` are the node name and storage pool name, respectively, "
"just as usual for the LINSTOR's `create storage pool` command"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1501
msgid ""
"The last `0` is the identifier of the OpenFlex storage pool within the "
"previously defined storage device"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1504
msgid ""
"Once all necessary storage pools are created in LINSTOR, the next steps are "
"similar to the usage of using an NVMe resource with LINSTOR. Here is a "
"complete example:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1511
#, no-wrap
msgid ""
"# set the properties once\n"
"linstor controller set-property StorDriver/Openflex/ApiHost 10.43.7.185\n"
"linstor controller set-property StorDriver/Openflex/ApiPort 80\n"
"linstor controller set-property StorDriver/Openflex/UserName myusername\n"
"linstor controller set-property StorDriver/Openflex/UserPassword mypassword\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1514
#, no-wrap
msgid ""
"# create a node for openflex storage device \"000af795789d\"\n"
"linstor node create-openflex-target ofNode1 192.168.166.7 000af795789d\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1517
#, no-wrap
msgid ""
"# create a usual linstor satellite. later used as nvme initiator\n"
"linstor node create bravo\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1520
#, no-wrap
msgid ""
"# create a storage pool for openflex storage pool \"0\" within storage device \"000af795789d\"\n"
"linstor storage-pool create openflex ofNode1 sp0 0\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1524
#, no-wrap
msgid ""
"# create resource- and volume-definition\n"
"linstor resource-definition create backupRsc\n"
"linstor volume-definition create backupRsc 10G\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1527
#, no-wrap
msgid ""
"# create openflex-based nvme target\n"
"linstor resource create ofNode1 backupRsc --storage-pool sp0 --layer-list openflex\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1530
#, no-wrap
msgid ""
"# create openflex-based nvme initiator\n"
"linstor resource create bravo backupRsc --nvme-initiator --layer-list openflex\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1537
#, no-wrap
msgid ""
"In case a node should access the OpenFlex REST API through a different host than specified with\n"
"`linstor controller set-property StorDriver/Openflex/ApiHost 10.43.7.185` you can always use LINSTOR's inheritance mechanism for properties. That means simply define the same property on the node-level you need it, i.e.\n"
"`linstor node set-property ofNode1 StorDriver/Openflex/ApiHost 10.43.8.185`"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:1539
#, no-wrap
msgid "Writecache Layer"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1545
msgid ""
"A https://www.kernel.org/doc/html/latest/admin-guide/device-mapper/"
"writecache.html[DM-Writecache] device is composed of two devices: one "
"storage device and one cache device.  LINSTOR can setup such a writecache "
"device, but needs some additional information, like the storage pool and the "
"size of the cache device."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1549
#: UG9/en/linstor-administration.adoc:1588
#, no-wrap
msgid ""
"# linstor storage-pool create lvm node1 lvmpool drbdpool\n"
"# linstor storage-pool create lvm node1 pmempool pmempool\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1552
#: UG9/en/linstor-administration.adoc:1591
#, no-wrap
msgid ""
"# linstor resource-definition create r1\n"
"# linstor volume-definition create r1 100G\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1555
#, no-wrap
msgid ""
"# linstor volume-definition set-property r1 0 Writecache/PoolName pmempool\n"
"# linstor volume-definition set-property r1 0 Writecache/Size 1%\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1557
#, no-wrap
msgid "# linstor resource create node1 r1 --storage-pool lvmpool --layer-list WRITECACHE,STORAGE\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1564
msgid ""
"The two properties set in the examples are mandatory, but can also be set on "
"controller level which would act as a default for all resources with "
"`WRITECACHE` in their `--layer-list`. However, please note that the "
"`Writecache/PoolName` refers to the corresponding node. If the node does not "
"have a storage pool named `pmempool` you will get an error message."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1571
msgid ""
"The 4 mandatory parameters required by https://www.kernel.org/doc/html/"
"latest/admin-guide/device-mapper/writecache.html[DM-Writecache] are either "
"configured through a property or figured out by LINSTOR.  The optional "
"properties listed in the mentioned link can also be set through a property.  "
"Please see `linstor controller set-property --help` for a list of "
"`Writecache/*` property-keys."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1575
msgid ""
"Using `--layer-list DRBD,WRITECACHE,STORAGE` while having DRBD configured to "
"use external metadata, only the backing device will use a writecache, not "
"the device holding the external metadata."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:1577
#, no-wrap
msgid "Cache Layer"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1584
msgid ""
"LINSTOR can also setup a https://www.kernel.org/doc/html/latest/admin-guide/"
"device-mapper/cache.html[DM-Cache] device, which is very similar to the DM-"
"Writecache from the previous section. The major difference is that a cache "
"device is composed by three devices: one storage device, one cache device "
"and one meta device. The LINSTOR properties are quite similar to those of "
"the writecache but are located in the `Cache` namespace:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1594
#, no-wrap
msgid ""
"# linstor volume-definition set-property r1 0 Cache/CachePool pmempool\n"
"# linstor volume-definition set-property r1 0 Cache/Cachesize 1%\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1596
#, no-wrap
msgid "# linstor resource create node1 r1 --storage-pool lvmpool --layer-list CACHE,STORAGE\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1602
msgid ""
"Rather than `Writecache/PoolName` (as when configuring the Writecache layer) "
"the Cache layer's only required property is called `Cache/CachePool`. The "
"reason for this is that the Cache layer also has a `Cache/MetaPool` which "
"can be configured separately or it defaults to the value of `Cache/"
"CachePool`."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1605
msgid ""
"Please see `linstor controller set-property --help` for a list of `Cache/*` "
"property-keys and default values for omitted properties."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1609
msgid ""
"Using `--layer-list DRBD,CACHE,STORAGE` while having DRBD configured to use "
"external metadata, only the backing device will use a cache, not the device "
"holding the external metadata."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:1611
#, no-wrap
msgid "Storage Layer"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1616
msgid ""
"The storage layer will provide new devices from well known volume managers "
"like LVM, ZFS or others. Every layer combination needs to be based on a "
"storage layer, even if the resource should be diskless - for that type there "
"is a dedicated `diskless` provider type."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1618
msgid ""
"For a list of providers with their properties please see <<s-storage-"
"proviers, Storage Providers>>."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1620
msgid "For some storage providers LINSTOR has special properties:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1624
msgid ""
"`StorDriver/WaitTimeoutAfterCreate`: If LINSTOR expects a device to appear "
"after creation (for example after calls of `lvcreate`, `zfs create`,...), "
"LINSTOR waits per default 500ms for the device to appear. These 500ms can be "
"overridden by this property."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1627
msgid ""
"`StorDriver/dm_stats`: If set to `true` LINSTOR calls `dmstats create "
"$device` after creation and `dmstats delete $device --allregions` after "
"deletion of a volume.  Currently only enabled for LVM and LVM_THIN storage "
"providers."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:1629
#, no-wrap
msgid "Storage Providers"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1633
msgid ""
"LINSTOR has a few storage providers. The most used ones are LVM and ZFS. But "
"also for those two providers there are already sub-types for their thin-"
"provisioned variants."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1637
msgid ""
"Diskless: This provider type is mostly required to have a storage pool that "
"can be configured with LINSTOR properties like `PrefNic` as described in <<s-"
"managing_network_interface_cards, Managing Network Interface Cards>>."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1641
msgid ""
"LVM / LVM-Thin: The adminstrator is expected to specify the LVM volume group "
"or the thin-pool (in form of \"LV/thinpool\") to use the corresponding "
"storage type. These drivers support following properties for fine-tuning:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1644
msgid ""
"`StorDriver/LvcreateOptions`: The value of this property is appended to "
"every `lvcreate ...` call LINSTOR executes."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1646
msgid ""
"ZFS / ZFS-Thin: The administrator is expected to specify the ZPool that "
"LINSTOR should use."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1647
msgid "These drivers support following properties for fine-tuning:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1650
msgid ""
"`StorDriver/ZfscreateOptions`: The value of this property is appended to "
"every `zfs create ...` call LINSTOR executes."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1654
msgid ""
"File / FileThin: Mostly used for demonstration / experiments. LINSTOR will "
"basically reserve a file in a given directory and will configure a https://"
"man7.org/linux/man-pages/man4/loop.4.html[loop device] on top of that file."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1657
msgid ""
"OpenFlex: This special storage provider currently requires to be run on a "
"\"special satellite\".  Please see <<s-openflex, OpenFlex(TM) Layer>> for "
"more details."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1660
msgid ""
"EXOS: This special storage provider is currently required to be run on a "
"\"special satellite\".  Please see the <<ch-exos, EXOS Integration>> chapter."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1663
msgid ""
"SPDK: The administrator is expected to speicify the logical volume store "
"which LINSTOR should use. The usage of this storage provider implies the "
"usage of the <<s-nvme-layer,NVME Layer>>."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1666
msgid ""
"Remote-SPDK: This special storage provider currently requires to be run on a "
"\"special satellite\".  Please see <<s-remote-spdk, Remote SPDK Provider>> "
"for more details."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:1668
#, no-wrap
msgid "Remote SPDK Provider"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1671
msgid ""
"A storage pool with the type remote SPDK can only be created on a \"special "
"satellite\". For this you first need to start a new satellite using the "
"command:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1674
#, no-wrap
msgid "$ linstor node create-remote-spdk-target nodeName 192.168.1.110\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1680
msgid ""
"This will start a new satellite instance running on the same machine as the "
"controller. This special satellite will do all the REST based RPC "
"communication towards the remote SPDK proxy. As the help message of the "
"LINSTOR command shows, the administrator might want to use additional "
"settings when creating this special satellite:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1689
#, no-wrap
msgid ""
"$ linstor node create-remote-spdk-target -h\n"
"usage: linstor node create-remote-spdk-target [-h] [--api-port API_PORT]\n"
"                                              [--api-user API_USER]\n"
"                                              [--api-user-env API_USER_ENV]\n"
"                                              [--api-pw [API_PW]]\n"
"                                              [--api-pw-env API_PW_ENV]\n"
"                                              node_name api_host\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1696
msgid ""
"The difference between the `--api-\\*` and their corresponding `--api-\\*-"
"env` versions is that the version with the `-env` ending will look for an "
"environment variable containing the actual value to use whereas the `--api-"
"\\*` version directly take the value which is stored in the LINSTOR "
"property.  Administrators might not want to save the `--api-pw` in plain "
"text, which would be clearly visible using commands like `linstor node list-"
"property <nodeName>`."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1698
msgid ""
"Once that special satellite is up and running the actual storage pool can be "
"created:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1705
#, no-wrap
msgid ""
"$ linstor storage-pool create remotespdk -h\n"
"usage: linstor storage-pool create remotespdk [-h]\n"
"                                              [--shared-space SHARED_SPACE]\n"
"                                              [--external-locking]\n"
"                                              node_name name driver_pool_name\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1709
msgid ""
"Whereas `node_name` is self-explanatory, `name` is the name of the LINSTOR "
"storage pool and `driver_pool_name` refers to the SPDK logical volume store."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1713
msgid ""
"Once this _remotespdk_ storage pool is created the remaining procedure is "
"quite similar as using NVMe: First the target has to be created by creating "
"a simple \"diskful\" resource followed by a second resource having the `--"
"nvme-initiator` option enabled."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:1716
#, no-wrap
msgid "Managing Network Interface Cards"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1720
msgid ""
"LINSTOR can deal with multiple network interface cards (NICs) in a machine.  "
"They are called \"net interfaces\" in LINSTOR speak."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1724
msgid ""
"When a satellite node is created a first net interface gets created "
"implicitly with the name `default`. You can use the `--interface-name` "
"option of the `node create` command to give it a different name, when you "
"create the satellite node."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1726
msgid "For existing nodes, additional net interfaces are created like this:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1729
#, no-wrap
msgid "# linstor node interface create node-0 10G_nic 192.168.43.231\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1734
msgid ""
"Net interfaces are identified by the IP address only, the name is arbitrary "
"and is *not* related to the NIC name used by Linux. You can then assign the "
"net interface to a node so that the node's DRBD traffic will be routed "
"through the corresponding NIC."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1737
#, no-wrap
msgid "# linstor node set-property node-0 PrefNic 10G_nic\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1747
msgid ""
"It is also possible to set the `PrefNic` property on a storage pool. DRBD "
"traffic from resources using the storage pool will be routed through the "
"corresponding NIC. However, you need to be careful here. Any DRBD resource "
"that requires Diskless storage, for example, diskless storage acting in a "
"tiebreaker role for DRBD quorum purposes, will go through the default "
"satellite node net interface, until you also set the `PrefNic` property for "
"the `default` net interface. Setups can become complex. It is far easier and "
"safer, if you can get away with it, to set the `PrefNic` property at the "
"node level. This way, all storage pools on the node, including Diskless "
"storage pools, will use your preferred NIC."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1753
msgid ""
"If you need to add an interface for only controller-satellite traffic, you "
"can add an interface using the above `node interface create` command. Then "
"you modify the connection to make it the active controller-satellite "
"connection. For example, if you added an interface named `1G-satconn` on all "
"nodes, after adding the interface, you can then tell LINSTOR to use this "
"interface for controller-satellite traffic by entering the following command:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1756
#, no-wrap
msgid "# linstor node interface modify node-0 1G-satconn --active\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1760
msgid ""
"You can verify this change by using the `linstor node interface list node-0` "
"command. Output from the command should show that the `StltCon` label "
"applies to the `1G-satconn` interface."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1765
msgid ""
"While this method routes DRBD traffic through a specified NIC, it is not "
"possible through `linstor` commands only, to route LINSTOR controller-client "
"traffic through a specific NIC, for example, commands that you issue from a "
"LINSTOR client to the controller. To achieve this, you can either:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1769
msgid ""
"Specify a LINSTOR controller by using methods outlined in <<s-"
"using_the_linstor_client>> *and* have the only route to the controller as "
"specified be through the NIC that you want to use for controller-client "
"traffic."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1772
msgid ""
"Use Linux tools such as `ip route` and `iptables` to filter LINSTOR client-"
"controller traffic, port number 3370, and route it through a specific NIC."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:1774
#, no-wrap
msgid "Creating Multiple DRBD Paths with LINSTOR"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1780
msgid ""
"To use https://linbit.com/drbd-user-guide/drbd-guide-9_0-en/#s-configuring-"
"multiple-paths[multiple network paths] for DRBD setups, the `PrefNic` "
"property is not sufficient. Instead the `linstor node interface` and "
"`linstor resource-connection path` commands should be used, as shown below."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1786
#, no-wrap
msgid ""
"# linstor node interface create alpha nic1 192.168.43.221\n"
"# linstor node interface create alpha nic2 192.168.44.221\n"
"# linstor node interface create bravo nic1 192.168.43.222\n"
"# linstor node interface create bravo nic2 192.168.44.222\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1789
#, no-wrap
msgid ""
"# linstor resource-connection path create alpha bravo myResource path1 nic1 nic1\n"
"# linstor resource-connection path create alpha bravo myResource path2 nic2 nic2\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1795
msgid ""
"The first four commands in the example define a network interface (`nic1` "
"and `nic2`) for each node (`alpha` and `bravo`) by specifying the network "
"interface's IP address. The last two commands create network path entries in "
"the DRBD `.res` file that LINSTOR generates. This is the relevant part of "
"the resulting `.res` file:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1810
#, no-wrap
msgid ""
"resource myResource {\n"
"  ...\n"
"  connection {\n"
"    path {\n"
"      host alpha address 192.168.43.221:7000;\n"
"      host bravo address 192.168.43.222:7000;\n"
"    }\n"
"    path {\n"
"      host alpha address 192.168.44.221:7000;\n"
"      host bravo address 192.168.44.222:7000;\n"
"    }\n"
"  }\n"
"}\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1816
msgid ""
"While it is possible to specify a port number to be used for LINSTOR "
"satellite traffic when creating a node interface, this port number is "
"ignored when creating a DRBD resource connection path. Instead, the command "
"will assign a port number dynamically, starting from port number 7000 and "
"incrementing up."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:1818
#, no-wrap
msgid "How Adding a New DRBD Path Affects the Default Path"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1823
msgid ""
"The NIC that is first in order on a LINSTOR satellite node is named the "
"`default` net interface.  DRBD traffic traveling between two nodes that do "
"not have an explicitly configured resource connection path will take an "
"implicit path that uses the two nodes' `default` net interfaces."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1828
msgid ""
"When you add a resource connection path between two nodes for a DRBD-backed "
"resource, DRBD traffic between the two nodes will use this new path only, "
"although a `default` network interface will still exist on each node. This "
"may be significant if your new path uses different NICs than the implicit "
"default path."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1831
msgid ""
"To use the default path again, in addition to any new paths, you will need "
"to explicitly add it.  For example:"
msgstr ""

#. type: delimited block =
#: UG9/en/linstor-administration.adoc:1834
msgid ""
"# linstor resource-connection path create alpha bravo myResource path3 "
"default default"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1840
msgid ""
"Although the newly created `path3` uses net interfaces that are named "
"`default` on the two nodes, the path itself is not a default path because "
"other paths exist, namely `path1` and `path2`. The new path, `path3`, will "
"just act as a third possible path, and DRBD traffic and path selection "
"behavior will be as described in the next section."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:1841
#, no-wrap
msgid "Multiple DRBD Paths Behavior"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1846
msgid ""
"The behavior of a multiple DRBD paths configuration will be different "
"depending on the DRBD transport type. From the DRBD User's Guidefootnote:"
"[https://linbit.com/drbd-user-guide/drbd-guide-9_0-en/#s-configuring-"
"multiple-paths]:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1850
msgid ""
"\"The TCP transport uses one path at a time. If the backing TCP connections "
"get dropped, or show timeouts, the TCP transport implementation tries to "
"establish a connection over the next path.  It goes over all paths in a "
"round-robin fashion until a connection gets established."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1853
msgid ""
"\"The RDMA transport uses all paths of a connection concurrently and it "
"balances the network traffic between the paths evenly.\""
msgstr ""

#.  if customers request, we should be able to also extend this to `node-connection` level
#. type: Title ===
#: UG9/en/linstor-administration.adoc:1857
#, no-wrap
msgid "Encrypted Volumes"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1861
msgid ""
"LINSTOR can handle transparent encryption of DRBD volumes. dm-crypt is used "
"to encrypt the provided storage from the storage device."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1864
msgid ""
"To use dm-crypt please verify that `cryptsetup` is installed before you "
"start the satellite."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1866
msgid "Basic steps to use encryption:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1868
msgid "Create a master passphrase"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1869
msgid ""
"Add `luks` to the layer-list. Note that all plug-ins (e.g., Proxmox) require "
"a DRBD layer as the top most layer if they do not explicitly state otherwise."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1870
msgid ""
"Don't forget to re-enter the master passphrase after a controller restart."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:1872
#, no-wrap
msgid "Encryption Commands"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1874
msgid "Below are details about the commands."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1877
msgid ""
"Before LINSTOR can encrypt any volume a master passphrase needs to be "
"created.  This can be done with the linstor-client."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1880
#, no-wrap
msgid "# linstor encryption create-passphrase\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1884
msgid ""
"`crypt-create-passphrase` will wait for the user to input the initial master "
"passphrase (as all other crypt commands will with no arguments)."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1886
msgid "If you ever want to change the master passphrase this can be done with:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1889
#, no-wrap
msgid "# linstor encryption modify-passphrase\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1894
msgid ""
"The `luks` layer can be added when creating the resource-definition or the "
"resource itself, whereas the former method is recommended since it will be "
"automatically applied to all resource created from that resource-definition."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1897
#, no-wrap
msgid "# linstor resource-definition create crypt_rsc --layer-list luks,storage\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1900
msgid ""
"To enter the master passphrase (after controller restart) use the following "
"command:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1903
#, no-wrap
msgid "# linstor encryption enter-passphrase\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1908
msgid ""
"Whenever the linstor-controller is restarted, the user has to send the "
"master passphrase to the controller, otherwise LINSTOR is unable to reopen "
"or create encrypted volumes."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:1910
#, no-wrap
msgid "Automatic Passphrase"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1912
msgid ""
"It is possible to automate the process of creating and re-entering the "
"master passphrase."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1915
msgid ""
"To use this, either an environment variable called `MASTER_PASSPHRASE` or an "
"entry in `/etc/linstor/linstor.toml` containing the master passphrase has to "
"be created."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1917
msgid "The required `linstor.toml` looks like this:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1921
#, no-wrap
msgid ""
"[encrypt]\n"
"passphrase=\"example\"\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1926
msgid ""
"If either one of these is set, then every time the controller starts it will "
"check whether a master passphrase already exists. If there is none, it will "
"create a new master passphrase as specified.  Otherwise, the controller "
"enters the passphrase."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1932
msgid ""
"If a master passphrase is already configured, and it is not the same one as "
"specified in the environment variable or `linstor.toml`, the controller will "
"be unable to re-enter the master passphrase and react as if the user had "
"entered a wrong passphrase.  This can only be resolved through manual input "
"from the user, using the same commands as if the controller was started "
"without the automatic passphrase."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1935
msgid ""
"In case the master passphrase is set in both an environment variable and the "
"`linstor.toml`, only the master passphrase from the `linstor.toml` will be "
"used."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:1937
#, no-wrap
msgid "Checking Cluster State"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1943
msgid ""
"LINSTOR provides various commands to check the state of your cluster.  These "
"commands start with a 'list' precursor, after which, various filtering and "
"sorting options can be used. The '--groupby' option can be used to group and "
"sort the output in multiple dimensions."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:1947
#, no-wrap
msgid ""
"# linstor node list\n"
"# linstor storage-pool list --groupby Size\n"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:1950
#, no-wrap
msgid "Evacuating a Node"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1957
msgid ""
"You can use the LINSTOR command `node evacuate` to evacuate a node of its "
"resources, for example, if you are preparing to delete a node from your "
"cluster, and you need the node's resources moved to other nodes in the "
"cluster. After successfully evacuating a node, the node's LINSTOR status "
"will show as \"EVACUATE\" rather than \"Online\", and it will have no "
"LINSTOR resources on it."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1965
msgid ""
"If you are evacuating a node where LINSTOR is deployed within another "
"environment, such as Kubernetes, or OpenNebula, you need to move the node's "
"LINSTOR-backed workload to another node in your cluster before evacuating "
"its resources. For special actions and considerations within a Kubernetes "
"environment, see the <<s-kubernetes-evacuate-node>> section.  For a LINSTOR "
"node in OpenNebula, you need to perform a <<s-opennebula-linstor-live-"
"migration, live migration>> of the OpenNebula LINSTOR-backed virtual "
"machines that your node hosts, to another node in your cluster, before "
"evacuating the node's resources."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1967
msgid "Evacuate a node using the following steps:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1972
msgid ""
"Determine if any resources on the node that you want to evacuate are "
"\"InUse\". The \"InUse\" status corresponds to a resource being in a DRBD "
"_Primary_ state. Before you can evacuate a node successfully, none of the "
"resources on the node should be \"InUse\", otherwise LINSTOR will fail to "
"remove the \"InUse\" resources from the node as part of the evacuation "
"process."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1977
msgid ""
"Run `linstor node evacuate <node_name>`. You will get a warning if there is "
"no suitable replacement node for a resource on the evacuating node. For "
"example, if you have three nodes and you want to evacuate one, but your "
"resource group sets a placement count of three, you will get a warning that "
"will prevent the node from removing the resources from the evacuating node."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1980
msgid ""
"Verify that the status of `linstor node list` for your node is \"EVACUATE\" "
"rather than \"Online\"."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1984
msgid ""
"Check the \"State\" status of resources on your node, by using the `linstor "
"resource list` command. You should see syncing activity that will last for "
"sometime, depending on the size of the data sets in your node's resources."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1987
msgid ""
"List the remaining resources on the node by using the command `linstor "
"resource list --nodes <node_name>`. If any are left, verify whether they are "
"just waiting for the sync to complete."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1989
msgid ""
"Verify that there are no resources on the node, by using the `linstor "
"resource list` command."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1991
msgid ""
"Remove the node from the cluster by using the command `linstor node delete "
"<node_name>`."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:1993
#, no-wrap
msgid "Evacuating Multiple Nodes"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:1998
msgid ""
"Some evacuation cases may need special planning. For example, if you are "
"evacuating more than one node, you can exclude the nodes from participating "
"in LINSTOR's resource autoplacer. You can do this by using the following "
"command on each node that you want to evacuate:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2001
#, no-wrap
msgid "# linstor node set-property <node_name> AutoplaceTarget false\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2005 UG9/en/linstor-kubernetes.adoc:2711
msgid ""
"This ensures that LINSTOR will not place resources from a node that you are "
"evacuating onto another node that you plan on evacuating."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2007
#, no-wrap
msgid "Restoring an Evacuating Node"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2012
msgid ""
"If you already ran a `node evacuate` command that has either completed or "
"still has resources in an \"Evacuating\" state, you can remove the "
"\"Evacuating\" state from a node by using the `node restore` command. This "
"will work so long as you have not yet run a `node delete` command."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2017
msgid ""
"After restoring the node, you should use the `node set-property <node_name> "
"AutoplaceTarget true` command, if you previously set the `AutoplaceTarget` "
"property to \"false\".  This way, LINSTOR can again place resources onto the "
"node automatically, to fulfill placement count properties that you might "
"have set for resources in your cluster."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2025
msgid ""
"If LINSTOR has already evacuated resources when running a `node restore` "
"command, evacuated resources will not automatically return to the node. If "
"LINSTOR is still in the process of evacuating resources, this process will "
"continue until LINSTOR has placed the resources on other nodes. You will "
"need to manually \"move\" the resources that were formerly on the restored "
"node. You can do this by first creating the resources on the restored node "
"and then deleting the resources from another node where LINSTOR may have "
"placed them. You can use the `resource list` command to show you on which "
"nodes your resources are placed."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:2027
#, no-wrap
msgid "Managing Snapshots"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2029
msgid "Snapshots are supported with thin LVM and ZFS storage pools."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:2031 UG9/en/linstor-kubernetes.adoc:2019
#, no-wrap
msgid "Creating a Snapshot"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2034
msgid ""
"Assuming a resource definition named 'resource1' which has been placed on "
"some nodes, a snapshot can be created as follows:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2037
#, no-wrap
msgid "# linstor snapshot create resource1 snap1\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2042
msgid ""
"This will create snapshots on all nodes where the resource is present.  "
"LINSTOR will ensure that consistent snapshots are taken even when the "
"resource is in active use."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2049
msgid ""
"Setting the resource-definition property `AutoSnapshot/RunEvery` LINSTOR "
"will automatically create snapshots every X minute.  The optional property "
"`AutoSnapshot/Keep` can be used to clean-up old snapshots which were created "
"automatically. No manually created snapshot will be cleaned-up / deleted.  "
"If `AutoSnapshot/Keep` is omitted (or <= 0), LINSTOR will keep the last 10 "
"snapshots by default."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2053
#, no-wrap
msgid ""
"# linstor resource-definition set-property AutoSnapshot/RunEvery 15\n"
"# linstor resource-definition set-property AutoSnapshot/Keep 5\n"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:2057 UG9/en/linstor-kubernetes.adoc:2087
#, no-wrap
msgid "Restoring a Snapshot"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2061
msgid ""
"The following steps restore a snapshot to a new resource.  This is possible "
"even when the original resource has been removed from the nodes where the "
"snapshots were taken."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2063
msgid ""
"First define the new resource with volumes matching those from the snapshot:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2068
#, no-wrap
msgid ""
"# linstor resource-definition create resource2\n"
"# linstor snapshot volume-definition restore --from-resource resource1 \\\n"
"  --from-snapshot snap1 --to-resource resource2\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2072
msgid ""
"At this point, additional configuration can be applied if necessary.  Then, "
"when ready, create resources based on the snapshots:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2076
#, no-wrap
msgid ""
"# linstor snapshot resource restore --from-resource resource1 \\\n"
"  --from-snapshot snap1 --to-resource resource2\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2081
msgid ""
"This will place the new resource on all nodes where the snapshot is "
"present.  The nodes on which to place the resource can also be selected "
"explicitly; see the help (`linstor snapshot resource restore -h`)."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2083
#, no-wrap
msgid "Rolling Back to a Snapshot"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2090
msgid ""
"LINSTOR can roll a resource back to a snapshot state.  The resource must not "
"be in use.  That is, it may not be mounted on any nodes.  If the resource is "
"in use, consider whether you can achieve your goal by <<s-"
"restoring_a_snapshot-linstor,restoring the snapshot>> instead."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2092
msgid "Rollback is performed as follows:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2095
#, no-wrap
msgid "# linstor snapshot rollback resource1 snap1\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2099
msgid ""
"A resource can only be rolled back to the most recent snapshot.  To roll "
"back to an older snapshot, first delete the intermediate snapshots."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2101
#, no-wrap
msgid "Removing a Snapshot"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2103
msgid "An existing snapshot can be removed as follows:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2106
#, no-wrap
msgid "# linstor snapshot delete resource1 snap1\n"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2109
#, no-wrap
msgid "Shipping a Snapshot"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2113
msgid ""
"Snapshots can be shipped between LINSTOR nodes or between different LINSTOR "
"clusters, as well as to an S3 storage such as https://aws.amazon.com/s3/"
"[Amazon S3] or https://min.io/[min.io]."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2116
msgid ""
"The following tools need to be installed on the satellites that are going to "
"send or receive snapshots:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2118
msgid "`zstd` is needed to compress the data before it is being shipped"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2120
msgid "`thin-send-recv` is needed to ship data when using lvm-thin"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2123
msgid ""
"The satellite needs to be restarted after installing these tools, otherwise "
"LINSTOR will not be able to use them."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:2125
#, no-wrap
msgid "Remotes"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2132
msgid ""
"In a LINSTOR cluster, the definition of a shipping target is called a "
"remote.  Currently, there are two different types of remotes: LINSTOR "
"remotes and S3 remotes.  LINSTOR remotes are used to ship snapshots to a "
"different LINSTOR cluster, while S3 remotes are needed to ship snapshots to "
"AWS S3, min.io or any other service using S3 compatible object storage."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2136
msgid ""
"Since a remote needs to store sensitive data, such as passwords, it is "
"neccessary to have encryption enabled whenever you want to use a remote in "
"any way.  How to set up LINSTOR's encryption is described <<s-"
"encrypt_commands,here>>."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2142
msgid ""
"To create an S3 remote, LINSTOR will need to know the endpoint (that is, the "
"URL of the target S3 server), the name of the target bucket, the region the "
"S3 server is in, as well as the access-key and secret-key used to access the "
"bucket. If the command is sent without adding the secret-key, a prompt will "
"pop up to enter it in. The command should look like this:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2146
#, no-wrap
msgid ""
"# linstor remote create s3 myRemote s3.us-west-2.amazonaws.com \\\n"
"  my-bucket us-west-2 admin password\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2152
msgid ""
"Usually, LINSTOR uses the endpoint and bucket to create an URL using the "
"virtual-hosted-style for its access to the given bucket (for example my-"
"bucket.s3.us-west-2.amazonaws.com). Should your setup not allow access this "
"way, change the remote to path-style access (for example s3.us-west-2."
"amazonaws.com/my-bucket)  by adding the `--use-path-style` argument to make "
"LINSTOR combine the parameters accordingly."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2155
msgid ""
"To create a LINSTOR remote, only the URL or IP address of the controller of "
"the target cluster is needed. The command goes as follows:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2158
#, no-wrap
msgid "# linstor remote create linstor myRemote 192.168.0.15\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2164
msgid ""
"Additionally, to ship LUKS-based (encrypted) backups, it is necessary to add "
"the `--passphrase` and `--cluster-id` arguments to the command. This is used "
"to save the passphrase and cluster ID of the target cluster to the remote "
"respectively. For more details on shipping LUKS-based backups between two "
"LINSTOR clusters, see <<s-shipping_snapshots-l2l,this chapter>>."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2168
msgid ""
"To see all the remotes known to the local cluster, use `linstor remote "
"list`. To delete a remote, use `linstor remote delete myRemoteName`. Should "
"an existing remote need altering, use `linstor remote modify` to change it."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:2170
#, no-wrap
msgid "Shipping Snapshots to S3"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2174
msgid ""
"All that is needed to ship a snapshot to S3 is to create an S3-remote that "
"the current cluster can reach as well as the resource that should be "
"shipped. Then, simply use the following command to ship it there:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2177
#, no-wrap
msgid "# linstor backup create myRemote myRsc\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2185
msgid ""
"This command will create a snapshot of your resource and ship it to the "
"given remote. If this isn't the first time you shipped a backup of this "
"resource (to that remote) and the snapshot of the previous backup hasn't "
"been deleted yet, an incremental backup will be shipped.  To force the "
"creation of a full backup, add the `--full` argument to the command. Getting "
"a specific node to ship the backup is also possible by using `--node "
"myNode`, but if the specified node is not available or only has the resource "
"diskless, a different node will be chosen."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2192
msgid ""
"To see which backups exist in a specific remote, use `linstor backup list "
"myRemote`. A resource-name can be added to the command as a filter to only "
"show backups of that specific resource by using the argument `--resource "
"myRsc`. If you use the `--other` argument, only entries in the bucket that "
"LINSTOR does not recognize as a backup will be shown. LINSTOR always names "
"backups in a certain way, and as long as an item in the remote is named "
"according to this schema, it is assumed that it is a backup created by "
"LINSTOR - so this list will show everything else."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2194
msgid "There are several options when it comes to deleting backups:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2198
msgid ""
"`linstor backup delete all myRemote`: This command deletes ALL S3-objects on "
"the given remote, provided that they are recognized to be backups, that is, "
"fit the expected naming schema. There is the option `--cluster` to only "
"delete backups that were created by the current cluster."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2205
msgid ""
"`linstor backup delete id myRemote my-rsc_back_20210824_072543`: This "
"command deletes a single backup from the given remote - namely the one with "
"the given id, which consists of the resource-name, the automatically "
"generated snapshot-name (back_timestamp) and, if set, the backup-suffix. The "
"option `--prefix` lets you delete all backups starting with the given id. "
"The option `--cascade` deletes not only the specified backup, but all other "
"incremental backups depending on it."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2212
msgid ""
"`linstor backup delete filter myRemote ...`: This command has a few "
"different arguments to specify a selection of backups to delete. `-t "
"20210914_120000` will delete all backups made before 12 o'clock on the 14th "
"of September, 2021. `-n myNode` will delete all backups uploaded by the "
"given node. `-r myRsc` will delete all backups with the given resource "
"name.  These filters can be combined as needed. Finally, `--cascade` deletes "
"not only the selected backup(s), but all other incremental backups depending "
"on any of the selected backups."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2218
msgid ""
"`linstor backup delete s3key myRemote randomPictureInWrongBucket`: This "
"command will find the object with the given S3-key and delete it - without "
"considering anything else. This should only be used to either delete non-"
"backup items from the remote, or to clean up a broken backup that is no "
"longer deleteable by other means. Using this command to delete a regular, "
"working backup will break that backup, so beware!"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2221
msgid ""
"All commands that have the `--cascade` option will NOT delete a backup that "
"has incremental backups depending on it unless you explicitly add that "
"option."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2225
msgid ""
"All `linstor backup delete ...` commands have the `--dry-run` option, which "
"will give you a list of all the S3-objects that will be deleted. This can be "
"used to ensure nothing that should not be deleted is accidentally deleted."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2229
msgid ""
"Maybe the most important task after creating a backup is restoring it. To do "
"so, only the remote is needed - but it is also possible to restore into an "
"existing resource definition with no existing snapshots nor resources. There "
"are two options for the command:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2233
#, no-wrap
msgid ""
"# linstor backup restore myRemote myNode targetRsc --resource sourceRsc\n"
"# linstor backup restore myRemote myNode targetRsc --id sourceRsc_back_20210824_072543\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2239
msgid ""
"Either `--resource (-r)` or `--id` must be used, but you cannot use both of "
"them together. `-r` is used to restore the latest backup of the resource "
"specified with this option, while `--id` restores the exact backup specified "
"by the given id, and can therefore be used to restore backups other than the "
"most recent."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2243
msgid ""
"If the backup to be restored includes a LUKS layer, the `--passphrase` "
"argument is required. With it, the passphrase of the original cluster of the "
"backup needs to be set so that LINSTOR can decrypt the volumes after "
"download and re-encrypt them with the local passphrase."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2247
msgid ""
"The backup restore will download all the snapshots from the last full backup "
"up to the specified backup. Afterwards, it restores the snapshots into a new "
"resource. If that last step should be skipped, the `--download-only` option "
"needs to be added to the command."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2255
msgid ""
"Backups can be downloaded from any cluster, not just the one that uploaded "
"them, provided that the setup is correct. Specifically, the target resource "
"cannot have any existing resources or snapshots, and the storage pool(s) "
"used need to have the same storage providers. If the storage pool(s) on the "
"target node have the exact same names as on the cluster the backup was "
"created on, no extra action is necessary. Should they have different names, "
"the option `--storpool-rename` needs to be used. It expects at least one "
"`oldname=newname` pair. For every storage pool of the original backup that "
"is not named in that list, it will be assumed that its name is exactly the "
"same on the target node."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2263
msgid ""
"To find out exactly which storage pools need to be renamed, as well as how "
"big the download and the restored resource will be, the command `linstor "
"backup info myRemote ...` can be used. Similar to the restore command, "
"either `-r` or `--id` need to be given, which add the same restrictions as "
"with that command.  To see how much space will be left over in the local "
"storage pools after a restore, the argument `-n myNode` needs to be added. "
"Just like with a restore, it assumes the storage pool names are exactly the "
"same on the given node as with the backup. Should that not be the case, "
"again, just like with the restore command, `--storpool-rename` should be "
"used."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:2265
#, no-wrap
msgid "Shipping Snapshots Between Two LINSTOR Clusters"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2270
msgid ""
"Shipping a snapshot directly between two LINSTOR clusters can be done with a "
"LINSTOR remote as well as a resource definition with at least one diskful "
"resource on the source side (where the shipping command is issued). On the "
"target side, you need to create a LINSTOR remote with the cluster ID of the "
"source (remote) cluster:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2273
#, no-wrap
msgid "$ linstor remote create linstor --cluster-id <SOURCE_CLUSTER_ID> <NAME> <URL>\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2279
msgid ""
"If you do not specify the cluster ID of your source cluster when you create "
"a LINSTOR remote on your target cluster, you will receive an \"Unknown "
"Cluster\" error when you try to ship a backup. To get the cluster ID of your "
"source cluster, you can enter the command `linstor controller list-"
"properties|grep -i cluster` from the source cluster."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2284
msgid ""
"In the `remote create` command shown above, `<NAME>` is an arbitrary name "
"that you specify to identify the remote. `<URL>` is either the IP address of "
"the source (remote) LINSTOR controller or its resolvable hostname. If you "
"have configured a highly available LINSTOR controller, use its virtual IP "
"address (VIP) or the VIP's resolvable name."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:2286
#, no-wrap
msgid "Snapshot Shipping Within a Single LINSTOR Cluster"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2290
msgid ""
"If you want to ship a snapshot inside the same cluster, you just need to "
"create a LINSTOR remote that points to the local controller."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:2292
#, no-wrap
msgid "Specifying a LINSTOR Passphrase When Creating a Remote"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2298
msgid ""
"When the snapshot that you want to ship contains a LUKS layer, the remote on "
"the target cluster also needs the passphrase of the source cluster set when "
"you create the remote. This is because the LINSTOR passphrase is used to "
"encrypt the LUKS passphrase. To specify the source cluster's LINSTOR "
"passphrase when you create a LINSTOR remote on the target cluster, enter:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2302
#, no-wrap
msgid ""
"$ linstor --controllers <TARGET_CONTROLLER> remote create linstor \\\n"
"--cluster-id <SOURCE_CLUSTER_ID> --passphrase <SOURCE_CONTROLLER_PASSPHRASE> <NAME> <URL>\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2308
msgid ""
"For LINSTOR to LINSTOR snapshot shipping, you must also create a LINSTOR "
"remote on the source cluster. For simplicity sake, although not strictly "
"necessary, you can specify the target cluster's LINSTOR passphrase when you "
"create a LINSTOR remote for the target cluster on the source cluster, before "
"you ship backups or snapshots. On the source cluster, enter:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2312
#, no-wrap
msgid ""
"$ linstor --controllers <SOURCE_CONTROLLER> remote create linstor \\\n"
"--cluster-id <TARGET_CLUSTER_ID> --passphrase <TARGET_CONTROLLER_PASSPHRASE> <NAME> <URL>\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2317
msgid ""
"If you are specifying a LINSTOR controller node (perhaps because you have a "
"<<s-linstor_ha, highly available controller>>), when creating a remote, you "
"can specify the controller either by an IP address or a resolvable hostname."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:2319
#, no-wrap
msgid "Shipping a Backup of a LINSTOR Resource"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2322
msgid "The command to ship a backup is:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2325
#, no-wrap
msgid "# linstor backup ship myRemote localRsc targetRsc\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2330
msgid ""
"Additionally, you can use `--source-node` and `--target-node` to specify "
"which node should send and receive the backup respectively. In case those "
"nodes are not available, a different one will be chosen automatically."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2335
msgid ""
"If `targetRsc` is already a deployed resource on the remote cluster, "
"snapshots in the backup shipping for `localRsc` will ship to the remote "
"cluster but they will not be restored to the remote cluster. The same is "
"true if you specify the `--download-only` option with the `linstor backup "
"ship` command."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:2337
#, no-wrap
msgid "Controlling How Many Shipments Are Active at the Same Time"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2342
msgid ""
"There might be cases where an automated task (be it LINSTOR's scheduled "
"shipping or an external tool) starts too many shipments at once, leading to "
"an overload of the network or some of the nodes sending the backups."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2346
msgid ""
"In a case like this the solution is to reduce the amount of shipments that "
"can happen at the same time on the same node. This is done by using the "
"property `BackupShipping/MaxConcurrentBackupsPerNode`.  This property can be "
"set either on the controller or on a specific node."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2350
msgid ""
"The expected value for this property is a number. Setting it to any negative "
"number will be interpreted as \"no limit\", while setting it to zero will "
"result in this specific node not being eligible to ship any backups - or "
"completely disabling backup shipping if the property is set to 0 on the "
"controller."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2353
msgid ""
"Any other positive number is treated as a limit of concurrently active "
"shippings per node.  To determine which node will send a backup shipment, "
"LINSTOR uses the following logic in the order shown:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2356
msgid ""
"The node specified in the command (`--source-node` for shippings to another "
"cluster, `--node` for shipping to S3 compatible storage) will ship the "
"backup."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2357
msgid "The node that has the most available backup slots will ship the backup."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2359
msgid ""
"If no node has an available backup slot, the shipment will be added to a "
"queue and started as soon as a different shipment has finished which leads "
"to a backup slot becoming available."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:2361
#, no-wrap
msgid "Shipping a Snapshot in the Same Cluster"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2366
msgid ""
"Both, the source as well as the target node have to have the resource for "
"snapshot shipping deployed. Additionally, the target resource has to be "
"deactivated."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2369
#, no-wrap
msgid "# linstor resource deactivate nodeTarget resource1\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2374
msgid ""
"Deactivating a resource with DRBD in its layer-list can NOT be reactivated "
"again. However, a successfully shipped snapshot of a DRBD resource can still "
"be <<s-restoring_a_snapshot-linstor,restored into a new resource>>."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2376
msgid "To manually start the snapshot-shipping, use:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2379
#, no-wrap
msgid "# linstor snapshot ship --from-node nodeSource --to-node nodeTarget --resource resource1\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2384
msgid ""
"The `snapshot ship` command is considered deprecated and any bugs found with "
"it will not be fixed. Instead, use the `backup ship` command with a remote "
"pointing to your local controller. For more details, see <<s-"
"shipping_snapshots-l2l,the previous section>>."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2388
msgid ""
"By default, the snapshot-shipping uses TCP ports from the range 12000-12999. "
"To change this range, the property `SnapshotShipping/TcpPortRange`, which "
"accepts a to-from range, can be set on the controller:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2391
#, no-wrap
msgid "# linstor controller set-property SnapshotShipping/TcpPortRange 10000-12000\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2398
msgid ""
"A resource can also be periodically shipped. To accomplish this, it is "
"mandatory to set the properties `SnapshotShipping/TargetNode` as well as "
"`SnapshotShipping/RunEvery` on the resource-definition.  `SnapshotShipping/"
"SourceNode` can also be set, but if omitted LINSTOR will choose an active "
"resource of the same resource-definition."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2403
msgid ""
"To allow incremental snapshot-shipping, LINSTOR has to keep at least the "
"last shipped snapshot on the target node. The property `SnapshotShipping/"
"Keep` can be used to specify how many snapshots LINSTOR should keep. If the "
"property is not set (or <= 0) LINSTOR will keep the last 10 shipped "
"snapshots by default."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2409
#, no-wrap
msgid ""
"# linstor resource-definition set-property resource1 SnapshotShipping/TargetNode nodeTarget\n"
"# linstor resource-definition set-property resource1 SnapshotShipping/SourceNode nodeSource\n"
"# linstor resource-definition set-property resource1 SnapshotShipping/RunEvery 15\n"
"# linstor resource-definition set-property resource1 SnapshotShipping/Keep 5\n"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:2412
#, no-wrap
msgid "Scheduled Backup Shipping"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2416
msgid ""
"Starting with LINSTOR Controller version 1.19.0 and working with LINSTOR "
"client version 1.14.0 or above, you can configure scheduled backup shipping "
"for deployed LINSTOR resources."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2418
msgid "Scheduled backup shipping consists of three parts:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2421
msgid ""
"A data set that consists of one or more deployed LINSTOR resources that you "
"want to backup and ship"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2423
msgid ""
"A remote destination to ship backups to (another LINSTOR cluster or an S3 "
"instance)"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2425
msgid "A schedule that defines when the backups should ship"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2429
msgid ""
"LINSTOR backup shipping only works for deployed LINSTOR resources that are "
"backed by LVM and ZFS storage pools, because these are the storage pool "
"types with snapshot support in LINSTOR."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2431
#, no-wrap
msgid "Creating a Backup Shipping Schedule"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2438
msgid ""
"You create a backup shipping schedule by using the LINSTOR client `schedule "
"create` command and defining the frequency of backup shipping using `cron` "
"syntax. You also need to set options that name the schedule and define "
"various aspects of the backup shipping, such as on-failure actions, the "
"number of local and remote backup copies to keep, and whether to also "
"schedule incremental backup shipping."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2441
msgid ""
"At a minimum, the command needs a schedule name and a full backup cron "
"schema to create a backup shipping schedule. An example command would look "
"like this:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2451
#, no-wrap
msgid ""
"# linstor schedule create \\\n"
"  --incremental-cron '* * * * *' \\ <1>\n"
"  --keep-local 5 \\ <2>\n"
"  --keep-remote 4 \\ <3>\n"
"  --on-failure RETRY \\ <4>\n"
"  --max-retries 10 \\ <5>\n"
"  <schedule_name> \\ <6>\n"
"  '* * * * *' # full backup cron schema <7>\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2454
msgid "Enclose cron schemas within single or double quotation marks."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2457
msgid ""
"If specified, the incremental cron schema describes how frequently to create "
"and ship incremental backups. New incremental backups are based on the most "
"recent full backup."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2462
msgid ""
"The `--keep-local` option allows you to specify how many snapshots that a "
"full backup is based upon should be kept at the local backup source. If "
"unspecified, all snapshots will be kept. [OPTIONAL]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2468
msgid ""
"The `--keep-remote` option allows you to specify how many full backups "
"should be kept at the remote destination. This option only works with S3 "
"remote backup destinations, because you would not want to allow a cluster "
"node to delete backups from a node in another cluster. All incremental "
"backups based on a deleted full backup will also be deleted at the remote "
"destination. If unspecified, the `--keep-remote` option defaults to \"all\". "
"[OPTIONAL]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2474
msgid ""
"Specifies whether to \"RETRY\" or \"SKIP\" the scheduled backup shipping if "
"it fails. If \"SKIP\" is specified, LINSTOR will ignore the failure and "
"continue with the next scheduled backup shipping. If \"RETRY\" is specified, "
"LINSTOR will wait 60 seconds and then try the backup shipping again. The "
"LINSTOR `schedule create` command defaults to \"SKIP\" if no `--on-failure` "
"option is given. [OPTIONAL]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2478
msgid ""
"The number of times to retry the backup shipping if a scheduled backup "
"shipping fails and the `--on-failure RETRY` option has been given. Without "
"this option, the LINSTOR controller will retry the scheduled backup shipping "
"indefinitely, until it is successful. [OPTIONAL]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2481
msgid ""
"The name that you give the backup schedule so that you can reference it "
"later with the schedule list, modify, delete, enable, or disable commands. "
"[REQUIRED]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2483
msgid ""
"This cron schema describes how frequently LINSTOR creates snapshots and "
"ships full backups."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2492
msgid ""
"If you specify an incremental cron schema that has overlap with the full "
"cron schema that you specify, at the times when both types of backup "
"shipping would occur simultaneously, LINSTOR will only make and ship a full "
"backup. For example, if you specify that a full backup be made every three "
"hours, and an incremental backup be made every hour, then every third hour, "
"LINSTOR will only make and ship a full backup. For this reason, specifying "
"the same cron schema for both your incremental and full backup shipping "
"schedules would be useless, because incremental backups will never be made."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2494
#, no-wrap
msgid "Modifying a Backup Shipping Schedule"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2503
msgid ""
"You can modify a backup shipping schedule by using the LINSTOR client "
"`schedule modify` command.  The syntax for the command is the same as that "
"for the `schedule create` command. The name that you specify with the "
"`schedule modify` command must be an already existing backup schedule. Any "
"options to the command that you do not specify will retain their existing "
"values. If you want to set the `keep-local` or `keep-remote` options back to "
"their default values, you can set them to \"all\". If you want to set the "
"`max-retries` option to its default value, you can set it to \"forever\"."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2504
#, no-wrap
msgid "Configuring the Number of Local Snapshots and Remote Backups to Keep"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2508
msgid ""
"Your physical storage is not infinite and your remote storage has a cost, so "
"you will likely want to set limits on the number of snapshots and backups "
"you keep."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2512
msgid ""
"Both the `--keep-remote` and `--keep-local` options deserve special mention "
"as they have implications beyond what may be obvious. Using these options, "
"you specify how many snapshots or full backups should be kept, either on the "
"local source or the remote destination."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:2514
#, no-wrap
msgid "Configuring the Keep-local Option"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2525
msgid ""
"For example, if a `--keep-local=2` option is set, then the backup shipping "
"schedule, on first run, will make a snapshot for a full backup. On the next "
"scheduled full backup shipping, it will make a second snapshot for a full "
"backup. On the next scheduled full backup shipping, it makes a third "
"snapshot for a full backup. This time, however, after successful completion, "
"LINSTOR deletes the first (oldest) full backup shipping snapshot. If "
"snapshots were made for any incremental backups based on this full snapshot, "
"they will also be deleted from the local source node. On the next successful "
"full backup shipping, LINSTOR will delete the second full backup snapshot "
"and any incremental snapshots based upon it, and so on, with each successive "
"backup shipping."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2528
msgid ""
"If there are local snapshots remaining from failed shipments, these will be "
"deleted first, even if they were created later."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2534
msgid ""
"If you have enabled a backup shipping schedule and then later manually "
"delete a LINSTOR snapshot, LINSTOR may not be able to delete everything it "
"was supposed to. For example, if you delete a full backup snapshot "
"definition, on a later full backup scheduled shipping, there may be "
"incremental snapshots based on the manually deleted full backup snapshot "
"that will not be deleted."
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:2536
#, no-wrap
msgid "Configuring the Keep-remote Option"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2548
msgid ""
"As mentioned in the callouts for the example `linstor schedule create` "
"command above, the `keep-remote` option only works for S3 remote "
"destinations. Here is an example of how the option works. If a `--keep-"
"remote=2` option is set, then the backup shipping schedule, on first run, "
"will make a snapshot for a full backup and ship it to the remote "
"destination. On the next scheduled full backup shipping, a second snapshot "
"is made and a full backup shipped to the remote destination. On the next "
"scheduled full backup shipping, a third snapshot is made and a full backup "
"shipped to the remote destination. This time, additionally, after the third "
"snapshot successfully ships, the first full backup is deleted from the "
"remote destination. If any incremental backups were scheduled and made "
"between the full backups, any that were made from the first full backup "
"would be deleted along with the full backup."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2551
msgid ""
"This option only deletes backups at the remote destination. It does not "
"delete snapshots that the full backups were based upon at the local source "
"node."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2553
#, no-wrap
msgid "Listing a Backup Shipping Schedule"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2556
msgid ""
"You can list your backup shipping schedules by using the `linstor schedule "
"list` command."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2558
msgid "For example:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2566
#, no-wrap
msgid ""
"# linstor schedule list\n"
"╭──────────────────────────────────────────────────────────────────────────────────────╮\n"
"┊ Name                ┊ Full        ┊ Incremental ┊ KeepLocal ┊ KeepRemote ┊ OnFailure ┊\n"
"╞══════════════════════════════════════════════════════════════════════════════════════╡\n"
"┊ my-bu-schedule      ┊ 2 * * * *   ┊             ┊ 3         ┊ 2          ┊ SKIP      ┊\n"
"╰──────────────────────────────────────────────────────────────────────────────────────╯\n"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2569
#, no-wrap
msgid "Deleting a Backup Shipping Schedule"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2576
msgid ""
"The LINSTOR client `schedule delete` command completely deletes a backup "
"shipping schedule LINSTOR object. The command's only argument is the "
"schedule name that you want to delete. If the deleted schedule is currently "
"creating or shipping a backup, the scheduled shipping process is stopped. "
"Depending on at which point the process stops, a snapshot, or a backup, or "
"both, might not be created and shipped."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2579
msgid ""
"This command does not affect previously created snapshots or successfully "
"shipped backups. These will be retained until they are manually deleted."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2581
#, no-wrap
msgid "Enabling Scheduled Backup Shipping"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2585
msgid ""
"You can use the LINSTOR client `backup schedule enable` command to enable a "
"previously created backup shipping schedule. The command has the following "
"syntax:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2593
#, no-wrap
msgid ""
"# linstor backup schedule enable \\\n"
"  [--node __source_node__] \\ <1>\n"
"  [--rg __resource_group_name__ | --rd __resource_definition_name__] \\ <2>\n"
"  __remote_name__ \\ <3>\n"
"  __schedule_name__ <4>\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2598
msgid ""
"This is a special option that allows you to specify the controller node that "
"will be used as a source for scheduled backup shipments, if possible. If you "
"omit this option from the command, then LINSTOR will choose a source node at "
"the time a scheduled shipping is made. [OPTIONAL]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2603
msgid ""
"You can set here either the resource group or the resource definition (but "
"not both) that you want to enable the backup shipping schedule for. If you "
"omit this option from the command, then the command enables scheduled backup "
"shipping for all deployed LINSTOR resources that can make snapshots. "
"[OPTIONAL]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2605
msgid ""
"The name of the remote destination that you want to ship backups to. "
"[REQUIRED]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2607
msgid "The name of a previously created backup shipping schedule. [REQUIRED]"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2609
#, no-wrap
msgid "Disabling a Backup Shipping Schedule"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2613
msgid ""
"To disable a previously enabled backup shipping schedule, you use the "
"LINSTOR client `backup schedule disable` command. The command has the "
"following syntax:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2620
#, no-wrap
msgid ""
"# linstor backup schedule disable \\\n"
"  [--rg __resource_group_name__ | --rd __resource_definition_name__] \\\n"
"  __remote_name__ \\ <3>\n"
"  __schedule_name__ <4>\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2625
msgid ""
"If you include the option specifying either a resource group or resource "
"definition, as described in the `backup schedule enable` command example "
"above, then you disable the schedule only for that resource group or "
"resource definition."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2632
msgid ""
"For example, if you omitted specifying a resource group or resource "
"definition in an earlier `backup schedule enable` command, LINSTOR would "
"schedule backup shipping for all its deployed resources that can make "
"snapshots. Your disable command would then only affect the resource group or "
"resource definition that you specify with the command. The backup shipping "
"schedule would still apply to any deployed LINSTOR resources besides the "
"specified resource group or resource definition."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2636
msgid ""
"The same as for the `backup schedule enable` command, if you specify neither "
"a resource group nor a resource definition, then LINSTOR disables the backup "
"shipping schedule at the controller level for all deployed LINSTOR resources."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2638
#, no-wrap
msgid "Deleting Aspects of a Backup Shipping Schedule"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2645
msgid ""
"You can use the `linstor backup schedule delete` command to granularly "
"delete either a specified resource definition or a resource group from a "
"backup shipping schedule, without deleting the schedule itself. This command "
"has the same syntax and arguments as the `backup schedule disable` command. "
"If you specify neither a resource group nor a resource definition, the "
"backup shipping schedule you specify will be deleted at the controller level."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2649
msgid ""
"It may be helpful to think about the `backup schedule delete` command as a "
"way that you can *remove* a backup shipping schedule-remote pair from a "
"specified LINSTOR object level, either a resource definition, a resource "
"group, or at the controller level if neither is specified."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2653
msgid ""
"The `backup schedule delete` command does not affect previously created "
"snapshots or successfully shipped backups. These will be retained until they "
"are manually deleted, or until they are removed by the effects of a still "
"applicable keep-local or keep-remote option."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2657
msgid ""
"You might want to use this command when you have disabled a backup schedule "
"for multiple LINSTOR object levels and later want to affect a granular "
"change, where a `backup schedule enable` command might have unintended "
"consequences."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2664
msgid ""
"For example, consider a scenario where you have a backup schedule-remote "
"pair that you enabled at a controller level. This controller has a resource "
"group, _myresgroup_ that has several resource definitions, _resdef1_ through "
"_resdef9_, under it. For maintenance reasons perhaps, you disable the "
"schedule for two resource definitions, _resdef1_ and _resdef2_. You then "
"realize that further maintenance requires that you disable the backup "
"shipping schedule at the resource group level, for your _myresgroup_ "
"resource group."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2674
msgid ""
"After completing some maintenance, you are able to enable the backup "
"shipping schedule for _resdef3_ through _resdef9_, but you are not yet ready "
"to resume (enable) backup shipping for _resdef1_ and _resdef2_. You can "
"enable backup shipping for each resource definition individually, _resdef3_ "
"through _resdef9_, or you can use the `backup schedule delete` command to "
"delete the backup shipping schedule from the resource group, _myresgroup_. "
"If you use the `backup schedule delete` command, backups of _resdef3_ "
"through _resdef9_ will ship again because the backup shipping schedule is "
"enabled at the controller level, but _resdef1_ and _resdef2_ will not ship "
"because the backup shipping schedule is still disabled for them at the "
"resource definition level."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2681
msgid ""
"When you complete your maintenance and are again ready to ship backups for "
"_resdef1_ and _resdef2_, you can delete the backup shipping schedule for "
"those two resource definitions to return to your starting state: backup "
"shipping scheduled for all LINSTOR deployed resources at the controller "
"level. To visualize this it may be helpful to refer to the decision tree "
"diagram for how LINSTOR decides whether or not to ship a backup in the <<s-"
"linstor-how-controller-determines-backup-shipping>> subsection."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2693
msgid ""
"In the example scenario above, you might have enabled backup shipping on the "
"resource group, after completing some maintenance. In this case, backup "
"shipping would resume for resource definitions _resdef3_ through _resdef9_ "
"but continue not to ship for resource definitions _resdef1_ and _resdef2_ "
"because backup shipping was still disabled for those resource definitions. "
"After you completed all maintenance, you could delete the backup shipping "
"schedule on _resdef1_ and _resdef2_. Then all of your resource definitions "
"would be shipping backups, as they were prior to your maintenance, because "
"the schedule-remote pair was enabled at the resource group level. However, "
"this would remove your option to globally stop all scheduled shipping at "
"some later point in time at the controller level because the enabled "
"schedule at the resource group level would override any `schedule disable` "
"command applied at the controller level."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2695
#, no-wrap
msgid "Listing Backup Shipping Schedules by Resource"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2701
msgid ""
"You can list backup schedules by resource, using the LINSTOR client "
"`schedule list-by-resource` command. This command will show LINSTOR "
"resources and how any backup shipping schedules apply and to which remotes "
"they are being shipped. If resources are not being shipped then the command "
"will show:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2703
msgid "Whether resources have no schedule-remote-pair entries (empty cells)"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2705
msgid ""
"Whether they have schedule-remote-pair entries but they are disabled "
"(\"disabled\")"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2708
msgid ""
"Whether they have no resources, so no backup shipments can be made, "
"regardless of whether any schedule-remote-pair entries are enabled or not "
"(\"undeployed\")"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2714
msgid ""
"If resources have schedule-remote-pairs and are being shipped, the command "
"output will show when the last backup was shipped and when the next backup "
"is scheduled to ship. It will also show whether the next and last backup "
"shipments were full or incremental backups. Finally, the command will show "
"when the next planned incremental (if any) and full backup shipping will "
"occur."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2716
msgid ""
"You can use the `--active-only` flag with the `schedule list-by-resource` "
"command to filter out all resources that are not being shipped."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2718
#, no-wrap
msgid "How the LINSTOR Controller Determines Scheduled Backup Shipping"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2722
msgid ""
"To determine if the LINSTOR Controller will ship a deployed LINSTOR resource "
"with a certain backup schedule for a given remote destination, the LINSTOR "
"Controller uses the following logic:"
msgstr ""

#. type: Target for macro image
#: UG9/en/linstor-administration.adoc:2723
#, no-wrap
msgid "images/linstor-controller-backup-schedule-decision-flowchart.svg"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2726
msgid ""
"As the diagram shows, enabled or disabled backup shipping schedules have "
"effect in the following order:"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2728
msgid "Resource definition level"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2730
msgid "Resource group level"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2732
msgid "Controller level"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2734
msgid ""
"A backup shipping schedule-remote pair that is enabled or disabled at a "
"preceding level will override the enabled or disabled status for the same "
"schedule-remote pair at a later level."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2736
#, no-wrap
msgid "Determining How Scheduled Backup Shipping Affects a Resource"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2740
msgid ""
"To determine how a LINSTOR resource will be affected by scheduled backup "
"shipping, you can use the LINSTOR client `schedule list-by-resource-details` "
"command for a specified LINSTOR resource."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2743
msgid ""
"The command will output a table that shows on what LINSTOR object level a "
"backup shipping schedule is either not set (empty cell), enabled, or "
"disabled."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2746
msgid ""
"By using this command, you can determine on which level you need to make a "
"change to enable, disable, or delete scheduled backup shipping for a "
"resource."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2748
msgid "Example output could look like this:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2761
#, no-wrap
msgid ""
"# linstor schedule list-by-resource-details __my_linstor_resource_name__\n"
"╭───────────────────────────────────────────────────────────────────────────╮\n"
"┊ Remote   ┊ Schedule   ┊ Resource-Definition ┊ Resource-Group ┊ Controller ┊\n"
"╞═══════════════════════════════════════════════════════════════════════════╡\n"
"┊ rem1     ┊ sch1       ┊ Disabled            ┊                ┊ Enabled    ┊\n"
"┊ rem1     ┊ sch2       ┊                     ┊ Enabled        ┊            ┊\n"
"┊ rem2     ┊ sch1       ┊ Enabled             ┊                ┊            ┊\n"
"┊ rem2     ┊ sch5       ┊                     ┊ Enabled        ┊            ┊\n"
"┊ rem3     ┊ sch4       ┊                     ┊ Disabled       ┊ Enabled    ┊\n"
"╰───────────────────────────────────────────────────────────────────────────╯\n"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:2764
#, no-wrap
msgid "Setting DRBD Options for LINSTOR Objects"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2769
msgid ""
"You can use LINSTOR commands to set DRBD options. Configurations in files "
"that are not managed by LINSTOR, such as `/etc/drbd.d/global_common.conf`, "
"will be ignored. The syntax for this command is generally:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2772
#, no-wrap
msgid "# linstor <LINSTOR_object> drbd-options --<DRBD_option> <value> <LINSTOR_object_identifiers>\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2776
msgid ""
"In the syntax above, `<LINSTOR_ object_identifiers>` is a placeholder for "
"identifiers such as a node name, node names, or a resource name, or a "
"combination of these identifiers."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2779
msgid ""
"For example, to set the DRBD replication protocol for a resource definition "
"named `backups`, enter:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2782
#, no-wrap
msgid "# linstor resource-definition drbd-options --protocol C backups\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2786
msgid ""
"You can enter a LINSTOR object along with `drbd-options` and the `--help`, "
"or `-h`, flag to show the command usage, available options, and the default "
"value for each option. For example:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2789
#, no-wrap
msgid "# linstor controller drbd-options -h\n"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2792
#, no-wrap
msgid "Setting DRBD Peer Options for LINSTOR Resources or Resource Connections"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2799
msgid ""
"The LINSTOR resource object is an exception to the general syntax for "
"setting DRBD options for LINSTOR objects. With the LINSTOR resource object, "
"you can use the `drbd-peer-options` to set DRBD options at the connection "
"level between the two nodes that you specify. Specifying `drbd-peer-options` "
"for a LINSTOR resource object between two nodes is equivalent to using "
"the`linstor resource-connection drbd-peer-options` for a resource between "
"two nodes."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2802
msgid ""
"For example, to set the DRBD maximum buffer size to 8192 at a connection "
"level, for a resource named `backups`, between two nodes, `node-0` and "
"`node-1`, enter:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2805
#, no-wrap
msgid "# linstor resource drbd-peer-options --max-buffers 8192 node-0 node-1 backups\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2808
msgid "The command above is equivalent to the following:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2811
#, no-wrap
msgid "# linstor resource-connection drbd-peer-options --max-buffers 8192 node-0 node-1 backups\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2815
msgid ""
"Indeed, when using the `linstor --curl` command to examine the two commands "
"actions on the LINSTOR REST API, the output is identical:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2819
#, no-wrap
msgid ""
"# linstor --curl resource drbd-peer-options --max-buffers 8192 node-0 node-1 backups\n"
"curl -X PUT -H \"Content-Type: application/json\" -d '{\"override_props\": {\"DrbdOptions/Net/max-buffers\": \"8192\"}}' http://localhost:3370/v1/resource-definitions/backups/resource-connections/node-0/node-1\n"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2822
#, no-wrap
msgid ""
"# linstor --curl resource-connection drbd-peer-options --max-buffers 8192 node-0 node-1 backups\n"
"curl -X PUT -H \"Content-Type: application/json\" -d '{\"override_props\": {\"DrbdOptions/Net/max-buffers\": \"8192\"}}' http://localhost:3370/v1/resource-definitions/backups/resource-connections/node-0/node-1\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2826
msgid ""
"The connection section of the LINSTOR-generated resource file `backups.res` "
"on `node-0` will look something like this:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2844
#, no-wrap
msgid ""
"connection {\n"
"        _peer_node_id 1;\n"
"        path {\n"
"            _this_host ipv4 192.168.222.10:7000;\n"
"            _remote_host ipv4 192.168.222.11:7000;\n"
"        }\n"
"        path {\n"
"            _this_host ipv4 192.168.121.46:7000;\n"
"            _remote_host ipv4 192.168.121.220:7000;\n"
"        }\n"
"        net {\n"
"\t\t\t[...]\n"
"            max-buffers         8192;\n"
"            _name               \"node-1\";\n"
"        }\n"
"    }\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2848
msgid ""
"If there are multiple paths between the two nodes, as in the example above, "
"DRBD options that you set using the `resource drbd-peer-options` command "
"will apply to all of them."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2850
#, no-wrap
msgid "Setting DRBD Options for Node Connections"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2854
msgid ""
"You can use the `drbd-peer-options` argument to set DRBD options at a "
"connection level, between two nodes, for example:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:2857
#, no-wrap
msgid "# linstor node-connection drbd-peer-options --ping-timeout 299 node-0 node-1\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2861
msgid ""
"The preceding command would set the DRBD `ping-timeout` option to 29.9 "
"seconds at a connection level between two nodes, `node-0` and `node-1`."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2863
#, no-wrap
msgid "Verifying Options for LINSTOR Objects"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:2867
msgid ""
"You can verify a LINSTOR object's set properties by using the `list-"
"properties` command, for example:"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2875
#, no-wrap
msgid ""
"# linstor resource-definition list-properties backups\n"
"+------------------------------------------------------+\n"
"| Key                               | Value            |\n"
"| DrbdOptions/Net/protocol          | C                |\n"
"[...]\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2878
msgid "[[s-linstor-unset-opts]]"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2878
#, no-wrap
msgid "Removing DRBD Options from LINSTOR Objects"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2883
#, no-wrap
msgid ""
"To remove a previously set DRBD option, prefix the option name with `unset-`. For\n"
"example:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2885
#, no-wrap
msgid ""
"# linstor resource-definition drbd-options --unset-protocol backups\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2890
#, no-wrap
msgid ""
"The same syntax applies to any `drbd-peer-options` set either on a LINSTOR resource, resource\n"
"connection, or node connection. For example:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2892
#, no-wrap
msgid ""
"# linstor resource-connection drbd-peer-options --unset-max-buffers node-0 node-1 backups\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2900
msgid ""
"Removing a DRBD option or DRBD peer option will return the option to its "
"default value. Refer to the `linstor <LINSTOR_object> drbd-options --help` "
"(or `drbd-peer-options --help`) command output for the default values of "
"options. You can also refer to the `drbd.conf-9.0` man page to get "
"information about DRBD options.  [[s-linstor-toggle-disk]]"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:2900
#, no-wrap
msgid "Adding and Removing Disks"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2908
#, no-wrap
msgid ""
"LINSTOR can convert resources between diskless and having a disk.\n"
"This is achieved with the `resource toggle-disk` command,\n"
"which has syntax similar to `resource create`.\n"
"\n"
"For instance, add a disk to the diskless resource `backups` on 'alpha':\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2910
#, no-wrap
msgid ""
"# linstor resource toggle-disk alpha backups --storage-pool pool_ssd\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2914
#, no-wrap
msgid ""
"Remove this disk again:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2916
#, no-wrap
msgid ""
"# linstor resource toggle-disk alpha backups --diskless\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2919
msgid "[[s-linstor-migrate-disk]]"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2919
#, no-wrap
msgid "Migrating Disks Between Nodes"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2930
#, no-wrap
msgid ""
"To move a resource between nodes without reducing redundancy at any point,\n"
"LINSTOR's disk migrate feature can be used.\n"
"First create a diskless resource on the target node,\n"
"and then add a disk using the `--migrate-from` option.\n"
"This will wait until the data has been synced to the new disk and then remove\n"
"the source disk.\n"
"\n"
"For example, to migrate a resource `backups` from 'alpha' to 'bravo':\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2933
#, no-wrap
msgid ""
"# linstor resource create bravo backups --drbd-diskless\n"
"# linstor resource toggle-disk bravo backups --storage-pool pool_ssd --migrate-from alpha\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2936
msgid "[[s-linstor-proxy]]"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2947
#, no-wrap
msgid ""
"LINSTOR expects DRBD Proxy to be running on the nodes which are involved in the\n"
"relevant connections. It does not currently support connections through DRBD Proxy\n"
"on a separate node.\n"
"\n"
"Suppose our cluster consists of nodes 'alpha' and 'bravo' in a local network\n"
"and 'charlie' at a remote site, with a resource definition named `backups`\n"
"deployed to each of the nodes. Then DRBD Proxy can be enabled for the\n"
"connections to 'charlie' as follows:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2950
#, no-wrap
msgid ""
"# linstor drbd-proxy enable alpha charlie backups\n"
"# linstor drbd-proxy enable bravo charlie backups\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2954
#, no-wrap
msgid ""
"The DRBD Proxy configuration can be tailored with commands such as:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2957
#, no-wrap
msgid ""
"# linstor drbd-proxy options backups --memlimit 100000000\n"
"# linstor drbd-proxy compression zlib backups --level 9\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2963
#, no-wrap
msgid ""
"LINSTOR does not automatically optimize the DRBD configuration for\n"
"long-distance replication, so you will probably want to set some configuration\n"
"options such as the protocol:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2966
#, no-wrap
msgid ""
"# linstor resource-connection drbd-options alpha charlie backups --protocol A\n"
"# linstor resource-connection drbd-options bravo charlie backups --protocol A\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2970
msgid "Please contact LINBIT for assistance optimizing your configuration."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:2970
#, no-wrap
msgid "Automatically Enabling DRBD Proxy"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2976
#, no-wrap
msgid ""
"LINSTOR can also be configured to automatically enable the above mentioned Proxy\n"
"connection between two nodes. For this automation, LINSTOR first needs to know\n"
"on which site each node is.\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2980
#, no-wrap
msgid ""
"# linstor node set-property alpha Site A\n"
"# linstor node set-property bravo Site A\n"
"# linstor node set-property charlie Site B\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2985
#, no-wrap
msgid ""
"As the `Site` property might also be used for other site-based decisions in\n"
"future features, the `DrbdProxy/AutoEnable` also has to be set to `true`:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2987
#, no-wrap
msgid ""
"# linstor controller set-property DrbdProxy/AutoEnable true\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:2999
msgid ""
"This property can also be set on node, resource-definition, resource and "
"resource-connection level (from left to right in increasing priority, "
"whereas the controller is the left-most, that is, the least prioritized "
"level).  Once this initialization steps are completed, every newly created "
"resource will automatically check if it has to enable DRBD proxy to any of "
"its peer-resources.  [[s-linstor-external-database]]"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:2999
#, no-wrap
msgid "External Database Providers"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3010
msgid ""
"It is possible to have LINSTOR working with an external database provider "
"like PostgreSQL, MariaDB and since version 1.1.0 even etcd key value store "
"is supported.  To use an external database there are a few additional steps "
"to configure.  You have to create a DB/Schema and user to use for linstor, "
"and configure this in the `/etc/linstor/linstor.toml`.  [[s-postgresql]]"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3010
#, no-wrap
msgid "PostgreSQL"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3014
#, no-wrap
msgid ""
"A sample PostgreSQL `linstor.toml` looks like this:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3019
#, no-wrap
msgid ""
"[db]\n"
"user = \"linstor\"\n"
"password = \"linstor\"\n"
"connection_url = \"jdbc:postgresql://localhost/linstor\"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3022
msgid "[[s-mariadb_mysql]]"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3022
#, no-wrap
msgid "MariaDB and MySQL"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3026
#, no-wrap
msgid ""
"A sample MariaDB `linstor.toml` looks like this:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3031
#, no-wrap
msgid ""
"[db]\n"
"user = \"linstor\"\n"
"password = \"linstor\"\n"
"connection_url = \"jdbc:mariadb://localhost/LINSTOR?createDatabaseIfNotExist=true\"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3036
msgid ""
"NOTE: The LINSTOR schema/database is created as `LINSTOR` so verify that the "
"MariaDB connection string refers to the `LINSTOR` schema, as in the example "
"above.  [[s-etcd]]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3036
#: UG9/en/linstor-kubernetes-upgrade-guide.adoc:59
#, no-wrap
msgid "etcd"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3046
#, no-wrap
msgid ""
"etcd is a distributed key-value store that makes it easy to keep your LINSTOR database distributed in a HA-setup.\n"
"The etcd driver is already included in the LINSTOR-controller package and only needs to be configured in the `linstor.toml`.\n"
"\n"
"More information about how to install and configure etcd can be found here:\n"
"https://etcd.io/docs[etcd docs]\n"
"\n"
"And here is a sample [db] section from the `linstor.toml`:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3064
#, no-wrap
msgid ""
"[db]\n"
"## only set user/password if you want to use authentication, only since LINSTOR 1.2.1\n"
"# user = \"linstor\"\n"
"# password = \"linstor\"\n"
"\n"
"## for etcd\n"
"## do not set user field if no authentication required\n"
"connection_url = \"etcd://etcdhost1:2379,etcdhost2:2379,etcdhost3:2379\"\n"
"\n"
"## if you want to use TLS, only since LINSTOR 1.2.1\n"
"# ca_certificate = \"ca.pem\"\n"
"# client_certificate = \"client.pem\"\n"
"\n"
"## if you want to use client TLS authentication too, only since LINSTOR 1.2.1\n"
"# client_key_pkcs8_pem = \"client-key.pkcs8\"\n"
"## set client_key_password if private key has a password\n"
"# client_key_password = \"mysecret\"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3067
msgid "[[s-linstor-controller-config]]"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:3067
#, no-wrap
msgid "Configuring the LINSTOR Controller"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3075
msgid ""
"The LINSTOR Controller has a configuration file that is and has to be placed "
"into the following path: `/etc/linstor/linstor.toml`.  A recent "
"configuration example can be found here: https://github.com/LINBIT/linstor-"
"server/blob/master/docs/linstor.toml-example[linstor.toml-example] [[s-"
"linstor-rest-api]]"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3075
#, no-wrap
msgid "LINSTOR REST API"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3081
#, no-wrap
msgid ""
"To make LINSTOR's administrative tasks more accessible and also available for web-frontends a\n"
"REST API has been created. The REST API is embedded in the linstor-controller\n"
"and since LINSTOR 0.9.13 configured through the `linstor.toml` configuration file.\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3086
#, no-wrap
msgid ""
"[http]\n"
"  enabled = true\n"
"  port = 3370\n"
"  listen_addr = \"127.0.0.1\"  # to disable remote access\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3093
msgid ""
"If you want to use the REST API the current documentation can be found on "
"the following link: https://app.swaggerhub.com/apis-docs/Linstor/Linstor/ "
"[[s-linstor-rest-api-https]]"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3093
#, no-wrap
msgid "LINSTOR REST API HTTPS"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3102
#, no-wrap
msgid ""
"The HTTP REST API can also run secured by HTTPS and is highly recommended if you use any features that\n"
"require authorization. To do so you have to create a Java keystore file with a valid certificate\n"
"that will be used to encrypt all HTTPS traffic.\n"
"\n"
"Here is a simple example on how you can create a self signed certificate with the `keytool` that is included\n"
"in the Java Runtime:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3106
#, no-wrap
msgid ""
"keytool -keyalg rsa -keysize 2048 -genkey -keystore ./keystore_linstor.jks\\\n"
" -alias linstor_controller\\\n"
" -dname \"CN=localhost, OU=SecureUnit, O=ExampleOrg, L=Vienna, ST=Austria, C=AT\"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3112
#, no-wrap
msgid ""
"`keytool` will ask for a password to secure the generated keystore file and is needed for the\n"
"LINSTOR Controller configuration.\n"
"In your `linstor.toml` file you have to add the following section:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3116
#, no-wrap
msgid ""
"[https]\n"
"  keystore = \"/path/to/keystore_linstor.jks\"\n"
"  keystore_password = \"linstor\"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3128
msgid ""
"Now (re)start the `linstor-controller` and the HTTPS REST API should be "
"available on port 3371.  More information about how to import other "
"certificates can be found here: https://docs.oracle.com/javase/8/docs/"
"technotes/tools/unix/keytool.html NOTE: When HTTPS is enabled, all requests "
"to the HTTP /v1/ REST API will be redirected to the HTTPS redirect.  [[s-"
"rest-api-https-restricted-client]]"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:3128
#, no-wrap
msgid "LINSTOR REST API HTTPS Restricted Client Access"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3136
#, no-wrap
msgid ""
"Client access can be restricted by using a SSL/TLS truststore on the Controller.\n"
"Basically you create a certificate for your client and add it to your truststore and the client\n"
"then uses this certificate for authentication.\n"
"\n"
"First create a client certificate:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3141
#, no-wrap
msgid ""
"keytool -keyalg rsa -keysize 2048 -genkey -keystore client.jks\\\n"
" -storepass linstor -keypass linstor\\\n"
" -alias client1\\\n"
" -dname \"CN=Client Cert, OU=client, O=Example, L=Vienna, ST=Austria, C=AT\"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3145
#, no-wrap
msgid ""
"Then we import this certificate to our controller truststore:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3149
#, no-wrap
msgid ""
"keytool -importkeystore\\\n"
" -srcstorepass linstor -deststorepass linstor -keypass linstor\\\n"
" -srckeystore client.jks -destkeystore trustore_client.jks\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3153
#, no-wrap
msgid ""
"And enable the truststore in the `linstor.toml` configuration file:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3159
#, no-wrap
msgid ""
"[https]\n"
"  keystore = \"/path/to/keystore_linstor.jks\"\n"
"  keystore_password = \"linstor\"\n"
"  truststore = \"/path/to/trustore_client.jks\"\n"
"  truststore_password = \"linstor\"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3167
#, no-wrap
msgid ""
"Now restart the Controller and it will no longer be possible to access the controller API without a\n"
"correct certificate.\n"
"\n"
"The LINSTOR client needs the certificate in PEM format, so before we can use it we have to convert\n"
"the java keystore certificate to the PEM format.\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3175
#, no-wrap
msgid ""
"# Convert to pkcs12\n"
"keytool -importkeystore -srckeystore client.jks -destkeystore client.p12\\\n"
" -storepass linstor -keypass linstor\\\n"
" -srcalias client1 -srcstoretype jks -deststoretype pkcs12\n"
"\n"
"# use openssl to convert to PEM\n"
"openssl pkcs12 -in client.p12 -out client_with_pass.pem\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3179
#, no-wrap
msgid ""
"To avoid entering the PEM file password all the time it might be convenient to remove the password.\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3182
#, no-wrap
msgid ""
"openssl rsa -in client_with_pass.pem -out client1.pem\n"
"openssl x509 -in client_with_pass.pem >> client1.pem\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3186
#, no-wrap
msgid ""
"Now this PEM file can easily be used in the client:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3188
#, no-wrap
msgid ""
"linstor --certfile client1.pem node list\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3195
msgid ""
"The `--certfile` parameter can also added to the client configuration file, "
"see <<s-using_the_linstor_client>> for more details.  [[s-linstor-satellite-"
"config]]"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:3195
#, no-wrap
msgid "Configuring LINSTOR Satellite"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3203
msgid ""
"The LINSTOR Satellite software has an optional configuration file that uses "
"the TOML file syntax and has to be put into the following path `/etc/linstor/"
"linstor_satellite.toml`.  A recent configuration example can be found here: "
"https://github.com/LINBIT/linstor-server/blob/master/docs/linstor_satellite."
"toml-example[linstor_satellite.toml-example] [[s-linstor-logging]]"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:3203
#, no-wrap
msgid "Logging"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3212
#, no-wrap
msgid ""
"LINSTOR uses https://www.slf4j.org/[SLF4J] with https://logback.qos.ch/[Logback] as binding. This gives\n"
"LINSTOR the possibility to distinguish between the log levels `ERROR`, `WARN`, `INFO`, `DEBUG` and `TRACE`\n"
"(in order of increasing verbosity). The following are\n"
"the different ways that you can set the logging level, ordered by priority (first has highest priority):\n"
"\n"
". Since LINSTOR *client* version 1.20.1, you can use the command `controller set-log-level` to change the log level used by LINSTOR's running configuration. Various arguments can be used with this command. Refer to the command's `--help` text for details. For example, to set the log level to `TRACE` on the LINSTOR controller and all satellites, enter the following command:\n"
"+\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3214
#, no-wrap
msgid ""
"$ linstor controller set-log-level --global TRACE\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3222
#, no-wrap
msgid ""
"+\n"
"To change the LINSTOR log level on a particular node, you can use the LINSTOR client (since version 1.20.1) command `node set-log-level`.\n"
"+\n"
"NOTE: Changes that you make to the log level by using the LINSTOR client will not persist LINSTOR service restarts, for example, if a node reboots.\n"
"\n"
". `TRACE` mode can be `enabled` or `disabled` using the debug console:\n"
"+\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3226
#, no-wrap
msgid ""
"Command ==> SetTrcMode MODE(enabled)\n"
"SetTrcMode           Set TRACE level logging mode\n"
"New TRACE level logging mode: ENABLED\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3230
#, no-wrap
msgid ""
". When starting the controller or satellite a command line argument can be passed:\n"
"+\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3233
#, no-wrap
msgid ""
"java ... com.linbit.linstor.core.Controller ... --log-level TRACE\n"
"java ... com.linbit.linstor.core.Satellite  ... --log-level TRACE\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3240
#, no-wrap
msgid ""
". The recommended place is the `logging` section in the configuration file.\n"
"The default configuration file location is `/etc/linstor/linstor.toml` for the controller\n"
"and `/etc/linstor/linstor_satellite.toml` for the satellite.\n"
"Configure the logging level as follows:\n"
"+\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3243
#, no-wrap
msgid ""
"[logging]\n"
"   level=\"TRACE\"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3249
#, no-wrap
msgid ""
". As LINSTOR is using Logback as an implementation, `/usr/share/linstor-server/lib/logback.xml` can\n"
"also be used. Currently only this approach supports different log levels for different components, like\n"
"shown in the example below:\n"
"+\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3291
#, no-wrap
msgid ""
"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n"
"<configuration scan=\"false\" scanPeriod=\"60 seconds\">\n"
"<!--\n"
" Values for scanPeriod can be specified in units of milliseconds, seconds, minutes or hours\n"
" https://logback.qos.ch/manual/configuration.html\n"
"-->\n"
" <appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\">\n"
"   <!-- encoders are assigned the type\n"
"        ch.qos.logback.classic.encoder.PatternLayoutEncoder by default -->\n"
"   <encoder>\n"
"     <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger - %msg%n</pattern>\n"
"   </encoder>\n"
" </appender>\n"
" <appender name=\"FILE\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n"
"   <file>${log.directory}/linstor-${log.module}.log</file>\n"
"   <append>true</append>\n"
"   <encoder class=\"ch.qos.logback.classic.encoder.PatternLayoutEncoder\">\n"
"     <Pattern>%d{yyyy_MM_dd HH:mm:ss.SSS} [%thread] %-5level %logger - %msg%n</Pattern>\n"
"   </encoder>\n"
"   <rollingPolicy class=\"ch.qos.logback.core.rolling.FixedWindowRollingPolicy\">\n"
"     <FileNamePattern>logs/linstor-${log.module}.%i.log.zip</FileNamePattern>\n"
"     <MinIndex>1</MinIndex>\n"
"     <MaxIndex>10</MaxIndex>\n"
"   </rollingPolicy>\n"
"   <triggeringPolicy class=\"ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy\">\n"
"     <MaxFileSize>2MB</MaxFileSize>\n"
"   </triggeringPolicy>\n"
" </appender>\n"
" <logger name=\"LINSTOR/Controller\" level=\"TRACE\" additivity=\"false\">\n"
"   <appender-ref ref=\"STDOUT\" />\n"
"   <!-- <appender-ref ref=\"FILE\" /> -->\n"
" </logger>\n"
" <logger name=\"LINSTOR/Satellite\" level=\"TRACE\" additivity=\"false\">\n"
"   <appender-ref ref=\"STDOUT\" />\n"
"   <!-- <appender-ref ref=\"FILE\" /> -->\n"
" </logger>\n"
" <root level=\"WARN\">\n"
"   <appender-ref ref=\"STDOUT\" />\n"
"   <!-- <appender-ref ref=\"FILE\" /> -->\n"
" </root>\n"
"</configuration>\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3298
msgid ""
"See the https://logback.qos.ch/manual/index.html[Logback Manual] to find "
"more details about `logback.xml`.  When none of the configuration methods "
"above is used LINSTOR will default to `INFO` log level.  [[s-linstor-"
"monitoring]]"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:3298
#, no-wrap
msgid "Monitoring"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3311
#, no-wrap
msgid ""
"Since LINSTOR 1.8.0, a https://prometheus.io/[Prometheus] `/metrics` HTTP path is provided with LINSTOR and JVM specific\n"
"exports.\n"
"\n"
"The `/metrics` path also supports three GET arguments to reduce LINSTOR's reported data:\n"
"\n"
" * resource\n"
" * storage_pools\n"
" * error_reports\n"
"\n"
"These all default to `true`. To disable, for example error report data: `http://localhost:3370/metrics?error_reports=false`\n"
"\n"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3311
#, no-wrap
msgid "Health Checking"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3317
msgid ""
"The LINSTOR-Controller also provides a `/health` HTTP path that will simply "
"return HTTP-Status 200 if the controller can access its database and all "
"services are up and running. Otherwise it will return HTTP error status code "
"500 `Internal Server Error`.  [[s-linstor-secure-connections]]"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:3317
#, no-wrap
msgid "Secure Satellite Connections"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3332
#, no-wrap
msgid ""
"It is possible to have the LINSTOR use SSL/TLS secure TCP connection between controller and satellite connections.\n"
"Without going into further details on how Java's SSL/TLS engine works we will give you\n"
"command line snippets using the `keytool` from Java's runtime environment on how to configure\n"
"a three node setup using secure connections.\n"
"\n"
"The node setup looks like this:\n"
"\n"
"Node `alpha` is the just the controller.\n"
"Node `bravo` and node `charlie` are just satellites.\n"
"\n"
"Here are the commands to generate such a keystore setup,\n"
"values should of course be edited for your environment.\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3403
#, no-wrap
msgid ""
"# create directories to hold the key files\n"
"mkdir -p /tmp/linstor-ssl\n"
"cd /tmp/linstor-ssl\n"
"mkdir alpha bravo charlie\n"
"\n"
"\n"
"# create private keys for all nodes\n"
"keytool -keyalg rsa -keysize 2048 -genkey -keystore alpha/keystore.jks\\\n"
" -storepass linstor -keypass linstor\\\n"
" -alias alpha\\\n"
" -dname \"CN=Max Mustermann, OU=alpha, O=Example, L=Vienna, ST=Austria, C=AT\"\n"
"\n"
"keytool -keyalg rsa -keysize 2048 -genkey -keystore bravo/keystore.jks\\\n"
" -storepass linstor -keypass linstor\\\n"
" -alias bravo\\\n"
" -dname \"CN=Max Mustermann, OU=bravo, O=Example, L=Vienna, ST=Austria, C=AT\"\n"
"\n"
"keytool -keyalg rsa -keysize 2048 -genkey -keystore charlie/keystore.jks\\\n"
" -storepass linstor -keypass linstor\\\n"
" -alias charlie\\\n"
" -dname \"CN=Max Mustermann, OU=charlie, O=Example, L=Vienna, ST=Austria, C=AT\"\n"
"\n"
"# import truststore certificates for alpha (needs all satellite certificates)\n"
"keytool -importkeystore\\\n"
" -srcstorepass linstor -deststorepass linstor -keypass linstor\\\n"
" -srckeystore bravo/keystore.jks -destkeystore alpha/certificates.jks\n"
"\n"
"keytool -importkeystore\\\n"
" -srcstorepass linstor -deststorepass linstor -keypass linstor\\\n"
" -srckeystore charlie/keystore.jks -destkeystore alpha/certificates.jks\n"
"\n"
"# import controller certificate into satellite truststores\n"
"keytool -importkeystore\\\n"
" -srcstorepass linstor -deststorepass linstor -keypass linstor\\\n"
" -srckeystore alpha/keystore.jks -destkeystore bravo/certificates.jks\n"
"\n"
"keytool -importkeystore\\\n"
" -srcstorepass linstor -deststorepass linstor -keypass linstor\\\n"
" -srckeystore alpha/keystore.jks -destkeystore charlie/certificates.jks\n"
"\n"
"# now copy the keystore files to their host destinations\n"
"ssh root@alpha mkdir /etc/linstor/ssl\n"
"scp alpha/* root@alpha:/etc/linstor/ssl/\n"
"ssh root@bravo mkdir /etc/linstor/ssl\n"
"scp bravo/* root@bravo:/etc/linstor/ssl/\n"
"ssh root@charlie mkdir /etc/linstor/ssl\n"
"scp charlie/* root@charlie:/etc/linstor/ssl/\n"
"\n"
"# generate the satellite ssl config entry\n"
"echo '[netcom]\n"
"  type=\"ssl\"\n"
"  port=3367\n"
"  server_certificate=\"ssl/keystore.jks\"\n"
"  trusted_certificates=\"ssl/certificates.jks\"\n"
"  key_password=\"linstor\"\n"
"  keystore_password=\"linstor\"\n"
"  truststore_password=\"linstor\"\n"
"  ssl_protocol=\"TLSv1.2\"\n"
"' | ssh root@bravo \"cat > /etc/linstor/linstor_satellite.toml\"\n"
"\n"
"echo '[netcom]\n"
"  type=\"ssl\"\n"
"  port=3367\n"
"  server_certificate=\"ssl/keystore.jks\"\n"
"  trusted_certificates=\"ssl/certificates.jks\"\n"
"  key_password=\"linstor\"\n"
"  keystore_password=\"linstor\"\n"
"  truststore_password=\"linstor\"\n"
"  ssl_protocol=\"TLSv1.2\"\n"
"' | ssh root@charlie \"cat > /etc/linstor/linstor_satellite.toml\"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3408
msgid ""
"Now just start controller and satellites and add the nodes with `--"
"communication-type SSL`.  [[s-linstor-ldap-authentication]]"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:3408
#, no-wrap
msgid "Configuring LDAP Authentication"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3416
#, no-wrap
msgid ""
"You can configure LINSTOR to use LDAP authentication to limit access to the LINSTOR Controller.\n"
"This feature is disabled by default but you can enable and configure it by editing the\n"
"LINSTOR configuration TOML file. After editing the configuration file, you will need to restart\n"
"the `linstor-controller.service`. An example LDAP section within the configuration file looks\n"
"like this:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3436
#, no-wrap
msgid ""
"[ldap]\n"
"  enabled = true <1>\n"
"\n"
"  # allow_public_access: if no authorization fields are given allow\n"
"  # users to work with the public context\n"
"  allow_public_access = false <2>\n"
"\n"
"  # uniform resource identifier: LDAP URI to use\n"
"  # for example, \"ldaps://hostname\" (LDAPS) or \"ldap://hostname\" (LDAP)\n"
"  uri = \"ldaps://ldap.example.com\"\n"
"\n"
"  # distinguished name: {user} can be used as template for the user name\n"
"  dn = \"uid={user}\" <3>\n"
"\n"
"  # search base for the search_filter field\n"
"  search_base = \"dc=example,dc=com\" <4>\n"
"\n"
"  # search_filter: ldap filter to restrict users on memberships\n"
"  search_filter = \"(&(uid={user})(memberof=ou=storage-services,dc=example,dc=com))\" <5>\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3450
#, no-wrap
msgid ""
"<1> `enabled` is a Boolean value. Authentication is disabled by default.\n"
"\n"
"<2> `allow_public_access` is a Boolean value. If set to true, and LDAP authentication is\n"
"enabled, then users will be allowed to work with the LINSTOR Controller's public context. If\n"
"set to false and LDAP authentication is enabled, then users without LDAP authenticating\n"
"credentials will be unable to access the LINSTOR Controller for all but the most trivial tasks,\n"
"such as displaying version or help information.\n"
"\n"
"<3> `dn` is a string value where you can specify the LDAP distiguished name to query the LDAP\n"
"directory. Besides the user ID (`uid`), the string may consist of other distinguished name\n"
"attributes, for example:\n"
"+\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3452
#, no-wrap
msgid ""
"dn = \"uid={user},ou=storage-services,o=ha,dc=example\"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3457
#, no-wrap
msgid ""
"<4> `search_base` is a string value where you can specify the starting point in the LDAP\n"
"directory tree for the authentication query, for example:\n"
"+\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3459
#, no-wrap
msgid ""
"search_base = \"ou=storage-services\"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3464
#, no-wrap
msgid ""
"<5> `search_filter` is a string value where you can specify an LDAP object restriction for\n"
"authentication, such as user and group membership, for example:\n"
"+\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3466
#, no-wrap
msgid ""
"search_filter = \"(&(uid={user})(memberof=ou=storage-services,dc=example,dc=com))\"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3472
msgid ""
"WARNING: It is highly recommended that you configure <<s-linstor-rest-api-"
"https,LINSTOR REST API HTTPS>> and LDAPS to protect potentially sensitive "
"traffic passing between the LINSTOR Controller and an LDAP server."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3472
#, no-wrap
msgid "Running LINSTOR Commands as an Authenticated User"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3476
#, no-wrap
msgid ""
"After configuring the LINSTOR Controller to authenticate users through LDAP (or LDAPS), and the LINSTOR REST API HTTPS, you will need to enter LINSTOR commands as follows:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3478
#, no-wrap
msgid ""
"$ linstor --user <LDAP_user_name> <command>\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3483
#, no-wrap
msgid ""
"If you have configured LDAP authentication without also configuring <<s-linstor-rest-api-https,LINSTOR REST API\n"
"HTTPS>>, you will need to explicitly enable password authentication over HTTP, by using the `--allow-insecure-path` flag with your `linstor` commands. This is not recommended outside of a secured and isolated LAN, as you will be sending credentials in plain text.\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3485
#, no-wrap
msgid ""
"$ linstor --allow-insecure-auth --user <LDAP_user_name> <command>\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3491
msgid ""
"The LINSTOR Controller will prompt you for the user's password, in each of "
"the above examples. You may optionally use the `--password` argument to "
"supply the user's password on the command line, with all the warnings of "
"caution that would go along with doing so.  [[s-linstor-drbd-automatisms]]"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:3491
#, no-wrap
msgid "Automatisms for DRBD Resources"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3496
msgid ""
"This section details some of LINSTOR's automatisms for DRBD resources.  [[s-"
"linstor-auto-quorum]]"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3496
#, no-wrap
msgid "Auto-Quorum Policies"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3529
#, no-wrap
msgid ""
"LINSTOR automatically configures quorum policies on resources *when\n"
"quorum is achievable*. This means, whenever you have at least two diskful and one\n"
"or more diskless resource assignments, or three or more diskful\n"
"resource assignments, LINSTOR will enable quorum policies for your\n"
"resources automatically.\n"
"\n"
"Inversely, LINSTOR will automatically disable quorum policies whenever\n"
"there are less than the minimum required resource assignments to\n"
"achieve quorum.\n"
"\n"
"This is controlled through the, `DrbdOptions/auto-quorum`, property which\n"
"can be applied to the _linstor-controller_, _resource-group_, and\n"
"_resource-definition_. Accepted values for the\n"
"`DrbdOptions/auto-quorum` property are `disabled`, `suspend-io`, and\n"
"`io-error`.\n"
"\n"
"Setting the `DrbdOptions/auto-quorum` property to `disabled` will\n"
"allow you to manually, or more granularly, control the quorum policies\n"
"of your resources should you want to.\n"
"\n"
"TIP: The default policies for `DrbdOptions/auto-quorum` are `quorum\n"
"majority`, and `on-no-quorum io-error`. For more information about DRBD's\n"
"quorum features and their behavior, please refer to the\n"
"{url-drbd-ug}#s-feature-quorum[quorum section of the DRBD user's guide].\n"
"\n"
"IMPORTANT: The `DrbdOptions/auto-quorum` policies will override any\n"
"manually configured properties if `DrbdOptions/auto-quorum` is not disabled.\n"
"\n"
"For example, to manually set the quorum policies of a _resource-group_\n"
"named `my_ssd_group`, you would use the following commands:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3533
#, no-wrap
msgid ""
"# linstor resource-group set-property my_ssd_group DrbdOptions/auto-quorum disabled\n"
"# linstor resource-group set-property my_ssd_group DrbdOptions/Resource/quorum majority\n"
"# linstor resource-group set-property my_ssd_group DrbdOptions/Resource/on-no-quorum suspend-io\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3541
#, no-wrap
msgid ""
"You may want to disable DRBD's quorum features completely. To do that,\n"
"you would need to first disable `DrbdOptions/auto-quorum` on the\n"
"appropriate LINSTOR object, and then set the DRBD quorum features\n"
"accordingly. For example, use the following commands to disable quorum\n"
"entirely on the `my_ssd_group` _resource-group_:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3545
#, no-wrap
msgid ""
"# linstor resource-group set-property my_ssd_group DrbdOptions/auto-quorum disabled\n"
"# linstor resource-group set-property my_ssd_group DrbdOptions/Resource/quorum off\n"
"# linstor resource-group set-property my_ssd_group DrbdOptions/Resource/on-no-quorum\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3551
msgid ""
"NOTE: Setting `DrbdOptions/Resource/on-no-quorum` to an empty value in the "
"commands above deletes the property from the object entirely.  [[s-linstor-"
"auto-evict]]"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3551
#, no-wrap
msgid "Auto-Evict"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3610
#, no-wrap
msgid ""
"If a satellite is offline for a prolonged period of time, LINSTOR can be configured to\n"
"declare that node as evicted. This triggers an automated reassignment of the affected\n"
"DRBD resources to other nodes to ensure a minimum replica count is kept.\n"
"\n"
"This feature uses the following properties to adapt the behaviour.\n"
"\n"
"* `DrbdOptions/AutoEvictMinReplicaCount` sets the number of replicas that should always\n"
"be present. You can set this property on the controller to change a global default, or on\n"
"a specific resource-definition or resource-group to change it only for that\n"
"resource-definition or resource-group. If this property is left empty, the place-count\n"
"set for the auto-placer of the corresponding resource-group will be used.\n"
"\n"
"* `DrbdOptions/AutoEvictAfterTime` describes how long a node can be offline in minutes\n"
"before the eviction is triggered. You can set this property on the controller to change a\n"
"global default, or on a single node to give it a different behavior. The default value\n"
"for this property is 60 minutes.\n"
"\n"
"* `DrbdOptions/AutoEvictMaxDisconnectedNodes` sets the percentage of nodes that can\n"
"be not reachable (for whatever reason) at the same time. If more than the given percent\n"
"of nodes are offline at the same time, the auto-evict will not be triggered for any node\n"
", since in this case LINSTOR assumes connection problems from the controller. This property\n"
"can only be set for the controller, and only accepts a value between 0 and 100. The default\n"
"value is 34. If you want to turn the auto-evict-feature off, simply set this property\n"
"to 0. If you want to always trigger the auto-evict, regardless of how many satellites\n"
"are unreachable, set it to 100.\n"
"\n"
"* `DrbdOptions/AutoEvictAllowEviction` is an additional property that can stop a node from being\n"
"evicted. This can be useful for various cases, for example if you need to shut down a node for\n"
"maintenance. You can set this property on the controller to change a global default, or on a\n"
"single node to give it a different behavior. It accepts true and false as values and per\n"
"default is set to true on the controller. You can use this property to turn the auto-evict\n"
"feature off by setting it to false on the controller, although this might not work completely\n"
"if you already set different values for individual nodes, since those values take precedence\n"
"over the global default.\n"
"\n"
"After the linstor-controller loses the connection to a satellite, aside from trying to\n"
"reconnect, it starts a timer for that satellite. As soon as that timer exceeds\n"
"`DrbdOptions/AutoEvictAfterTime` and all of the DRBD-connections to the DRBD-resources\n"
"on that satellite are broken, the controller will check whether or not\n"
"`DrbdOptions/AutoEvictMaxDisconnectedNodes` has been met. If it hasn't, and\n"
"`DrbdOptions/AutoEvictAllowEviction` is true for the node in question, the satellite\n"
"will be marked as EVICTED. At the same time, the controller will check for every DRBD-resource whether\n"
"the number of resources is still above `DrbdOptions/AutoEvictMinReplicaCount`. If it is,\n"
"the resource in question will be marked as DELETED. If it isn't, an auto-place with the settings\n"
"from the corresponding resource-group will be started. Should the auto-place fail, the\n"
"controller will try again later when changes that might allow a different result, such\n"
"as adding a new node, have happened. Resources where an auto-place is necessary will only be\n"
"marked as DELETED if the corresponding auto-place was successful.\n"
"\n"
"The evicted satellite itself will not be able to reestablish connection with the controller.\n"
"Even if the node is up and running, a manual reconnect will fail. It is also not possible to\n"
"delete the satellite, even if it is working as it should be. The satellite can, however, be restored.\n"
"This will remove the EVICTED-flag from the satellite and allow you to use it again. Previously\n"
"configured network interfaces, storage pools, properties and similar entities as well as\n"
"non-DRBD-related resources and resources that could not be autoplaced somewhere else will\n"
"still be on the satellite. To restore a satellite, use\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3612
#, no-wrap
msgid ""
"# linstor node restore [nodename]\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3618
msgid ""
"Should you want to instead throw everything that once was on that node, "
"including the node itself, away, you need to use the `node lost` command "
"instead.  [[s-linstor-auto-diskful]]"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3618
#, no-wrap
msgid "Auto-Diskful and Related Options"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3634
msgid ""
"You can set the LINSTOR `auto-diskful` and `auto-diskful-allow-cleanup` "
"properties for various LINSTOR objects, for example, a resource definition, "
"to have LINSTOR help automatically make a _Diskless_ node _Diskful_ and "
"perform appropriate cleanup actions afterwards.  This is useful when a "
"_Diskless_ node has been in a _Primary_ state for a DRBD resource for more "
"than a specified number of minutes. This could happen in cases where you "
"integrate LINSTOR managed storage with other orchestrating and scheduling "
"platforms, such as OpenStack, OpenNebula, and others. On some platforms that "
"you integrate LINSTOR with, you might not have a way to influence where in "
"your cluster a storage volume will be used.  The auto-diskful options give "
"you a way to use LINSTOR to sensibly delegate the roles of your storage "
"nodes in response to an integrated platform's actions that are beyond your "
"control.  [[s-linstor-auto-diskful-setting]]"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:3634
#, no-wrap
msgid "Setting the Auto-Diskful Option"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3646
#, no-wrap
msgid ""
"By setting the `DrbdOptions/auto-diskful` option on a LINSTOR resource definition , you are\n"
"configuring the LINSTOR controller to make a _Diskless_ DRBD resource _Diskful_ if the resource\n"
"has been in a DRBD _Primary_ state for more than the specified number of minutes. After the\n"
"specified number of minutes, LINSTOR will automatically use the\n"
"<<s-linstor-toggle-disk,`resource toggle-disk` command>> to toggle the resource state on the\n"
"_Diskless_ node, for the given resource.\n"
"\n"
"To set this property, for example, on a LINSTOR resource definition named `myres` with a\n"
"threshold of five minutes, enter the command:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3648
#, no-wrap
msgid ""
"# linstor resource-definition set-property myres DrbdOptions/auto-diskful 5\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3651
msgid "[[s-linstor-auto-diskful-setting-on-rg-or-controller]]"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:3651
#, no-wrap
msgid "Setting the Auto-Diskful Option on a Resource Group or Controller"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3670
msgid ""
"You can also set the `DrbdOptions/auto-diskful` option on LINSTOR "
"`controller` or `resource-group` objects. By setting the option at the "
"controller level, the option will affect all LINSTOR resource definitions in "
"your LINSTOR cluster that do not have this option set, either on the "
"resource definition itself, or else on the resource group that you might "
"have created the resource from.  Setting the option on a LINSTOR resource "
"group will affect all resource definitions that are spawned from the group, "
"unless a resource definition has the option set on it.  The order of "
"priority, from highest to lowest, for the effect of setting the `auto-"
"diskful` option is: - Resource definition - Resource group - Controller [[s-"
"linstor-auto-diskful-unsetting]]"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:3670
#, no-wrap
msgid "Unsetting the Auto-Diskful Option"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3674
#, no-wrap
msgid ""
"To unset the LINSTOR `auto-diskful` option, enter:\n"
"\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3676
#, no-wrap
msgid ""
"# linstor <controller|resource-definition|resource-group> set-property DrbdOptions/auto-diskful\n"
"----\n"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3679
msgid "[[s-linstor-auto-diskful-allow-cleanup-setting]]"
msgstr ""

#. type: Title =====
#: UG9/en/linstor-administration.adoc:3679
#, no-wrap
msgid "Setting the Auto-Diskful-Allow-Cleanup Option"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3696
msgid ""
"A companion option to the LINSTOR `auto-diskful` option is the `DrbdOptions/"
"auto-diskful-allow-cleanup` option.  You can set this option on the "
"following LINSTOR objects: node, resource, resource definition, or resource "
"group. The default value for this option is `True`, but the option has no "
"effect unless the `auto-diskful` option has also been set.  After LINSTOR "
"has toggled a resource to _Diskful_, because the threshold number of minutes "
"has passed where a _Diskless_ node was in the _Primary_ role for a resource, "
"and after DRBD has synchronized the data to this previously _Diskless_ and "
"now _Primary_ node, LINSTOR will remove the resource from any _Secondary_ "
"nodes when that action is necessary to fulfill a replica count constraint "
"that the resource might have. This could be the case, for example, if you "
"have specified a number of replicas for a resource by using the `--auto-"
"place` option.  [s-linstor-qos]]"
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:3696
#, no-wrap
msgid "QoS Settings"
msgstr ""

#. type: Table
#: UG9/en/linstor-administration.adoc:3705
msgid ""
"LINSTOR implements QoS for managed resources by using sysfs properties that "
"correspond to kernel variables related to block I/O operations. These sysfs "
"properties can be limits on either bandwidth (bytes per second), or IOPS, or "
"both.  The sysfs files and their corresponding LINSTOR properties are as "
"follows: [cols=\"3,2\"]"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3707
msgid "| sysfs (`/sys/fs/`) | LINSTOR Property"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3712
msgid ""
"| `cgroup/blkio/blkio.throttle.read_bps_device` | `sys/fs/"
"blkio_throttle_read` | `cgroup/blkio/blkio.throttle.write_bps_device` | `sys/"
"fs/blkio_throttle_write` | `cgroup/blkio/blkio.throttle.read_iops_device` | "
"`sys/fs/blkio_throttle_read_iops` | `cgroup/blkio/blkio.throttle."
"write_iops_device` | `sys/fs/blkio_throttle_write_iops`"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3714
#, no-wrap
msgid "Setting QoS Using LINSTOR sysfs Properties"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3721
msgid ""
"These LINSTOR properties may be set using the `set-property` command and may "
"be set on the following objects: volume, storage pool, resource, controller, "
"or node. You can also set these QoS properties on resource groups, volume "
"groups, resource definitions, or volume definitions.  When you set a QoS "
"property on a group or definition, resources created from the group or "
"definition will inherit the QoS settings."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3724
msgid ""
"Settings made to a group or definition will affect both existing and new "
"resources created from the group or definition."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3730
msgid ""
"The following example shows creating a resource group, then creating a "
"volume group, then applying QoS settings to the volume group, and then "
"spawning resources from the resource group. A verification command will show "
"that the spawned resources inherit the QoS settings.  The example uses an "
"assumed previously created LINSTOR storage pool named _pool1_. You will need "
"to replace this name with a storage pool name that exists in your "
"environment."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:3736
#, no-wrap
msgid ""
"# linstor resource-group create qos_limited --storage-pool pool1 --place-count 3\n"
"# linstor volume-group create qos_limited\n"
"# linstor volume-group set-property qos_limited 0 sys/fs/blkio_throttle_write 1048576\n"
"# linstor resource-group spawn-resources qos_limited qos_limited_res 200M\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3740
msgid ""
"To verify that the spawned resources inherited the QoS setting, you can show "
"the contents of the corresponding sysfs file, on a node that contributes "
"storage to the storage pool."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:3744
#, no-wrap
msgid ""
"# cat /sys/fs/cgroup/blkio/blkio.throttle.write_bps_device\n"
"252:4 1048576\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3748
msgid ""
"As the QoS properties are inherited and not copied, you will not see the "
"property listed in any \"child\" objects that have been spawned from the "
"\"parent\" group or definition."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3749
#, no-wrap
msgid "QoS Settings for a LINSTOR Volume Having Multiple DRBD Devices"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3760
msgid ""
"A single LINSTOR volume can be composed of multiple DRBD devices. For "
"example, DRBD with external metadata will have three backing devices: a data "
"(storage) device, a metadata device, and the composite DRBD device (volume) "
"provided to LINSTOR. If the data and metadata devices correspond to "
"different backing disks, then if you set a sysfs property for such a LINSTOR "
"volume, only the local data (storage) backing device will receive the "
"property value in the corresponding `/sys/fs/cgroup/blkio/` file. Neither "
"the device backing DRBD's metadata, nor the composite backing device "
"provided to LINSTOR would receive the value. However, when DRBD's data and "
"its metadata share the same backing disk, QoS settings will affect the "
"performance of both data and metadata operations."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3761
#, no-wrap
msgid "QoS Settings for NVMe"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3769
msgid ""
"In case a LINSTOR resource definition has an `nvme-target` as well as an "
"`nvme-initiator` resource, both data (storage) backing devices of each node "
"will receive the sysfs property value. In case of the target, the data "
"backing device will be the volume of either LVM or ZFS, whereas in case of "
"the initiator, the data backing device will be the connected `nvme-device`, "
"regardless of which other LINSTOR layers, such as LUKS, NVMe, DRBD, and "
"others (see <<s-linstor-without-drbd>>), are above that."
msgstr ""

#. type: Title ===
#: UG9/en/linstor-administration.adoc:3771
#, no-wrap
msgid "Getting Help"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3773
#, no-wrap
msgid "From the Command Line"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3777
msgid ""
"A quick way to list available commands on the command line is to type "
"`linstor`."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3780
msgid ""
"Further information about subcommands (e.g., list-nodes) can be retrieved in "
"two ways:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:3784
#, no-wrap
msgid ""
"# linstor node list -h\n"
"# linstor help node list\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3788
msgid ""
"Using the 'help' subcommand is especially helpful when LINSTOR is executed "
"in interactive mode (`linstor interactive`)."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3793
msgid ""
"One of the most helpful features of LINSTOR is its rich tab-completion, "
"which can be used to complete basically every object LINSTOR knows about (e."
"g., node names, IP addresses, resource names, ...).  In the following "
"examples, we show some possible completions, and their results:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:3797
#, no-wrap
msgid ""
"# linstor node create alpha 1<tab> # completes the IP address if hostname can be resolved\n"
"# linstor resource create b<tab> c<tab> # linstor assign-resource backups charlie\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3801
msgid ""
"If tab-completion does not work out of the box, please try to source the "
"appropriate file:"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:3805
#, no-wrap
msgid ""
"# source /etc/bash_completion.d/linstor # or\n"
"# source /usr/share/bash_completion/completions/linstor\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3809
msgid ""
"For zsh shell users, the `linstor-client` command can generate a zsh "
"compilation file, that has basic support for command and argument completion."
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:3812
#, no-wrap
msgid "# linstor gen-zsh-completer > /usr/share/zsh/functions/Completion/Linux/_linstor\n"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3814
#, no-wrap
msgid "SOS-Report"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3817
msgid ""
"If something goes wrong and you need help finding the cause of the issue, "
"you can use"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:3820
#, no-wrap
msgid "# linstor sos-report create\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3824
msgid ""
"The command above will create a new sos-report in `/var/log/linstor/"
"controller/` on the controller node. Alternatively you can use"
msgstr ""

#. type: delimited block -
#: UG9/en/linstor-administration.adoc:3827
#, no-wrap
msgid "# linstor sos-report download\n"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3831
msgid ""
"which will create a new sos-report and additionally downloads that report to "
"the local machine into your current working directory."
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3836
msgid ""
"This sos-report contains logs and useful debug-information from several "
"sources (Linstor-logs, `dmesg`, versions of external tools used by LINSTOR, "
"`ip a`, database dump and many more).  These information are stored for each "
"node in plain text in the resulting `.tar.gz` file."
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3838
#, no-wrap
msgid "From the Community"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3840
msgid ""
"For help from the community please subscribe to our mailing list located "
"here: https://lists.linbit.com/listinfo/drbd-user"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3841
#, no-wrap
msgid "GitHub"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3843
msgid ""
"To file bug or feature request please check out our GitHub page https://"
"github.com/linbit"
msgstr ""

#. type: Title ====
#: UG9/en/linstor-administration.adoc:3844
#, no-wrap
msgid "Paid Support and Development"
msgstr ""

#. type: Plain text
#: UG9/en/linstor-administration.adoc:3845
msgid ""
"Alternatively, if you need to purchase remote installation services, 24/7 "
"support, access to certified repositories, or feature development, please "
"contact us: +1-877-454-6248 (1-877-4LINBIT) , International: +43-1-8178292-0 "
"| sales@linbit.com"
msgstr ""
