# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: documentation@linbit.com\n"
"POT-Creation-Date: 2023-10-31 19:39+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: en\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. - list divider. Keep it otherwise next included section is interpreted as list element
#. type: Title ==
#: UG9/en/drbd-benchmark.adoc:2
#, no-wrap
msgid "Measuring Block Device Performance"
msgstr ""

#. type: Title ===
#: UG9/en/drbd-benchmark.adoc:6
#, no-wrap
msgid "Measuring Throughput"
msgstr ""

#. type: Plain text
#: UG9/en/drbd-benchmark.adoc:13
msgid ""
"When measuring the impact of using DRBD on a system's I/O throughput, the "
"_absolute_ throughput the system is capable of is of little relevance. What "
"is much more interesting is the _relative_ impact DRBD has on I/O "
"performance. Therefore, it is always necessary to measure I/O throughput "
"both with and without DRBD."
msgstr ""

#. type: Plain text
#: UG9/en/drbd-benchmark.adoc:18
msgid ""
"The tests described in this section are intrusive; they overwrite data and "
"bring DRBD devices out of sync. It is therefore vital that you perform them "
"only on scratch volumes which can be discarded after testing has completed."
msgstr ""

#. type: Plain text
#: UG9/en/drbd-benchmark.adoc:24
msgid ""
"I/O throughput estimation works by writing significantly large chunks of "
"data to a block device, and measuring the amount of time the system took to "
"complete the write operation. This can be easily done using a fairly "
"ubiquitous utility, `dd`, whose reasonably recent versions include a built-"
"in throughput estimation."
msgstr ""

#. type: Plain text
#: UG9/en/drbd-benchmark.adoc:28
msgid ""
"A simple ``dd``-based throughput benchmark, assuming you have a scratch "
"resource named `test`, which is currently connected and in the secondary "
"role on both nodes, is one like the following:"
msgstr ""

#. type: delimited block -
#: UG9/en/drbd-benchmark.adoc:42
#, no-wrap
msgid ""
"# TEST_RESOURCE=test\n"
"# TEST_DEVICE=$(drbdadm sh-dev $TEST_RESOURCE | head -1)\n"
"# TEST_LL_DEVICE=$(drbdadm sh-ll-dev $TEST_RESOURCE | head -1)\n"
"# drbdadm primary $TEST_RESOURCE\n"
"# for i in $(seq 5); do\n"
"    dd if=/dev/zero of=$TEST_DEVICE bs=1M count=512 oflag=direct\n"
"  done\n"
"# drbdadm down $TEST_RESOURCE\n"
"# for i in $(seq 5); do\n"
"    dd if=/dev/zero of=$TEST_LL_DEVICE bs=1M count=512 oflag=direct\n"
"  done\n"
msgstr ""

#. type: Plain text
#: UG9/en/drbd-benchmark.adoc:48
msgid ""
"This test simply writes 512MiB of data to your DRBD device, and then to its "
"backing device for comparison. Both tests are repeated 5 times each to allow "
"for some statistical averaging. The relevant result is the throughput "
"measurements generated by `dd`."
msgstr ""

#. type: Plain text
#: UG9/en/drbd-benchmark.adoc:52
msgid ""
"For freshly enabled DRBD devices, it is normal to see slightly reduced "
"performance on the first `dd` run. This is due to the Activity Log being "
"\"cold\", and is no cause for concern."
msgstr ""

#. type: Plain text
#: UG9/en/drbd-benchmark.adoc:54
msgid "See our <<ch-throughput>> chapter for some performance numbers."
msgstr ""

#. type: Title ===
#: UG9/en/drbd-benchmark.adoc:57
#, no-wrap
msgid "Measuring Latency"
msgstr ""

#. type: Plain text
#: UG9/en/drbd-benchmark.adoc:65
msgid ""
"Latency measurements have objectives completely different from throughput "
"benchmarks: in I/O latency tests, one writes a very small chunk of data "
"(ideally the smallest chunk of data that the system can deal with), and "
"observes the time it takes to complete that write. The process is usually "
"repeated several times to account for normal statistical fluctuations."
msgstr ""

#. type: Plain text
#: UG9/en/drbd-benchmark.adoc:69
msgid ""
"Just as throughput measurements, I/O latency measurements may be performed "
"using the ubiquitous `dd` utility, albeit with different settings and an "
"entirely different focus of observation."
msgstr ""

#. type: Plain text
#: UG9/en/drbd-benchmark.adoc:73
msgid ""
"Provided below is a simple ``dd``-based latency micro-benchmark, assuming "
"you have a scratch resource named `test` which is currently connected and in "
"the secondary role on both nodes:"
msgstr ""

#. type: delimited block -
#: UG9/en/drbd-benchmark.adoc:83
#, no-wrap
msgid ""
"# TEST_RESOURCE=test\n"
"# TEST_DEVICE=$(drbdadm sh-dev $TEST_RESOURCE | head -1)\n"
"# TEST_LL_DEVICE=$(drbdadm sh-ll-dev $TEST_RESOURCE | head -1)\n"
"# drbdadm primary $TEST_RESOURCE\n"
"# dd if=/dev/zero of=$TEST_DEVICE bs=4k count=1000 oflag=direct\n"
"# drbdadm down $TEST_RESOURCE\n"
"# dd if=/dev/zero of=$TEST_LL_DEVICE bs=4k count=1000 oflag=direct\n"
msgstr ""

#. type: Plain text
#: UG9/en/drbd-benchmark.adoc:89
msgid ""
"This test writes 1,000 chunks with 4kiB each to your DRBD device, and then "
"to its backing device for comparison. 4096 bytes is the smallest block size "
"that a Linux system (on all architectures except s390), modern hard disks, "
"and SSDs, are expected to handle."
msgstr ""

#. type: Plain text
#: UG9/en/drbd-benchmark.adoc:94
msgid ""
"It is important to understand that throughput measurements generated by `dd` "
"are completely irrelevant for this test; what is important is the _time_ "
"elapsed during the completion of said 1,000 writes. Dividing this time by "
"1,000 gives the average latency of a single block write."
msgstr ""

#. type: Plain text
#: UG9/en/drbd-benchmark.adoc:98
msgid ""
"This is the _worst-case_, in that it is single-threaded and does one write "
"strictly after the one before, that is, it runs with an I/O-depth of 1. "
"Please refer to <<s-latency-iops>>."
msgstr ""

#. type: Plain text
#: UG9/en/drbd-benchmark.adoc:100
msgid ""
"Furthermore, see our <<ch-latency>> chapter for some typical performance "
"values."
msgstr ""
