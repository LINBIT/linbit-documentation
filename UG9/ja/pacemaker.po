# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2020-10-11 10:46+0900\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#.  FIXME
#. type: Title ==
#, no-wrap
msgid "Integrating DRBD with Pacemaker clusters"
msgstr "DRBDとPacemakerクラスタ"

#. type: Plain text
msgid ""
"indexterm:[Pacemaker]Using DRBD in conjunction with the Pacemaker cluster "
"stack is arguably DRBD's most frequently found use case. Pacemaker is also "
"one of the applications that make DRBD extremely powerful in a wide variety "
"of usage scenarios."
msgstr ""
"indexterm:[Pacemaker]PacemakerクラスタスタックとDRBDの組み合わせは、もっとも"
"多いDRBDの使いみちです。そしてまた、Pacemakerはさまざまな使用シナリオでDRBDを"
"非常に強力なものにするアプリケーションの１つです。"

#. type: Plain text
msgid "DRBD can be used in Pacemaker clusters in different ways:"
msgstr "DRBD は Pacemaker クラスタでさまざまな方法で使用できます。"

#. type: Plain text
msgid "DRBD running as a background-service, used like a SAN; or"
msgstr "DRBDをSANのようにバックグラウンドのサービスとして使用する、または"

#. type: Plain text
msgid "DRBD completely managed by Pacemaker via the DRBD OCF resource agent"
msgstr ""
"DRBD は DRBD OCF リソースエージェントを介して Pacemaker によって完全に管理さ"
"れます。"

#. type: Plain text
msgid ""
"Both have a few advantages and disadvantages, these will be discussed below."
msgstr "それぞれの長所と短所は後で考察します。"

#. type: Plain text
msgid ""
"It's recommended to have either fencing configured or quorum enabled.  (But "
"not both. External fencing handler results may interact in conflicting ways "
"with DRBD internal quorum.)  If your cluster has communication issues (eg. "
"network switch loses power) and gets split, the parts might start the "
"services (failover)  and cause a *Split-Brain* when the communication "
"resumes again."
msgstr ""
"フェンシングを構成するか、またはクォーラムを有効にすることをお勧めします（た"
"だし、両方ではありません。外部フェンシングハンドラーの結果は、DRBD 内部クォー"
"ラムと競合し相互作用する可能性があります）。クラスタ間の接続が途切れてノード"
"が互いを見失うと、両ノードでサービスが開始し(フェイルオーバー)、通信が復帰し"
"たタイミングで *スプリットブレイン* が発生する事になります。"

#. type: Title ===
#, no-wrap
msgid "Pacemaker primer"
msgstr "Pacemakerの基礎"

#. type: Plain text
msgid ""
"Pacemaker is a sophisticated, feature-rich, and widely deployed cluster "
"resource manager for the Linux platform. It comes with a rich set of "
"documentation. In order to understand this chapter, reading the following "
"documents is highly recommended:"
msgstr ""
"PacemakerはLinuxプラットフォーム向けの高度で機能豊富なクラスタリソースマネー"
"ジャで、さまざまな用途で使われています。マニュアルも豊富に用意されています。"
"この章を理解するために、以下のドキュメントを読むことを強くお勧めします。"

#. type: Plain text
msgid ""
"http://www.clusterlabs.org/doc/Cluster_from_Scratch.pdf[Clusters From "
"Scratch], a step-by-step guide to configuring high availability clusters;"
msgstr ""
"http://www.clusterlabs.org/doc/Cluster_from_Scratch.pdf[Clusters From "
"Scratch]:高可用性クラスタ構築ステップバイステップガイド"

#. type: Plain text
msgid ""
"http://crmsh.github.io/documentation/index.html[CRM CLI (command line "
"interface) tool], a manual for the CRM shell, a simple and intuitive command "
"line interface bundled with Pacemaker;"
msgstr ""
"http://crmsh.github.io/documentation/index.html[CRM CLI (command line "
"interface) tool]:CRMのシェルやシンプルかつ直感的なコマンドラインインタフェー"
"スのマニュアル"

#. type: Plain text
msgid ""
"http://clusterlabs.org/doc/en-US/Pacemaker/1.1/html/Pacemaker_Explained/"
"[Pacemaker Configuration Explained], a reference document explaining the "
"concept and design behind Pacemaker."
msgstr ""
"http://clusterlabs.org/doc/en-US/Pacemaker/1.1/html/Pacemaker_Explained/"
"[Pacemaker Configuration Explained]:Pacemakerの背景にあるコンセプトや設計を説"
"明している参考ドキュメント"

#. type: Title ===
#, no-wrap
msgid "Using DRBD as a background service in a pacemaker cluster"
msgstr "DRBDをPacemakerクラスタで管理する"

#. type: Plain text
msgid ""
"In this section you will see that using autonomous DRBD storage can look "
"like local storage; so integrating in a Pacemaker cluster is done by "
"pointing your mount points at DRBD."
msgstr ""
"自律的なDRBDストレージはローカルストレージのように扱えます。Pacemakerクラスタ"
"への組み込みは、DRBDのマウントポイントを指定することで行えます。"

#. type: Plain text
msgid ""
"First of all, we will use the `auto-promote` feature of DRBD, so that DRBD "
"automatically sets itself _Primary_ when needed. This will probably apply to "
"all of your resources, so setting that a default in the `common` section "
"makes sense:"
msgstr ""
"初めに、DRBDの `自動プロモーション` 機能を使用しますので、DRBDは必要な時に自"
"分自身を `プライマリ` に設定します。この動作はすべてのリソースで同じなので "
"`common` セクションで設定しておくとよいでしょう。"

#. type: delimited block -
#, no-wrap
msgid ""
"common {\n"
"  options {\n"
"    auto-promote yes;\n"
"    ...\n"
"  }\n"
"}\n"
msgstr ""
"common {\n"
"  options {\n"
"    auto-promote yes;\n"
"    ...\n"
"  }\n"
"}\n"

#. type: Plain text
msgid "Now you just need to use your storage, eg. via a filesystem:"
msgstr "後はファイルシステム経由で使ってストレージにアクセスするだけです。"

#. type: Block title
#, no-wrap
msgid "Pacemaker configuration for DRBD-backed MySQL service, using `auto-promote`"
msgstr "`自動プロモーション` を使ったDRBDを下位デバイスにするMySQLサービスのPacemaker設定"

#. type: delimited block -
#, no-wrap
msgid ""
"crm configure\n"
"crm(live)configure# primitive fs_mysql ocf:heartbeat:Filesystem \\\n"
"                    params device=\"/dev/drbd/by-res/mysql/0\" \\\n"
"                      directory=\"/var/lib/mysql\" fstype=\"ext3\"\n"
"crm(live)configure# primitive ip_mysql ocf:heartbeat:IPaddr2 \\\n"
"                    params ip=\"10.9.42.1\" nic=\"eth0\"\n"
"crm(live)configure# primitive mysqld lsb:mysqld\n"
"crm(live)configure# group mysql fs_mysql ip_mysql mysqld\n"
"crm(live)configure# commit\n"
"crm(live)configure# exit\n"
"bye\n"
msgstr ""
"crm configure\n"
"crm(live)configure# primitive fs_mysql ocf:heartbeat:Filesystem \\\n"
"                    params device=\"/dev/drbd/by-res/mysql/0\" \\\n"
"                      directory=\"/var/lib/mysql\" fstype=\"ext3\"\n"
"crm(live)configure# primitive ip_mysql ocf:heartbeat:IPaddr2 \\\n"
"                    params ip=\"10.9.42.1\" nic=\"eth0\"\n"
"crm(live)configure# primitive mysqld lsb:mysqld\n"
"crm(live)configure# group mysql fs_mysql ip_mysql mysqld\n"
"crm(live)configure# commit\n"
"crm(live)configure# exit\n"
"bye\n"

#. type: Plain text
msgid ""
"Essentially all that is needed is a mountpoint (`/var/lib/mysql` in this "
"example) where the DRBD resource gets mounted."
msgstr ""
"基本的には、必要なのはDRBDリソースがマウントされるマウントポイント(この例で"
"は `/var/lib/mysql` )です。"

#. type: Plain text
msgid ""
"As long as Pacemaker has control, it will only allow a single instance of "
"that mount across your cluster."
msgstr "Pacemaker管理下ではクラスタ内で1インスタンスのみがマウント出来ます。"

#. type: Plain text
msgid ""
"See also <<s-pacemaker-drbd-attr>> for additional information on ordering "
"constraints for system startup and more."
msgstr ""
"システム起動などの順序の制約に関する追加情報は <<s-pacemaker-drbd-attr>> も参"
"照ください。"

#. type: Title ===
#, no-wrap
msgid "Adding a DRBD-backed service to the cluster configuration, including a master-slave resource"
msgstr "DRBDを下位デバイスにするマスターとスレーブのあるサービスのクラスタ設定"

#. type: Plain text
msgid ""
"This section explains how to enable a DRBD-backed service in a Pacemaker "
"cluster."
msgstr ""
"このセクションではPacemakerクラスタでDRBDを下位デバイスにするサービスを使用す"
"る方法を説明します。"

#. type: Plain text
msgid ""
"If you are employing the DRBD OCF resource agent, it is recommended that you "
"defer DRBD startup, shutdown, promotion, and demotion _exclusively_ to the "
"OCF resource agent. That means that you should disable the DRBD init script:"
msgstr ""
"DRBDのOCFリソースエージェントを採用している場合には、DRBDの起動、停止、昇格、"
"降格はOCFリソースエージェント _のみ_ で行う事を推奨します。DRBDの自動起動は無"
"効にしてください。"

#. type: delimited block -
#, no-wrap
msgid "chkconfig drbd off\n"
msgstr "chkconfig drbd off\n"

#. type: Plain text
msgid ""
"The `ocf:linbit:drbd` OCF resource agent provides Master/Slave capability, "
"allowing Pacemaker to start and monitor the DRBD resource on multiple nodes "
"and promoting and demoting as needed. You must, however, understand that the "
"DRBD RA disconnects and detaches all DRBD resources it manages on Pacemaker "
"shutdown, and also upon enabling standby mode for a node."
msgstr ""
"OCFリソースエージェントの `ocf:linbit:drbd` はマスター/スレーブ管理が可能であ"
"り、Pacemakerから複数ノードでのDRBDリソースの起動やモニター、必要な場合には降"
"格を行うことができます。ただし、 `drbd` リソースエージェントはPacemakerの"
"シャットダウン時、またはノードをスタンバイモードにする時には、管理する全DRBD"
"リソースを切断してデタッチを行う事を理解しておく必要があります。"

#. type: Plain text
msgid ""
"The OCF resource agent which ships with DRBD belongs to the `linbit` "
"provider, and hence installs as `/usr/lib/ocf/resource.d/linbit/drbd`. There "
"is a legacy resource agent that ships as part of the OCF resource agents "
"package, which uses the `heartbeat` provider and installs into `/usr/lib/ocf/"
"resource.d/heartbeat/drbd`. The legacy OCF RA is deprecated and should no "
"longer be used."
msgstr ""
"`linbit` のDRBD付属のOCFリソースエージェントは `/usr/lib/ocf/resource.d/"
"linbit/drbd` にインストールされます。`heartbeat` のOCFリソースパッケージに付"
"属するレガシーなリソースエージェントは `/usr/lib/ocf/resource.d/heartbeat/"
"drbd` にインストールされます。レガシーなOCFリソースエージェントは非推奨なので"
"使用しないでください。"

#. type: Plain text
msgid ""
"In order to enable a DRBD-backed configuration for a MySQL database in a "
"Pacemaker CRM cluster with the `drbd` OCF resource agent, you must create "
"both the necessary resources, and Pacemaker constraints to ensure your "
"service only starts on a previously promoted DRBD resource. You may do so "
"using the `crm` shell, as outlined in the following example:"
msgstr ""
"`drbd` のOCFリソースエージェントを使用したPacemakerのCRMクラスタで、MySQLデー"
"タベースにDRBDの下位デバイス設定を有効にするためには、両方の必要なリソース"
"エージェントを作成して、 先行してDRBDリソースが昇格したノードでだけサービスが"
"起動するようにPacemakerの制約を設定しなければなりません。以下に示すように、"
"`crm` シェルで設定することができます。"

#. type: Block title
#, no-wrap
msgid "Pacemaker configuration for DRBD-backed MySQL service, using a `master-slave` resource"
msgstr "`マスター/スレーブ` リソースを使ったDRBDを下位デバイスにするMySQLサービスのPacemaker設定"

#. type: delimited block -
#, no-wrap
msgid ""
"crm configure\n"
"crm(live)configure# primitive drbd_mysql ocf:linbit:drbd \\\n"
"                    params drbd_resource=\"mysql\" \\\n"
"                    op monitor interval=\"29s\" role=\"Master\" \\\n"
"                    op monitor interval=\"31s\" role=\"Slave\"\n"
"crm(live)configure# ms ms_drbd_mysql drbd_mysql \\\n"
"                    meta master-max=\"1\" master-node-max=\"1\" \\\n"
"                         clone-max=\"2\" clone-node-max=\"1\" \\\n"
"                         notify=\"true\"\n"
"crm(live)configure# primitive fs_mysql ocf:heartbeat:Filesystem \\\n"
"                    params device=\"/dev/drbd/by-res/mysql/0\" \\\n"
"                      directory=\"/var/lib/mysql\" fstype=\"ext3\"\n"
"crm(live)configure# primitive ip_mysql ocf:heartbeat:IPaddr2 \\\n"
"                    params ip=\"10.9.42.1\" nic=\"eth0\"\n"
"crm(live)configure# primitive mysqld lsb:mysqld\n"
"crm(live)configure# group mysql fs_mysql ip_mysql mysqld\n"
"crm(live)configure# colocation mysql_on_drbd \\\n"
"                      inf: mysql ms_drbd_mysql:Master\n"
"crm(live)configure# order mysql_after_drbd \\\n"
"                      inf: ms_drbd_mysql:promote mysql:start\n"
"crm(live)configure# commit\n"
"crm(live)configure# exit\n"
"bye\n"
msgstr ""
"crm configure\n"
"crm(live)configure# primitive drbd_mysql ocf:linbit:drbd \\\n"
"                    params drbd_resource=\"mysql\" \\\n"
"                    op monitor interval=\"29s\" role=\"Master\" \\\n"
"                    op monitor interval=\"31s\" role=\"Slave\"\n"
"crm(live)configure# ms ms_drbd_mysql drbd_mysql \\\n"
"                    meta master-max=\"1\" master-node-max=\"1\" \\\n"
"                         clone-max=\"2\" clone-node-max=\"1\" \\\n"
"                         notify=\"true\"\n"
"crm(live)configure# primitive fs_mysql ocf:heartbeat:Filesystem \\\n"
"                    params device=\"/dev/drbd/by-res/mysql/0\" \\\n"
"                      directory=\"/var/lib/mysql\" fstype=\"ext3\"\n"
"crm(live)configure# primitive ip_mysql ocf:heartbeat:IPaddr2 \\\n"
"                    params ip=\"10.9.42.1\" nic=\"eth0\"\n"
"crm(live)configure# primitive mysqld lsb:mysqld\n"
"crm(live)configure# group mysql fs_mysql ip_mysql mysqld\n"
"crm(live)configure# colocation mysql_on_drbd \\\n"
"                      inf: mysql ms_drbd_mysql:Master\n"
"crm(live)configure# order mysql_after_drbd \\\n"
"                      inf: ms_drbd_mysql:promote mysql:start\n"
"crm(live)configure# commit\n"
"crm(live)configure# exit\n"
"bye\n"

#. type: Plain text
msgid ""
"After this, your configuration should be enabled. Pacemaker now selects a "
"node on which it promotes the DRBD resource, and then starts the DRBD-backed "
"resource group on that same node."
msgstr ""
"これで設定が有効になります。そしてPacemakerがDRBDリソースを昇格するノードを選"
"び、そのノードでDRBDを下位デバイスにするリソースを起動します。"

#. type: Plain text
msgid ""
"See also <<s-pacemaker-drbd-attr>> for additional information on location "
"contraints for placing the Master role."
msgstr ""
"Master role を配置するための location 制約に関する追加情報は <<s-pacemaker-"
"drbd-attr>> も参照ください。"

#. type: Title ===
#, no-wrap
msgid "Using resource-level fencing in Pacemaker clusters"
msgstr "Pacemakerクラスタでリソースレベルのフェンシングを使用する"

#. type: Plain text
msgid ""
"This section outlines the steps necessary to prevent Pacemaker from "
"promoting a DRBD Master/Slave resource when its DRBD replication link has "
"been interrupted. This keeps Pacemaker from starting a service with outdated "
"data and causing an unwanted \"time warp\" in the process."
msgstr ""
"ここでは、DRBDのレプリケーションリンクが遮断された場合に、Pacemakerが `drbd` "
"マスター/スレーブリソースを昇格させないようにするために必要な手順の概要を説明"
"します。これにより、Pacemakerが古いデータでサービスを開始し、プロセスでの不要"
"な「タイムワープ」の原因になることが回避できます。"

#. type: Plain text
msgid ""
"In order to enable any resource-level fencing for DRBD, you must add the "
"following lines to your resource configuration:"
msgstr ""
"DRBD用のリソースレベルのフェンシングを有効にするには、リソース設定で次の行を"
"追加する必要があります。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource> {\n"
"  net {\n"
"    fencing resource-only;\n"
"    ...\n"
"  }\n"
"}\n"
msgstr ""
"resource <resource> {\n"
"  net {\n"
"    fencing resource-only;\n"
"    ...\n"
"  }\n"
"}\n"

#. type: Plain text
msgid ""
"You will also have to make changes to the `handlers` section depending on "
"the cluster infrastructure being used:"
msgstr ""
"同時に、使用するクラスタインフラストラクチャによっては `handlers` セクション"
"も変更しなければなりません。"

#. type: Plain text
msgid ""
"Heartbeat-based Pacemaker clusters can employ the configuration outlined in "
"<<s-pacemaker-fencing-dopd>>."
msgstr ""
"Heartbeatを使用したPacemakerクラスタは <<s-pacemaker-fencing-dopd>>で説明して"
"いる設定を使用できます。"

#. type: Plain text
msgid ""
"Both Corosync- and Heartbeat-based clusters can use the functionality "
"explained in <<s-pacemaker-fencing-cib>>."
msgstr ""
"CorosyncとHeartbeatを使用したクラスタは <<s-pacemaker-fencing-cib>>で説明され"
"ている機能を使うことができます。"

#. type: Plain text
msgid ""
"It is absolutely vital to configure at least two independent cluster "
"communications channels for this functionality to work correctly. Heartbeat-"
"based Pacemaker clusters should define at least two cluster communication "
"links in their `ha.cf` configuration files. Corosync clusters should list at "
"least two redundant rings in `corosync.conf`."
msgstr ""
"最低でも2つの独立したクラスタ通信チャネルを設定しなければ、この機能は正しく動"
"作しません。HeartbeatベースのPacemakerクラスタでは `ha.cf` 設定ファイルに最低"
"2つのクラスタ通信のリンクを定義する必要があります。Corosyncクラスタでは最低2"
"つの冗長リングを `corosync.conf` に記載しなければなりません。"

#. type: Title ====
#, no-wrap
msgid "Resource-level fencing with `dopd`"
msgstr "`dopd` でのリソースレベルフェンシング"

#. type: Plain text
msgid ""
"indexterm:[dopd]In Heartbeat-based Pacemaker clusters, DRBD can use a "
"resources-level fencing facility named the _DRBD outdate-peer daemon_, or "
"`dopd` for short."
msgstr ""
"indexterm:[dopd]Heartbeatを使用したPacemakerクラスタでは、DRBDは _DRBD "
"outdate-peer daemon_ 、または略して `dopd` と呼ばれるリソースレベルのフェンシ"
"ング機能を使用できます。"

#. type: Title =====
#, no-wrap
msgid "Heartbeat configuration for `dopd`"
msgstr "`dopd` 用のHeartbeat設定"

#. type: Plain text
msgid ""
"To enable dopd, you must add these lines to your indexterm:[ha.cf (Heartbeat "
"configuration file)]`/etc/ha.d/ha.cf` file:"
msgstr ""
"dopdを有効にするには、次の行をindexterm:[ha.cf (Heartbeat configuration "
"file)] `/etc/ha.d/ha.cf` ファイルに追加します。"

#. type: delimited block -
#, no-wrap
msgid ""
"respawn hacluster /usr/lib/heartbeat/dopd\n"
"apiauth dopd gid=haclient uid=hacluster\n"
msgstr ""
"respawn hacluster /usr/lib/heartbeat/dopd\n"
"apiauth dopd gid=haclient uid=hacluster\n"

#. type: Plain text
msgid ""
"You may have to adjust ``dopd``'s path according to your preferred "
"distribution. On some distributions and architectures, the correct path is `/"
"usr/lib64/heartbeat/dopd`."
msgstr ""
"使用するディストリビューションに応じて `dopd` のパスを調整する必要がありま"
"す。一部のディストリビューションとアーキテクチャでは、正しいパスが `/usr/"
"lib64/heartbeat/dopd` になります。"

#. type: Plain text
msgid ""
"After you have made this change and copied `ha.cf` to the peer node, put "
"Pacemaker in maintenance mode and run `/etc/init.d/heartbeat reload` to have "
"Heartbeat re-read its configuration file. Afterwards, you should be able to "
"verify that you now have a running `dopd` process."
msgstr ""
"変更を行い `ha.cf` を対向ノードにコピーをしたら、設定ファイルを読み込むために"
"Pacemakerをメンテナンスモードにして '/etc/init.d/heartbeat reload' を実行しま"
"す。その後、 `dopd` プロセスが動作していることを確認できるでしょう。"

#. type: Plain text
msgid ""
"You can check for this process either by running `ps ax | grep dopd` or by "
"issuing `killall -0 dopd`."
msgstr ""
"このプロセスを確認するには、 `ps ax | grep dopd` を実行するか、 `killall -0 "
"dopd` を使用します。"

#. type: Title =====
#, no-wrap
msgid "DRBD Configuration for `dopd`"
msgstr "`dopd` 用のDRBD設定"

#. type: Plain text
msgid ""
"Once `dopd` is running, add these items to your DRBD resource configuration:"
msgstr "`dopd` が起動したら、DRBDリソース設定にアイテムを追加します。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource> {\n"
"    handlers {\n"
"        fence-peer \"/usr/lib/heartbeat/drbd-peer-outdater -t 5\";\n"
"        ...\n"
"    }\n"
"    net {\n"
"        fencing resource-only;\n"
"        ...\n"
"    }\n"
"    ...\n"
"}\n"
msgstr ""
"resource <resource> {\n"
"    handlers {\n"
"        fence-peer \"/usr/lib/heartbeat/drbd-peer-outdater -t 5\";\n"
"        ...\n"
"    }\n"
"    net {\n"
"        fencing resource-only;\n"
"        ...\n"
"    }\n"
"    ...\n"
"}\n"

#. type: Plain text
msgid ""
"As with `dopd`, your distribution may place the `drbd-peer-outdater` binary "
"in `/usr/lib64/heartbeat` depending on your system architecture."
msgstr ""
"`dopd` と同様に、システムのアーキテクチャやディストリビューションによっては "
"`drbd-peer-outdater` バイナリは `/usr/lib64/heartbeat` に配置されます。"

#. type: Plain text
msgid ""
"Finally, copy your `drbd.conf` to the peer node and issue `drbdadm adjust "
"resource` to reconfigure your resource and reflect your changes."
msgstr ""
"最後に、`drbd.conf` を対向ノードにコピーし、 `drbdadm adjust resource` を実行"
"して、リソースを再構成し、変更内容を反映します。"

#. type: Title =====
#, no-wrap
msgid "Testing `dopd` functionality"
msgstr "`dopd` 機能のテスト"

#. type: Plain text
msgid ""
"To test whether your `dopd` setup is working correctly, interrupt the "
"replication link of a configured and connected resource while Heartbeat "
"services are running normally. You may do so simply by physically unplugging "
"the network link, but that is fairly invasive. Instead, you may insert a "
"temporary `iptables` rule to drop incoming DRBD traffic to the TCP port used "
"by your resource."
msgstr ""
"設定した `dopd` が正しく動作しているか確認するためには、Heartbeatサービスが正"
"常に動作しているときに、構成済みの接続されているリソースのレプリケーションリ"
"ンクを遮断します。ネットワークリンクを物理的に取り外すことで簡単にできます"
"が、少々強引ではあります。あるいは、一時的に `iptables` ルールを追加して、"
"DRBD用TCPトラフィックを遮断します。"

#. type: Plain text
msgid ""
"After this, you will be able to observe the resource <<s-connection-states,"
"connection state>> change from indexterm:[connection state]indexterm:"
"[Connected (connection state)] _Connected_ to indexterm:[connection "
"state]indexterm:[Connecting (connection state)]_Connecting_. Allow a few "
"seconds to pass, and you should see the <<s-disk-states,disk state>>become "
"indexterm:[disk state]indexterm:[Outdated (disk state)]_Outdated/DUnknown_. "
"That is what `dopd` is responsible for."
msgstr ""
"すると、リソースの<<s-connection-states,コネクションステータス>>がindexterm:"
"[connection state]indexterm:[Connected (connection state)] _Connected_ から"
"indexterm:[connection state]indexterm:[Connecting (connection "
"state)]_Connecting_ に変わります。数秒後に<<s-disk-states,ディスク状態>>が"
"indexterm:[disk state]indexterm:[Outdated (disk state)]`Outdated/DUnknown` に"
"変化します。これで `dopd` が機能していることを確認できます。"

#. type: Plain text
msgid ""
"Any attempt to switch the outdated resource to the primary role will fail "
"after this."
msgstr ""
"これ以降は、古いリソースをプライマリロールに切り替えようとしても失敗します。"

#. type: Plain text
msgid ""
"When re-instituting network connectivity (either by plugging the physical "
"link or by removing the temporary `iptables` rule you inserted previously), "
"the connection state will change to _Connected_, and then promptly to "
"_SyncTarget_ (assuming changes occurred on the primary node during the "
"network interruption). Then you will be able to observe a brief "
"synchronization period, and finally, the previously outdated resource will "
"be marked as indexterm:[disk state]indexterm:[UpToDate (disk "
"state)]_UpToDate_ again."
msgstr ""
"物理リンクを接続するか、一時的な `iptables` ルールを削除してネットワーク接続"
"を再確立すると、コネクションステータスが Connected に変化し、すぐに "
"`SyncTarget` になります(ネットワーク遮断中に、プライマリノードで変化が起こっ"
"た場合)。同期が終了すると、無効状態であったリソースに再度indexterm:[disk "
"state]indexterm:[UpToDate (disk state)] `UpToDate` のマークが付きます。"

#. type: Title ====
#, no-wrap
msgid "Resource-level fencing using the Cluster Information Base (CIB)"
msgstr "CIB (Cluster Information Base)を使ったリソースレベルフェンシング"

#. type: Plain text
msgid ""
"In order to enable resource-level fencing for Pacemaker, you will have to "
"set two options in `drbd.conf`:"
msgstr ""
"Pacemaker用のリソースレベルフェンシングを有効にするには、 `drbd.conf` の2つの"
"オプション設定をする必要があります。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource> {\n"
"  net {\n"
"    fencing resource-only;\n"
"    ...\n"
"  }\n"
"  handlers {\n"
"    fence-peer \"/usr/lib/drbd/crm-fence-peer.9.sh\";\n"
"    unfence-peer \"/usr/lib/drbd/crm-unfence-peer.9.sh\";\n"
"    # Note: we used to abuse the after-resync-target handler to do the\n"
"    # unfence, but since 2016 have a dedicated unfence-peer handler.\n"
"    # Using the after-resync-target handler is wrong in some corner cases.\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"
msgstr ""
"resource <resource> {\n"
"  net {\n"
"    fencing resource-only;\n"
"    ...\n"
"  }\n"
"  handlers {\n"
"    fence-peer \"/usr/lib/drbd/crm-fence-peer.9.sh\";\n"
"    unfence-peer \"/usr/lib/drbd/crm-unfence-peer.9.sh\";\n"
"    # Note: we used to abuse the after-resync-target handler to do the\n"
"    # unfence, but since 2016 have a dedicated unfence-peer handler.\n"
"    # Using the after-resync-target handler is wrong in some corner cases.\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"

#. type: Plain text
msgid ""
"Thus, if the DRBD replication link becomes disconnected, the `crm-fence-"
"peer.9.sh` script contacts the cluster manager, determines the Pacemaker "
"Master/Slave resource associated with this DRBD resource, and ensures that "
"the Master/Slave resource no longer gets promoted on any node other than the "
"currently active one. Conversely, when the connection is re-established and "
"DRBD completes its synchronization process, then that constraint is removed "
"and the cluster manager is free to promote the resource on any node again."
msgstr ""
"DRBDレプリケーションリンクが切断された場合には `crm-fence-peer.sh` スクリプト"
"がクラスタ管理システムに連絡し、このDRBDリソースに関連付けられたPacemakerのマ"
"スター/スレーブリソースが決定され、現在アクティブなノード以外のすべてのノード"
"でマスター/スレーブリソースが昇格されることがないようにします。逆に、接続が再"
"確立してDRBDが同期プロセスが完了すると、この制約は解除され、クラスタ管理シス"
"テムは再び任意のノードのリソースを自由に昇格させることができます。"

#. type: Title ===
#, no-wrap
msgid "Using stacked DRBD resources in Pacemaker clusters"
msgstr "PacemakerクラスタでスタックDRBDリソースを使用する"

#. type: Plain text
msgid ""
"Stacking is deprecated in DRBD version 9.x, as more nodes can be implemented "
"on a single level. See <<s-drbdconf-conns>> for details."
msgstr ""
"DRBD9.xでは1つの階層で複数ノードを使用できるのでスタッキングは非推奨です。詳"
"細は <<s-drbdconf-conns>>をご参照ください。"

#. type: Plain text
msgid ""
"Stacked resources allow DRBD to be used for multi-level redundancy in "
"multiple-node clusters, or to establish off-site disaster recovery "
"capability. This section describes how to configure DRBD and Pacemaker in "
"such configurations."
msgstr ""
"スタックリソースを用いるとマルチノードクラスタの多重冗長性やオフサイトのディ"
"ザスタリカバリ機能を実現するためにDRBDを利用できます。本セクションではそのよ"
"うな構成におけるDRBDおよびPacemakerの設定方法について説明します。"

#. type: Title ====
#, no-wrap
msgid "Adding off-site disaster recovery to Pacemaker clusters"
msgstr "オフサイトディザスタリカバリ機能をPacemakerクラスタに追加する"

#. type: Plain text
msgid ""
"In this configuration scenario, we would deal with a two-node high "
"availability cluster in one site, plus a separate node which would "
"presumably be housed off-site. The third node acts as a disaster recovery "
"node and is a standalone server. Consider the following illustration to "
"describe the concept."
msgstr ""
"この構成シナリオでは、1つのサイトの2ノードの高可用性クラスタと、多くは別のサ"
"イトに設置する独立した1つのノードについて説明します。第3のノードは、ディザス"
"タリカバリノードとして機能するスタンドアロンサーバです。次の図で概念を説明し"
"ます。"

#. type: Block title
#, no-wrap
msgid "DRBD resource stacking in Pacemaker clusters"
msgstr "PacemakerクラスタのDRBDリソースのスタック"

#. type: Target for macro image
#, no-wrap
msgid "images/drbd-resource-stacking-pacemaker-3nodes.svg"
msgstr "images/drbd-resource-stacking-pacemaker-3nodes.svg"

#. type: Plain text
msgid ""
"In this example, 'alice' and 'bob' form a two-node Pacemaker cluster, "
"whereas 'charlie' is an off-site node not managed by Pacemaker."
msgstr ""
"この例では `alice` と `bob` が2ノードのPacemakerクラスタを構成し、 `charlie` "
"はPacemakerで管理されないオフサイトのノードです。"

#. type: Plain text
msgid ""
"To create such a configuration, you would first configure and initialize "
"DRBD resources as described in <<s-three-nodes>>. Then, configure Pacemaker "
"with the following CRM configuration:"
msgstr ""
"このような構成を作成するには、<<s-three-nodes>>の説明に従って、まずDRBDリソー"
"スを設定と初期化を行います。そして、次のCRM構成でPacemakerを設定します。"

#. type: delimited block -
#, no-wrap
msgid ""
"primitive p_drbd_r0 ocf:linbit:drbd \\\n"
"\tparams drbd_resource=\"r0\"\n"
msgstr ""
"primitive p_drbd_r0 ocf:linbit:drbd \\\n"
"\tparams drbd_resource=\"r0\"\n"

#. type: delimited block -
#, no-wrap
msgid ""
"primitive p_drbd_r0-U ocf:linbit:drbd \\\n"
"\tparams drbd_resource=\"r0-U\"\n"
msgstr ""
"primitive p_drbd_r0-U ocf:linbit:drbd \\\n"
"\tparams drbd_resource=\"r0-U\"\n"

#. type: delimited block -
#, no-wrap
msgid ""
"primitive p_ip_stacked ocf:heartbeat:IPaddr2 \\\n"
"\tparams ip=\"192.168.42.1\" nic=\"eth0\"\n"
msgstr ""
"primitive p_ip_stacked ocf:heartbeat:IPaddr2 \\\n"
"\tparams ip=\"192.168.42.1\" nic=\"eth0\"\n"

#. type: delimited block -
#, no-wrap
msgid ""
"ms ms_drbd_r0 p_drbd_r0 \\\n"
"\tmeta master-max=\"1\" master-node-max=\"1\" \\\n"
"        clone-max=\"2\" clone-node-max=\"1\" \\\n"
"        notify=\"true\" globally-unique=\"false\"\n"
msgstr ""
"ms ms_drbd_r0 p_drbd_r0 \\\n"
"\tmeta master-max=\"1\" master-node-max=\"1\" \\\n"
"        clone-max=\"2\" clone-node-max=\"1\" \\\n"
"        notify=\"true\" globally-unique=\"false\"\n"

#. type: delimited block -
#, no-wrap
msgid ""
"ms ms_drbd_r0-U p_drbd_r0-U \\\n"
"\tmeta master-max=\"1\" clone-max=\"1\" \\\n"
"        clone-node-max=\"1\" master-node-max=\"1\" \\\n"
"        notify=\"true\" globally-unique=\"false\"\n"
msgstr ""
"ms ms_drbd_r0-U p_drbd_r0-U \\\n"
"\tmeta master-max=\"1\" clone-max=\"1\" \\\n"
"        clone-node-max=\"1\" master-node-max=\"1\" \\\n"
"        notify=\"true\" globally-unique=\"false\"\n"

#. type: delimited block -
#, no-wrap
msgid ""
"colocation c_drbd_r0-U_on_drbd_r0 \\\n"
"        inf: ms_drbd_r0-U ms_drbd_r0:Master\n"
msgstr ""
"colocation c_drbd_r0-U_on_drbd_r0 \\\n"
"        inf: ms_drbd_r0-U ms_drbd_r0:Master\n"

#. type: delimited block -
#, no-wrap
msgid ""
"colocation c_drbd_r0-U_on_ip \\\n"
"        inf: ms_drbd_r0-U p_ip_stacked\n"
msgstr ""
"colocation c_drbd_r0-U_on_ip \\\n"
"        inf: ms_drbd_r0-U p_ip_stacked\n"

#. type: delimited block -
#, no-wrap
msgid ""
"colocation c_ip_on_r0_master \\\n"
"        inf: p_ip_stacked ms_drbd_r0:Master\n"
msgstr ""
"colocation c_ip_on_r0_master \\\n"
"        inf: p_ip_stacked ms_drbd_r0:Master\n"

#. type: delimited block -
#, no-wrap
msgid ""
"order o_ip_before_r0-U \\\n"
"        inf: p_ip_stacked ms_drbd_r0-U:start\n"
msgstr ""
"order o_ip_before_r0-U \\\n"
"        inf: p_ip_stacked ms_drbd_r0-U:start\n"

#. type: delimited block -
#, no-wrap
msgid ""
"order o_drbd_r0_before_r0-U \\\n"
"        inf: ms_drbd_r0:promote ms_drbd_r0-U:start\n"
msgstr ""
"order o_drbd_r0_before_r0-U \\\n"
"        inf: ms_drbd_r0:promote ms_drbd_r0-U:start\n"

#. type: Plain text
msgid ""
"Assuming you created this configuration in a temporary file named `/tmp/crm."
"txt`, you may import it into the live cluster configuration with the "
"following command:"
msgstr ""
"この構成を `/tmp/crm.txt` という一時ファイルに保存し、次のコマンドで現在のク"
"ラスタにインポートします。"

#. type: delimited block -
#, no-wrap
msgid "crm configure < /tmp/crm.txt\n"
msgstr "crm configure < /tmp/crm.txt\n"

#. type: Plain text
msgid ""
"This configuration will ensure that the following actions occur in the "
"correct order on the 'alice'/'bob' cluster:"
msgstr ""
"この設定により、次の操作が正しい順序で `alice` と `bob` クラスタで行われま"
"す。"

#. type: Plain text
msgid ""
"Pacemaker starts the DRBD resource `r0` on both cluster nodes, and promotes "
"one node to the Master (DRBD Primary) role."
msgstr ""
"PacemakerはDRBDリソース `r0` を両クラスタノードで開始し、1つのノードをマス"
"ター(DRBD Primary)ロールに昇格させます。"

#. type: Plain text
msgid ""
"Pacemaker then starts the IP address 192.168.42.1, which the stacked "
"resource is to use for replication to the third node. It does so on the node "
"it has previously promoted to the Master role for `r0` DRBD resource."
msgstr ""
"PacemakerはIPアドレス192.168.42.1の、第3ノードへのレプリケーションに使用する"
"スタックリソースを開始します。これは、 `r0` DRBDリソースのマスターロールに昇"
"格したノードで行われます。"

#. type: Plain text
msgid ""
"On the node which now has the Primary role for `r0` and also the replication "
"IP address for `r0-U`, Pacemaker now starts the `r0-U` DRBD resource, which "
"connects and replicates to the off-site node."
msgstr ""
"`r0` がプライマリになっていて、かつ、r0-U のレプリケーション用IPアドレスを持"
"つノードで、Pacemakerはオフサイトノードに接続およびレプリケートを行う `r0-U` "
"DRBDリソースを開始します。"

#. type: Plain text
msgid ""
"Pacemaker then promotes the `r0-U` resource to the Primary role too, so it "
"can be used by an application."
msgstr ""
"最後に、Pacemakerが `r0-U` リソースもプライマリロールに昇格させるため、ディザ"
"スタリカバリノードとのレプリケーションが始まります。"

#. type: Plain text
msgid ""
"Thus, this Pacemaker configuration ensures that there is not only full data "
"redundancy between cluster nodes, but also to the third, off-site node."
msgstr ""
"このように、このPacemaker構成では、クラスタノード間だけではなく第3のオフサイ"
"トノードでも完全なデータ冗長性が確保されます。"

#. type: Plain text
msgid ""
"This type of setup is usually deployed together with <<s-drbd-proxy,DRBD "
"Proxy>>."
msgstr ""
"このタイプの設定には通常、<<s-drbd-proxy,DRBD Proxy>>と合わせて使用するのが一"
"般的です。"

#. type: Title ====
#, no-wrap
msgid "Using stacked resources to achieve 4-way redundancy in Pacemaker clusters"
msgstr "スタックリソースを使って、Pacemakerクラスタの4ノード冗長化を実現する"

#. type: Plain text
msgid ""
"In this configuration, a total of three DRBD resources (two unstacked, one "
"stacked) are used to achieve 4-way storage redundancy. This means that of a "
"4-node cluster, up to three nodes can fail while still providing service "
"availability."
msgstr ""
"この構成では、全部で3つのDRBDリソース(2つの非スタック、1つのスタック)を使っ"
"て、4ノードのストレージ冗長化を実現します。4ノードクラスタの目的と意義は、3"
"ノードまで障害が発生しても、可用なサービスを提供し続けることが可能であること"
"です。"

#. type: Plain text
msgid "Consider the following illustration to explain the concept."
msgstr "次の例で概念を説明します。"

#. type: Target for macro image
#, no-wrap
msgid "images/drbd-resource-stacking-pacemaker-4nodes.svg"
msgstr "images/drbd-resource-stacking-pacemaker-4nodes.svg"

#. type: Plain text
msgid ""
"In this example, 'alice', 'bob', 'charlie', and 'daisy' form two two-node "
"Pacemaker clusters. 'alice' and 'bob' form the cluster named `left` and "
"replicate data using a DRBD resource between them, while 'charlie' and "
"'daisy' do the same with a separate DRBD resource, in a cluster named "
"`right`. A third, stacked DRBD resource connects the two clusters."
msgstr ""
"この例では、 `alice` と `bob` ならびに `charlie` と `daisy` が2セットの2ノー"
"ドPacemakerクラスタを構成しています。`alice` と `bob` は `left` という名前の"
"クラスタを構成し、互いにDRBDリソースを使ってデータをレプリケートします。一方 "
"`charlie` と `daisy` も同様に、 `right` という名前の別のDRBDリソースでレプリ"
"ケートします。3番目に、DRBDリソースをスタックし、2つのクラスタを接続します。"

#. type: Plain text
msgid ""
"Due to limitations in the Pacemaker cluster manager as of Pacemaker version "
"1.0.5, it is not possible to create this setup in a single four-node cluster "
"without disabling CIB validation, which is an advanced process not "
"recommended for general-purpose use. It is anticipated that this is being "
"addressed in future Pacemaker releases."
msgstr ""
"Pacemakerバージョン1.0.5のPacemakerクラスタの制限により、CIBバリデーションを"
"有効にしたままで4ノードクラスタをつくることはできません。CIBバリデーションは"
"汎用的に使うのには向かない特殊な高度な処理です。これは、今後のPacemakerのリ"
"リースで解決されることが予想されます。"

#. type: Plain text
msgid ""
"To create such a configuration, you would first configure and initialize "
"DRBD resources as described in <<s-three-nodes>> (except that the remote "
"half of the DRBD configuration is also stacked, not just the local cluster). "
"Then, configure Pacemaker with the following CRM configuration, starting "
"with the cluster `left`:"
msgstr ""
"このような構成を作成するには、<<s-three-nodes>>の説明に従って、まずDRBDリソー"
"スを設定して初期化します(ただし、ローカルがクラスタになるだけでなく、リモート"
"側にもクラスタになる点が異なります)。そして、次のCRM構成でPacemakerを設定"
"し、 `left` クラスタを開始します。"

#. type: delimited block -
#, no-wrap
msgid ""
"primitive p_drbd_left ocf:linbit:drbd \\\n"
"\tparams drbd_resource=\"left\"\n"
msgstr ""
"primitive p_drbd_left ocf:linbit:drbd \\\n"
"\tparams drbd_resource=\"left\"\n"

#. type: delimited block -
#, no-wrap
msgid ""
"primitive p_drbd_stacked ocf:linbit:drbd \\\n"
"\tparams drbd_resource=\"stacked\"\n"
msgstr ""
"primitive p_drbd_stacked ocf:linbit:drbd \\\n"
"\tparams drbd_resource=\"stacked\"\n"

#. type: delimited block -
#, no-wrap
msgid ""
"primitive p_ip_stacked_left ocf:heartbeat:IPaddr2 \\\n"
"\tparams ip=\"10.9.9.100\" nic=\"eth0\"\n"
msgstr ""
"primitive p_ip_stacked_left ocf:heartbeat:IPaddr2 \\\n"
"\tparams ip=\"10.9.9.100\" nic=\"eth0\"\n"

#. type: delimited block -
#, no-wrap
msgid ""
"ms ms_drbd_left p_drbd_left \\\n"
"\tmeta master-max=\"1\" master-node-max=\"1\" \\\n"
"        clone-max=\"2\" clone-node-max=\"1\" \\\n"
"        notify=\"true\"\n"
msgstr ""
"ms ms_drbd_left p_drbd_left \\\n"
"\tmeta master-max=\"1\" master-node-max=\"1\" \\\n"
"        clone-max=\"2\" clone-node-max=\"1\" \\\n"
"        notify=\"true\"\n"

#. type: delimited block -
#, no-wrap
msgid ""
"ms ms_drbd_stacked p_drbd_stacked \\\n"
"\tmeta master-max=\"1\" clone-max=\"1\" \\\n"
"        clone-node-max=\"1\" master-node-max=\"1\" \\\n"
"        notify=\"true\" target-role=\"Master\"\n"
msgstr ""
"ms ms_drbd_stacked p_drbd_stacked \\\n"
"\tmeta master-max=\"1\" clone-max=\"1\" \\\n"
"        clone-node-max=\"1\" master-node-max=\"1\" \\\n"
"        notify=\"true\" target-role=\"Master\"\n"

#. type: delimited block -
#, no-wrap
msgid ""
"colocation c_ip_on_left_master \\\n"
"        inf: p_ip_stacked_left ms_drbd_left:Master\n"
msgstr ""
"colocation c_ip_on_left_master \\\n"
"        inf: p_ip_stacked_left ms_drbd_left:Master\n"

#. type: delimited block -
#, no-wrap
msgid ""
"colocation c_drbd_stacked_on_ip_left \\\n"
"        inf: ms_drbd_stacked p_ip_stacked_left\n"
msgstr ""
"colocation c_drbd_stacked_on_ip_left \\\n"
"        inf: ms_drbd_stacked p_ip_stacked_left\n"

#. type: delimited block -
#, no-wrap
msgid ""
"order o_ip_before_stacked_left \\\n"
"        inf: p_ip_stacked_left ms_drbd_stacked:start\n"
msgstr ""
"order o_ip_before_stacked_left \\\n"
"        inf: p_ip_stacked_left ms_drbd_stacked:start\n"

#. type: delimited block -
#, no-wrap
msgid ""
"order o_drbd_left_before_stacked_left \\\n"
"        inf: ms_drbd_left:promote ms_drbd_stacked:start\n"
msgstr ""
"order o_drbd_left_before_stacked_left \\\n"
"        inf: ms_drbd_left:promote ms_drbd_stacked:start\n"

#. type: Plain text
msgid ""
"After adding this configuration to the CIB, Pacemaker will execute the "
"following actions:"
msgstr "CIBに上記の設定を投入すると、Pacemakerは以下のアクションを実行します。"

#. type: Plain text
msgid ""
"Bring up the DRBD resource `left` replicating between 'alice' and 'bob' "
"promoting the resource to the Master role on one of these nodes."
msgstr ""
"`alice` と `bob` をレプリケートするリソース `left` を起動し、いずれかのノード"
"をマスターに昇格します。"

#. type: Plain text
msgid ""
"Bring up the IP address 10.9.9.100 (on either 'alice' or 'bob', depending on "
"which of these holds the Master role for the resource `left`)."
msgstr ""
"IPアドレス10.9.9.100 ( `alice` または `bob` 、いずれかのリソース `left` のマ"
"スターロールを担っている方)を起動します。"

#. type: Plain text
msgid ""
"Bring up the DRBD resource `stacked` on the same node that holds the just-"
"configured IP address."
msgstr ""
"IPアドレスを設定したのと同じノード上で、DRBDリソース `stacked` が起動します。"

#. type: Plain text
msgid "Promote the stacked DRBD resource to the Primary role."
msgstr ""
"target-role=\"Master\"が指定されているため、スタックリソースがプライマリにな"
"ります。"

#. type: Plain text
msgid ""
"Now, proceed on the cluster `right` by creating the following configuration:"
msgstr "さて、以下の設定を作り、クラスタ `right` に進みましょう。"

#. type: delimited block -
#, no-wrap
msgid ""
"primitive p_drbd_right ocf:linbit:drbd \\\n"
"\tparams drbd_resource=\"right\"\n"
msgstr ""
"primitive p_drbd_right ocf:linbit:drbd \\\n"
"\tparams drbd_resource=\"right\"\n"

#. type: delimited block -
#, no-wrap
msgid ""
"primitive p_ip_stacked_right ocf:heartbeat:IPaddr2 \\\n"
"\tparams ip=\"10.9.10.101\" nic=\"eth0\"\n"
msgstr ""
"primitive p_ip_stacked_right ocf:heartbeat:IPaddr2 \\\n"
"\tparams ip=\"10.9.10.101\" nic=\"eth0\"\n"

#. type: delimited block -
#, no-wrap
msgid ""
"ms ms_drbd_right p_drbd_right \\\n"
"\tmeta master-max=\"1\" master-node-max=\"1\" \\\n"
"        clone-max=\"2\" clone-node-max=\"1\" \\\n"
"        notify=\"true\"\n"
msgstr ""
"ms ms_drbd_right p_drbd_right \\\n"
"\tmeta master-max=\"1\" master-node-max=\"1\" \\\n"
"        clone-max=\"2\" clone-node-max=\"1\" \\\n"
"        notify=\"true\"\n"

#. type: delimited block -
#, no-wrap
msgid ""
"ms ms_drbd_stacked p_drbd_stacked \\\n"
"\tmeta master-max=\"1\" clone-max=\"1\" \\\n"
"        clone-node-max=\"1\" master-node-max=\"1\" \\\n"
"        notify=\"true\" target-role=\"Slave\"\n"
msgstr ""
"ms ms_drbd_stacked p_drbd_stacked \\\n"
"\tmeta master-max=\"1\" clone-max=\"1\" \\\n"
"        clone-node-max=\"1\" master-node-max=\"1\" \\\n"
"        notify=\"true\" target-role=\"Slave\"\n"

#. type: delimited block -
#, no-wrap
msgid ""
"colocation c_drbd_stacked_on_ip_right \\\n"
"        inf: ms_drbd_stacked p_ip_stacked_right\n"
msgstr ""
"colocation c_drbd_stacked_on_ip_right \\\n"
"        inf: ms_drbd_stacked p_ip_stacked_right\n"

#. type: delimited block -
#, no-wrap
msgid ""
"colocation c_ip_on_right_master \\\n"
"        inf: p_ip_stacked_right ms_drbd_right:Master\n"
msgstr ""
"colocation c_ip_on_right_master \\\n"
"        inf: p_ip_stacked_right ms_drbd_right:Master\n"

#. type: delimited block -
#, no-wrap
msgid ""
"order o_ip_before_stacked_right \\\n"
"        inf: p_ip_stacked_right ms_drbd_stacked:start\n"
msgstr ""
"order o_ip_before_stacked_right \\\n"
"        inf: p_ip_stacked_right ms_drbd_stacked:start\n"

#. type: delimited block -
#, no-wrap
msgid ""
"order o_drbd_right_before_stacked_right \\\n"
"        inf: ms_drbd_right:promote ms_drbd_stacked:start\n"
msgstr ""
"order o_drbd_right_before_stacked_right \\\n"
"        inf: ms_drbd_right:promote ms_drbd_stacked:start\n"

#. type: Plain text
msgid ""
"Bring up the DRBD resource `right` replicating between 'charlie' and "
"'daisy', promoting the resource to the Master role on one of these nodes."
msgstr ""
"`charlie` と `daisy` 間をレプリケートするDRBDリソース `right` を起動し、これ"
"らのノードのいずれかをマスターにします。"

#. type: Plain text
msgid ""
"Bring up the IP address 10.9.10.101 (on either 'charlie' or 'daisy', "
"depending on which of these holds the Master role for the resource `right`)."
msgstr ""
"IPアドレス10.9.10.101を開始します( `charlie` または `daisy` のいずれかのリ"
"ソース `right` のマスターロールを担っている方)を起動します)。"

#. type: Plain text
msgid ""
"Leave the stacked DRBD resource in the Secondary role (due to `target-role="
"\"Slave\"`)."
msgstr ""
"`target-role=\"Slave\"` が指定されているため、スタックリソースはセカンダリの"
"ままになります。"

#. type: Title ===
#, no-wrap
msgid "Configuring DRBD to replicate between two SAN-backed Pacemaker clusters"
msgstr "2セットのSANベースPacemakerクラスタ間をDRBDでレプリケート"

#. type: Plain text
msgid ""
"indexterm:[IP address, floating peers]This is a somewhat advanced setup "
"usually employed in split-site configurations. It involves two separate "
"Pacemaker clusters, where each cluster has access to a separate Storage Area "
"Network (SAN). DRBD is then used to replicate data stored on that SAN, "
"across an IP link between sites."
msgstr ""
"これは、拠点が離れた構成に用いるやや高度な設定です。2つのクラスタが関与します"
"が、それぞれのクラスタは別々のSANストレージにアクセスします。サイト間のIPネッ"
"トワークを使って2つのSANストレージのデータを同期させるためにDRBDを使います。"

#. type: Plain text
msgid "Consider the following illustration to describe the concept."
msgstr "次の図で概念を説明します。"

#. type: Block title
#, no-wrap
msgid "Using DRBD to replicate between SAN-based clusters"
msgstr "SANベースのクラスタ間のレプリケートにDRBDを用いる"

#. type: Target for macro image
#, no-wrap
msgid "images/drbd-pacemaker-floating-peers.svg"
msgstr "images/drbd-pacemaker-floating-peers.svg"

#. type: Plain text
msgid ""
"Which of the individual nodes in each site currently acts as the DRBD peer "
"is not explicitly defined -- the DRBD peers <<s-floating-peers,are said to "
"_float_>>; that is, DRBD binds to virtual IP addresses not tied to a "
"specific physical machine."
msgstr ""
"このような構成の場合、DRBDの通信にかかわるホストをあらかじめ明示的に指定して"
"おくことは不可能です。つまり、動的接続構成の場合、DRBDは特定の物理マシンでは"
"なく<<s-floating-peers,_仮想IPアドレス_>>で通信先を決めます。"

#. type: Plain text
msgid ""
"This type of setup is usually deployed together with <<s-drbd-proxy,DRBD "
"Proxy>> and/or <<s-truck-based-replication,truck based replication>>."
msgstr ""
"このタイプの設定は通常、<<s-drbd-proxy,DRBD Proxy>>や、または<<s-truck-based-"
"replication,トラック輸送のレプリケーション>>と組み合わせます。"

#. type: Plain text
msgid ""
"Since this type of setup deals with shared storage, configuring and testing "
"STONITH is absolutely vital for it to work properly."
msgstr ""
"このタイプの設定は共有ストレージを扱うので、STONITHを構築してテストすること"
"が、正常動作の確認のためには必要不可欠です。ただし、STONITHは本書の範囲を超え"
"るので、以下の設定例は省略しています。"

#. type: Title ====
#, no-wrap
msgid "DRBD resource configuration"
msgstr "DRBDリソース構成"

#. type: Plain text
msgid ""
"To enable your DRBD resource to float, configure it in `drbd.conf` in the "
"following fashion:"
msgstr ""
"動的接続するDRBDリソースを有効にするには、次のように `drbd.conf` を設定しま"
"す。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource> {\n"
"  ...\n"
"  device /dev/drbd0;\n"
"  disk /dev/sda1;\n"
"  meta-disk internal;\n"
"  floating 10.9.9.100:7788;\n"
"  floating 10.9.10.101:7788;\n"
"}\n"
msgstr ""
"resource <resource> {\n"
"  ...\n"
"  device /dev/drbd0;\n"
"  disk /dev/sda1;\n"
"  meta-disk internal;\n"
"  floating 10.9.9.100:7788;\n"
"  floating 10.9.10.101:7788;\n"
"}\n"

#. type: Plain text
msgid ""
"The `floating` keyword replaces the `on <host>` sections normally found in "
"the resource configuration. In this mode, DRBD identifies peers by IP "
"address and TCP port, rather than by host name. It is important to note that "
"the addresses specified must be virtual cluster IP addresses, rather than "
"physical node IP addresses, for floating to function properly. As shown in "
"the example, in split-site configurations the two floating addresses can be "
"expected to belong to two separate IP networks -- it is thus vital for "
"routers and firewalls to properly allow DRBD replication traffic between the "
"nodes."
msgstr ""
"`floating` キーワードは、通常リソース設定の `on <host>` セクションの代わりに"
"指定します。このモードでは、DRBDはホスト名ではなく、IPアドレスやTCPポートで相"
"互接続を認識します。動的接続を適切に運用するには、物理IPアドレスではなく仮想"
"IPアドレスを指定してください(これはとても重要です)。上の例のように、離れた地"
"点ではそれぞれ別々のIPネットワークに属するのが一般的です。したがって、動的接"
"続を正しく運用するにはDRBDの設定だけではなく、ルータやファイアウォールの適切"
"な設定も重要です。"

#. type: Title ====
#, no-wrap
msgid "Pacemaker resource configuration"
msgstr "Pacemakerリソース構成"

#. type: Plain text
msgid ""
"A DRBD floating peers setup, in terms of Pacemaker configuration, involves "
"the following items (in each of the two Pacemaker clusters involved):"
msgstr ""
"DRBD動的接続の設定には、少なくともPacemaker設定が必要です(2つの各Pacemakerク"
"ラスタに係わる)。"

#. type: Plain text
msgid "A virtual cluster IP address."
msgstr "仮想クラスタIPアドレス"

#. type: Plain text
msgid "A master/slave DRBD resource (using the DRBD OCF resource agent)."
msgstr "マスター/スレーブDRBDリソース(DRBD OCFリソースエージェントを使用)"

#. type: Plain text
msgid ""
"Pacemaker constraints ensuring that resources are started on the correct "
"nodes, and in the correct order."
msgstr "リソースを適切なノードで正しい順序に起動するための各種制約"

#. type: Plain text
msgid ""
"To configure a resource named `mysql` in a floating peers configuration in a "
"2-node cluster, using the replication address `10.9.9.100`, configure "
"Pacemaker with the following `crm` commands:"
msgstr ""
"レプリケーション用アドレスに `10.9.9.100` を使う動的接続構成と、 `mysql` とい"
"うリソースを構築するには、次のように `crm` コマンドでPacemakerを設定します。"

#. type: delimited block -
#, no-wrap
msgid ""
"crm configure\n"
"crm(live)configure# primitive p_ip_float_left ocf:heartbeat:IPaddr2 \\\n"
"                    params ip=10.9.9.100\n"
"crm(live)configure# primitive p_drbd_mysql ocf:linbit:drbd \\\n"
"                    params drbd_resource=mysql\n"
"crm(live)configure# ms ms_drbd_mysql drbd_mysql \\\n"
"                    meta master-max=\"1\" master-node-max=\"1\" \\\n"
"                         clone-max=\"1\" clone-node-max=\"1\" \\\n"
"                         notify=\"true\" target-role=\"Master\"\n"
"crm(live)configure# order drbd_after_left \\\n"
"                      inf: p_ip_float_left ms_drbd_mysql\n"
"crm(live)configure# colocation drbd_on_left \\\n"
"                      inf: ms_drbd_mysql p_ip_float_left\n"
"crm(live)configure# commit\n"
"bye\n"
msgstr ""
"crm configure\n"
"crm(live)configure# primitive p_ip_float_left ocf:heartbeat:IPaddr2 \\\n"
"                    params ip=10.9.9.100\n"
"crm(live)configure# primitive p_drbd_mysql ocf:linbit:drbd \\\n"
"                    params drbd_resource=mysql\n"
"crm(live)configure# ms ms_drbd_mysql drbd_mysql \\\n"
"                    meta master-max=\"1\" master-node-max=\"1\" \\\n"
"                         clone-max=\"1\" clone-node-max=\"1\" \\\n"
"                         notify=\"true\" target-role=\"Master\"\n"
"crm(live)configure# order drbd_after_left \\\n"
"                      inf: p_ip_float_left ms_drbd_mysql\n"
"crm(live)configure# colocation drbd_on_left \\\n"
"                      inf: ms_drbd_mysql p_ip_float_left\n"
"crm(live)configure# commit\n"
"bye\n"

#. type: Plain text
msgid "Bring up the IP address 10.9.9.100 (on either 'alice' or 'bob')."
msgstr "IPアドレス10.9.9.100を起動する( `alice` または `bob` のいずれか)"

#. type: Plain text
msgid "Bring up the DRBD resource according to the IP address configured."
msgstr "IPアドレスの設定にもとづいてDRBDリソースを起動します。"

#. type: Plain text
msgid "Promote the DRBD resource to the Primary role."
msgstr "DRBDリソースをプライマリにします。"

#. type: Plain text
msgid ""
"Then, in order to create the matching configuration in the other cluster, "
"configure _that_ Pacemaker instance with the following commands:"
msgstr ""
"次に、もう一方のクラスタで、これとマッチングする設定を作成します。 `その` "
"Pacemakerのインスタンスを次のコマンドで設定します。"

#. type: delimited block -
#, no-wrap
msgid ""
"crm configure\n"
"crm(live)configure# primitive p_ip_float_right ocf:heartbeat:IPaddr2 \\\n"
"                    params ip=10.9.10.101\n"
"crm(live)configure# primitive drbd_mysql ocf:linbit:drbd \\\n"
"                    params drbd_resource=mysql\n"
"crm(live)configure# ms ms_drbd_mysql drbd_mysql \\\n"
"                    meta master-max=\"1\" master-node-max=\"1\" \\\n"
"                         clone-max=\"1\" clone-node-max=\"1\" \\\n"
"                         notify=\"true\" target-role=\"Slave\"\n"
"crm(live)configure# order drbd_after_right \\\n"
"                      inf: p_ip_float_right ms_drbd_mysql\n"
"crm(live)configure# colocation drbd_on_right\n"
"                      inf: ms_drbd_mysql p_ip_float_right\n"
"crm(live)configure# commit\n"
"bye\n"
msgstr ""
"crm configure\n"
"crm(live)configure# primitive p_ip_float_right ocf:heartbeat:IPaddr2 \\\n"
"                    params ip=10.9.10.101\n"
"crm(live)configure# primitive drbd_mysql ocf:linbit:drbd \\\n"
"                    params drbd_resource=mysql\n"
"crm(live)configure# ms ms_drbd_mysql drbd_mysql \\\n"
"                    meta master-max=\"1\" master-node-max=\"1\" \\\n"
"                         clone-max=\"1\" clone-node-max=\"1\" \\\n"
"                         notify=\"true\" target-role=\"Slave\"\n"
"crm(live)configure# order drbd_after_right \\\n"
"                      inf: p_ip_float_right ms_drbd_mysql\n"
"crm(live)configure# colocation drbd_on_right\n"
"                      inf: ms_drbd_mysql p_ip_float_right\n"
"crm(live)configure# commit\n"
"bye\n"

#. type: Plain text
msgid "Bring up the IP address 10.9.10.101 (on either 'charlie' or 'daisy')."
msgstr "IPアドレス10.9.10.101を起動する(charlie または daisy のいずれか)。"

#. type: Plain text
msgid ""
"Leave the DRBD resource in the Secondary role (due to `target-role=\"Slave"
"\"`)."
msgstr ""
"target-role=\"Slave\" が指定されているため、DRBDリソースは、セカンダリのまま"
"になります。"

#. type: Title ====
#, no-wrap
msgid "Site fail-over"
msgstr "サイトのフェイルオーバ"

#. type: Plain text
msgid ""
"In split-site configurations, it may be necessary to transfer services from "
"one site to another. This may be a consequence of a scheduled transition, or "
"of a disastrous event. In case the transition is a normal, anticipated "
"event, the recommended course of action is this:"
msgstr ""
"拠点が離れた構成では、サービス自体をある拠点から他の拠点に切り替える必要が生"
"じるかもしれません。これは、計画された移行か、または悲惨な出来事の結果でしょ"
"う。計画にもとづく移行の場合、一般的な手順は次のようになります。"

#. type: Plain text
msgid ""
"Connect to the cluster on the site about to relinquish resources, and change "
"the affected DRBD resource's `target-role` attribute from `Master` to "
"`Slave`. This will shut down any resources depending on the Primary role of "
"the DRBD resource, demote it, and continue to run, ready to receive updates "
"from a new Primary."
msgstr ""
"サービス移行元のクラスタに接続し、影響を受けるDRBDリソースの `target-role` 属"
"性を `マスター` から `スレーブ` に変更します。DRBDがプライマリであることに依"
"存したリソースは自動的に停止し、その後DRBDはセカンダリに降格します。"

#. type: Plain text
msgid ""
"Connect to the cluster on the site about to take over resources, and change "
"the affected DRBD resource's `target-role` attribute from `Slave` to "
"`Master`. This will promote the DRBD resources, start any other Pacemaker "
"resources depending on the Primary role of the DRBD resource, and replicate "
"updates to the remote site."
msgstr ""
"サービス移行先のクラスタに接続し、DRBDリソースの `target-role` 属性を "
"`Slave` から `Master` に変更します。DRBDリソースは昇格し、DRBDリソースのプラ"
"イマリ側に依存した他のPacemakerリソースを起動します。 そしてリモート拠点への"
"同期が更新されます。"

#. type: Plain text
msgid "To fail back, simply reverse the procedure."
msgstr "フェイルバックをするには、手順を逆にするだけです。"

#. type: Plain text
msgid ""
"In the event that of a catastrophic outage on the active site, it can be "
"expected that the site is off line and no longer replicated to the backup "
"site. In such an event:"
msgstr ""
"アクティブな拠点で壊滅的な災害が起きると、その拠点はオフラインになり、以降そ"
"の拠点からバックアップ側にレプリケートできなくなる可能性があります。このよう"
"な場合には"

#. type: Plain text
msgid ""
"Connect to the cluster on the still-functioning site resources, and change "
"the affected DRBD resource's `target-role` attribute from `Slave` to "
"`Master`. This will promote the DRBD resources, and start any other "
"Pacemaker resources depending on the Primary role of the DRBD resource."
msgstr ""
"リモートサイトが機能しているならそのクラスタに接続し、DRBDリソースの `target-"
"role` 属性を `スレーブ` から `マスター` に変更します。DRBDリソースは昇格し、"
"DRBDリソースがプライマリになることに依存する他のPacemakerリソースも起動しま"
"す。"

#. type: Plain text
msgid ""
"When the original site is restored or rebuilt, you may connect the DRBD "
"resources again, and subsequently fail back using the reverse procedure."
msgstr ""
"元の拠点が回復または再構成されると、DRBDリソースに再度接続できるようになりま"
"す。その後、逆の手順でフェイルバックします。"

#. type: Title ===
#, no-wrap
msgid "Importing DRBD's promotion scores into the CIB"
msgstr "DRBD のプロモーションスコアを CIB にインポートする"

#. type: Plain text
msgid ""
"Everything described in this section depends on the `drbd-attr` OCF resource "
"agent.  It is available since drbd-utils version 9.15.0. On Debian/Ubuntu "
"systems this is part of the `drbd-utils` package. On RPM based Linux "
"distributions you need to install the `drbd-pacemaker` package."
msgstr ""
"このセクションで説明するものはすべて `drbd-attr` OCF リソースエージェントに依"
"存します。drbd-utils バージョン 9.15.0 以降で使用できます。Debian/Ubuntu シス"
"テムでは、これは `drbd-utils` パッケージの一部です。 RPM ベースの Linux ディ"
"ストリビューションでは `drbd-pacemaker` パッケージをインストールする必要があ"
"ります。"

#. type: Plain text
msgid ""
"Every DRBD resource exposes a _promotion score_ on each node where it is "
"configured. It is a numeric value that might be 0 or positive. The value "
"reflects how desirable it is to promote the resource to master on this "
"particular node. A node that has an _UpToDate_ disk and two _UpToDate_ "
"replicas has a higher score than a node with an _UpToDate_ disk and just one "
"_UpToDate_ replica."
msgstr ""
"すべての DRBD リソースは、それが構成されている各ノードでプロモーションスコア"
"を公開します。これは 0 または正の数値です。この値は、このノードでリソースをマ"
"スターに昇格させることがどれほど望ましいかを示します。 _UpToDate_ ディスクと "
"2 つの _UpToDate_ レプリカを持つノードは _UpToDate_ ディスクと 1 つの "
"_UpToDate_ レプリカを持つノードよりもスコアが高くなります。"

#. type: Plain text
msgid ""
"During startup, the _promotion score_ is 0.  E.g., before the DRBD device "
"has its backing device attached, or, if quorum is enabled, before quorum is "
"gained.  A value of 0 indicates that a promotion request will fail, and is "
"mapped to a pacemaker score that indicates _must not run here_."
msgstr ""
"たとえば DRBD デバイスに下位デバイスが接続される前、または、クォーラムが有効"
"になっている場合は、クォーラムが取得される前はプロモーションスコアは 0 です。"
"値 0 は、プロモーションリクエストが失敗することを意味し、ここで実行してはなら"
"ないことを pacemaker に指示します。"

#. type: Plain text
msgid ""
"The `drbd-attr` OCF resource agent imports these promotion scores into node "
"attributes of a Pacemaker cluster. It needs to be configured like this:"
msgstr ""
"`drbd-attr` OCF リソースエージェントは、これらのプロモーションスコアを "
"Pacemaker クラスターのノード属性にインポートします。次のようにして構成しま"
"す。"

#. type: delimited block -
#, no-wrap
msgid ""
"primitive drbd-attr ocf:linbit:drbd-attr\n"
"clone drbd-attr-clone drbd-attr\n"
msgstr ""
"primitive drbd-attr ocf:linbit:drbd-attr\n"
"clone drbd-attr-clone drbd-attr\n"

#. type: Plain text
msgid ""
"These are _transient_ attributes (have a _lifetime_ of _reboot_ in pacemaker "
"speak). That means, after a _reboot_ of the node, or local restart of "
"pacemaker, those attributes will not exist until an instance of `drbd-attr` "
"is started on that node."
msgstr ""
"これらは一時的な属性です（再起動時に定義される）。つまり、ノードの再起動後、"
"または pacemaker のローカル再起動後、これらの属性はそのノードで `drbd-attr` "
"のインスタンスが開始されるまで存在しません。"

#. type: Plain text
msgid "You can inspect the generated attributes with `crm_mon -A -1`."
msgstr "生成された属性は `crm_mon -A-1` で確認できます。"

#. type: Plain text
msgid ""
"These attributed can be used in constraints for services that depend on the "
"DRBD devices, or, when managing DRBD with the `ocf:linbit:drbd` resource "
"agent, for the _Master_ role of that DRBD instance."
msgstr ""
"これらの属性は、DRBD デバイスに依存するサービスの制約で使用できます。また "
"`ocf:linbit:drbd` リソースエージェントで DRBD を管理する場合は、その DRBD イ"
"ンスタンスの _Master_ ロールでも使用できます。"

#. type: Plain text
msgid ""
"Here is an example location constraint for the example resource from <<s-"
"pacemaker-drbd-background>>"
msgstr ""
"以下は、<<s-pacemaker-drbd-background>> のサンプルリソースのロケーション制約"
"の例です。"

#. type: delimited block -
#, no-wrap
msgid ""
"location lo_fs_mysql fs_mysql \\\n"
"        rule -inf: not_defined drbd-promotion-score-mysql \\\n"
"        rule drbd-promotion-score-mysql: defined drbd-promotion-score-mysql\n"
msgstr ""
"location lo_fs_mysql fs_mysql \\\n"
"        rule -inf: not_defined drbd-promotion-score-mysql \\\n"
"        rule drbd-promotion-score-mysql: defined drbd-promotion-score-mysql\n"

#. type: Plain text
msgid ""
"This means, that as long as the attribute is not defined, the fs_mysql file "
"system cannot be mounted here. When the attribute is defined, its value "
"becomes the score of the location constraint."
msgstr ""
"これは、属性が定義されていない限り、fs_mysql ファイルシステムをここにマウント"
"できないことを意味します。属性が定義されると、その値がロケーション制約のスコ"
"アになります。"

#. type: Plain text
msgid ""
"This can also be used to cause Pacemaker to migrate a service away when DRBD "
"loses a local backing device. Because a failed backing block device causes "
"the promotion score to drop, other nodes with working backing devices will "
"expose higher promotion scores."
msgstr ""
"これは、DRBD がローカルの下位デバイスを失ったときに Pacemaker にサービスを移"
"行させるためにも使用できます。下位ブロックデバイスに障害が発生するとプロモー"
"ションスコアが低下するため、下位デバイスが機能している他のノードはより高いプ"
"ロモーションスコアになります。"

#. type: Plain text
msgid ""
"The attributes are updated live, independent of the resource-agent's monitor "
"operation, with a dampening delay of 5 seconds by default."
msgstr ""
"属性は、リソースエージェントの監視操作とは関係なく、随時更新されます。デフォ"
"ルトでは、5秒の減衰遅延があります。"

#. type: Plain text
msgid ""
"The resource agent has these optional parameters, see also its man page "
"`ocf_linbit_drbd-attr(7)`:"
msgstr ""
"リソースエージェントには、以下のオプションのパラメータもあります。詳細は "
"`ocf_linbit_drbd-attr(7)` を参照ください。"

#. type: Plain text
msgid "`dampening_delay`"
msgstr "`dampening_delay`"

#. type: Plain text
msgid "`attr_name_prefix`"
msgstr "`attr_name_prefix`"

#. type: Plain text
msgid "`record_event_details`"
msgstr "`record_event_details`"
