# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR Free Software Foundation, Inc.
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"POT-Creation-Date: 2022-11-03 15:01+0900\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. type: Title ==
#, no-wrap
msgid "Common Administrative Tasks"
msgstr "一般的な管理作業"

#. type: Plain text
msgid ""
"This chapter outlines typical administrative tasks encountered during day-to-"
"day operations. It does not cover troubleshooting tasks, these are covered "
"in detail in <<ch-troubleshooting>>."
msgstr ""
"この章では一般的なオペレーションでの管理作業を説明します。トラブルシューティ"
"ングについては扱いません。トラブルシューティングについては<<ch-"
"troubleshooting>>を参照ください。"

#. type: Title ===
#, no-wrap
msgid "Checking DRBD Status"
msgstr "DRBDのステータスを確認する"

#. type: Title ====
#, no-wrap
msgid "Monitoring DRBD Resources in Real-time"
msgstr "DRBD リソースをリアルタイムで監視"

#. type: Plain text
msgid ""
"One convenient way to examine DRBD's status is the `drbdmon` utility. It "
"updates the state of DRBD resources in real-time."
msgstr ""
"DRBDの状態を見るのに便利な方法の1つは `drbdmon` ユーティリティを使うことで"
"す。これはリアルタイムでDRBDリソースの状態を更新します。"

#. type: Title ====
#, no-wrap
msgid "Retrieving Status Information Through the DRBD Process File"
msgstr "DRBD プロセスファイルを介したステータス情報の取得"

#. type: Plain text
msgid ""
"Monitoring DRBD status by using `/proc/drbd` is deprecated. We recommend "
"that you switch to other means, like <<s-drbdadm-status>>, or for even more "
"convenient monitoring, <<s-drbdsetup-events2>>."
msgstr ""
"`/proc/drbd` を使用して DRBD ステータスを監視することは非推奨です。 <<s-"
"drbdadm-status>> またはさらに便利な <<s-drbdsetup-events2>> などの他の手段に"
"切り替えることをお勧めします。"

#. type: Plain text
msgid ""
"indexterm:[/proc/drbd]`/proc/drbd` is a virtual file displaying basic "
"information about the DRBD module.  It was used extensively up to DRBD 8.4, "
"but couldn't keep up with the amount of information provided by DRBD 9."
msgstr ""
"indexterm:[/proc/drbd]`/proc/drbd` はDRBDモジュールの基本情報を表示する仮想"
"ファイルです。 DRBD8.4まで広く使用されていましたが、DRBD9の情報量を表示するた"
"めには対応できません。"

#. type: delimited block -
#, no-wrap
msgid ""
"$ cat /proc/drbd\n"
"version: 9.0.0 (api:1/proto:86-110)\n"
"GIT-hash: XXX build by linbit@buildsystem.linbit, 2011-10-12 09:07:35\n"
msgstr ""
"$ cat /proc/drbd\n"
"version: 9.0.0 (api:1/proto:86-110)\n"
"GIT-hash: XXX build by linbit@buildsystem.linbit, 2011-10-12 09:07:35\n"

#. type: Plain text
msgid ""
"The first line, prefixed with `version:`, shows the DRBD version used on "
"your system. The second line contains information about this specific build."
msgstr ""
"1行目にはシステムで使用するDRBDの `バージョン` を表示します。2行目にはビルド"
"特有の情報を表示します。"

#. type: Title ====
#, no-wrap
msgid "Retrieving Status Information Using the DRBD Administration Tool"
msgstr "DRBD 管理ツールを使用したステータス情報の取得"

#. type: Plain text
msgid ""
"indexterm:[drbdadm, status]In its simplest invocation, we just ask for the "
"status of a single resource."
msgstr ""
"indexterm:[drbdadmステータス]一番シンプルなものとして、1つのリソースのステー"
"タスを表示します。"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdadm status home\n"
"home role:Secondary\n"
"  disk:UpToDate\n"
"  nina role:Secondary\n"
"    disk:UpToDate\n"
"  nino role:Secondary\n"
"    disk:UpToDate\n"
"  nono connection:Connecting\n"
msgstr ""
"# drbdadm status home\n"
"home role:Secondary\n"
"  disk:UpToDate\n"
"  nina role:Secondary\n"
"    disk:UpToDate\n"
"  nino role:Secondary\n"
"    disk:UpToDate\n"
"  nono connection:Connecting\n"

#. type: Plain text
msgid ""
"This here just says that the resource _home_ is locally, on 'nina', and on "
"'nino' _UpToDate_ and _Secondary_; so the three nodes have the same data on "
"their storage devices, and nobody is using the device currently."
msgstr ""
"ここではリソース `home` がローカルと `nina` と `nino` にあり、 `UpToDate` で "
"`セカンダリ` であることを示しています。つまり、3ノードが同じデータをストレー"
"ジデバイスに持ち、現在はどのノードでもデバイスを使用していないという意味で"
"す。"

#. type: Plain text
msgid ""
"The node 'nono' is not connected, its state is reported as _Connecting_; "
"please see <<s-connection-states>> below for more details."
msgstr ""
"ノード `nono` は接続していません。 _Connecting_ のステータスになっています。"
"詳細は<<s-connection-states>>を参照してください。"

#. type: Plain text
msgid ""
"You can get more information by passing the `--verbose` and/or `--"
"statistics` arguments to `drbdsetup` (lines broken for readability):"
msgstr ""
"`drbdsetup` に `--verbose` および/または `--statistics` の引数を付けると、よ"
"り詳細な情報を得ることができます。"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdsetup status home --verbose --statistics\n"
"home node-id:1 role:Secondary suspended:no\n"
"    write-ordering:none\n"
"  volume:0 minor:0 disk:UpToDate\n"
"      size:1048412 read:0 written:1048412 al-writes:0 bm-writes:48 upper-pending:0\n"
"                                        lower-pending:0 al-suspended:no blocked:no\n"
"  nina local:ipv4:10.9.9.111:7001 peer:ipv4:10.9.9.103:7010 node-id:0\n"
"                                               connection:Connected role:Secondary\n"
"      congested:no\n"
"    volume:0 replication:Connected disk:UpToDate resync-suspended:no\n"
"        received:1048412 sent:0 out-of-sync:0 pending:0 unacked:0\n"
"  nino local:ipv4:10.9.9.111:7021 peer:ipv4:10.9.9.129:7012 node-id:2\n"
"                                               connection:Connected role:Secondary\n"
"      congested:no\n"
"    volume:0 replication:Connected disk:UpToDate resync-suspended:no\n"
"        received:0 sent:0 out-of-sync:0 pending:0 unacked:0\n"
"  nono local:ipv4:10.9.9.111:7013 peer:ipv4:10.9.9.138:7031 node-id:3\n"
"                                                           connection:Connecting\n"
msgstr ""
"# drbdsetup status home --verbose --statistics\n"
"home node-id:1 role:Secondary suspended:no\n"
"    write-ordering:none\n"
"  volume:0 minor:0 disk:UpToDate\n"
"      size:1048412 read:0 written:1048412 al-writes:0 bm-writes:48 upper-pending:0\n"
"                                        lower-pending:0 al-suspended:no blocked:no\n"
"  nina local:ipv4:10.9.9.111:7001 peer:ipv4:10.9.9.103:7010 node-id:0\n"
"                                               connection:Connected role:Secondary\n"
"      congested:no\n"
"    volume:0 replication:Connected disk:UpToDate resync-suspended:no\n"
"        received:1048412 sent:0 out-of-sync:0 pending:0 unacked:0\n"
"  nino local:ipv4:10.9.9.111:7021 peer:ipv4:10.9.9.129:7012 node-id:2\n"
"                                               connection:Connected role:Secondary\n"
"      congested:no\n"
"    volume:0 replication:Connected disk:UpToDate resync-suspended:no\n"
"        received:0 sent:0 out-of-sync:0 pending:0 unacked:0\n"
"  nono local:ipv4:10.9.9.111:7013 peer:ipv4:10.9.9.138:7031 node-id:3\n"
"                                                           connection:Connecting\n"

#. type: Plain text
msgid ""
"Every few lines in this example form a block that is repeated for every node "
"used in this resource, with small format exceptions for the local node - see "
"below for more details."
msgstr ""
"この例では、ローカルノードについては多少異なりますが、このリソースで使用して"
"いるノードすべてを数行ごとにブロックで表示しています。以下で詳細を説明しま"
"す。"

#. type: Plain text
msgid ""
"The first line in each block shows the `node-id` (for the current resource; "
"a host can have different ``node-id``s in different resources).  Furthermore "
"the `role` (see <<s-roles>>) is shown."
msgstr ""
"各ブロックの最初の行は `node-id` です。(現在のリソースに対してのものです。ホ"
"ストは異なるリソースには異なる `node-id` がつきます)  また、 `role` (<<s-"
"roles>>参照)も表示されています。"

#. type: Plain text
msgid ""
"The next important line begins with the `volume` specification; normally "
"these are numbered starting by zero, but the configuration may specify other "
"IDs as well. This line shows the indexterm:[connection state] connection "
"state in the `replication` item (see <<s-connection-states>> for details) "
"and the remote indexterm:[disk state] disk state in `disk` (see <<s-disk-"
"states>>).  Then there's a line for this volume giving a bit of statistics - "
"data `received`, `sent`, `out-of-sync`, and so on. Please see <<s-"
"performance-indicators>> and <<s-conn-info>> for more information."
msgstr ""
"次に重要な行が、 `volume` の表示がある行です。通常は0から始まる数字ですが、設"
"定によっては別のIDをつけることもできます。この行では `replication` で"
"indexterm:[connection state]コネクションステータス(<<s-connection-states>>参"
"照)を、 `disk` でリモートのディスク状態indexterm:[disk state](<<s-disk-"
"states>>参照)が表示されます。 また、ボリュームの統計情報が少し表示される行も"
"あります。データの `received` 、 `sent` , `out-of-sync` などです。詳細は <<s-"
"performance-indicators>>と<<s-conn-info>>を参照してください。"

#. type: Plain text
msgid ""
"For the local node the first line shows the resource name, _home_, in our "
"example. As the first block always describes the local node, there is no "
"_Connection_ or address information."
msgstr ""
"ローカルノードでは、最初の行はリソース名を表示します。この例では `home` で"
"す。最初の行には常にローカルノードが表示されますので、 `Connection` やアドレ"
"ス情報は表示されません。"

#. type: Plain text
msgid "please see the `drbd.conf` manual page for more information."
msgstr ""
"より詳細な情報については、 `drbd.conf` マニュアルページをご覧ください。"

#. type: Plain text
msgid ""
"The other four lines in this example form a block that is repeated for every "
"DRBD device configured, prefixed by the device minor number. In this case, "
"this is `0`, corresponding to the device `/dev/drbd0`."
msgstr ""
"この例のブロックになっている他の4行は、すべての設定のあるDRBDデバイスごとに"
"なっており、最初にデバイスマイナー番号がついています。この場合にはデバイス `/"
"dev/drbd0` に対応して `0` です。"

#. type: Plain text
msgid ""
"The resource-specific output contains various pieces of information about "
"the resource:"
msgstr "リソースごとの出力には様々なリソースに関する情報が含まれています。"

#. //FIXME
#. .Replication protocol
#. The Replication protocol used by the resource. Either `A`, `B`, or `C`. See
#. <<s-replication-protocols>> for details.
#. type: Title ====
#, no-wrap
msgid "Retrieving Status Information Using the DRBD Setup Command "
msgstr "DRBD セットアップコマンドを使用したステータス情報の取得"

#.  and 8.4.6
#. type: Plain text
msgid "This is available only with userspace versions 8.9.3 and up."
msgstr ""
"この機能はユーザスペースのDRBDが8.9.3より後のバージョンでのみ使用できます"

#. type: Plain text
msgid ""
"Using the command `drbdsetup events2` with additional options and arguments "
"is a low-level mechanism to get information out of DRBD, suitable for use in "
"automated tools, like monitoring."
msgstr ""
"追加オプションと引数を指定してコマンド `drbdsetup events2` を使用すること"
"は、 DRBD から情報を取得するための低レベルのメカニズムであり、監視などの自動"
"ツールでの使用に適しています。"

#. type: Title =====
#, no-wrap
msgid "One-shot Monitoring"
msgstr "ワンショットモニタリング"

#. type: Plain text
msgid ""
"In its simplest invocation, showing only the current status, the output "
"looks like this (but, when running on a terminal, will include colors):"
msgstr ""
"一番シンプルな使用方法では、以下のように現在のステータスのみを表示します(端末"
"上で実行した場合には色も付いています)。"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdsetup events2 --now r0\n"
"exists resource name:r0 role:Secondary suspended:no\n"
"exists connection name:r0 peer-node-id:1 conn-name:remote-host connection:Connected role:Secondary\n"
"exists device name:r0 volume:0 minor:7 disk:UpToDate\n"
"exists device name:r0 volume:1 minor:8 disk:UpToDate\n"
"exists peer-device name:r0 peer-node-id:1 conn-name:remote-host volume:0\n"
"    replication:Established peer-disk:UpToDate resync-suspended:no\n"
"exists peer-device name:r0 peer-node-id:1 conn-name:remote-host volume:1\n"
"    replication:Established peer-disk:UpToDate resync-suspended:no\n"
"exists -\n"
msgstr ""
"# drbdsetup events2 --now r0\n"
"exists resource name:r0 role:Secondary suspended:no\n"
"exists connection name:r0 peer-node-id:1 conn-name:remote-host connection:Connected role:Secondary\n"
"exists device name:r0 volume:0 minor:7 disk:UpToDate\n"
"exists device name:r0 volume:1 minor:8 disk:UpToDate\n"
"exists peer-device name:r0 peer-node-id:1 conn-name:remote-host volume:0\n"
"    replication:Established peer-disk:UpToDate resync-suspended:no\n"
"exists peer-device name:r0 peer-node-id:1 conn-name:remote-host volume:1\n"
"    replication:Established peer-disk:UpToDate resync-suspended:no\n"
"exists -\n"

#. type: Title =====
#, no-wrap
msgid "Real-time Monitoring"
msgstr "リアルタイムモニタリング"

#. type: Plain text
msgid ""
"Without the ''--now'', the process will keep running, and send continuous "
"updates like this:"
msgstr ""
"''--now'' を付けないで実行した場合には動作し続け、以下のように更新を続けま"
"す。"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdsetup events2 r0\n"
"...\n"
"change connection name:r0 peer-node-id:1 conn-name:remote-host connection:StandAlone\n"
"change connection name:r0 peer-node-id:1 conn-name:remote-host connection:Unconnected\n"
"change connection name:r0 peer-node-id:1 conn-name:remote-host connection:Connecting\n"
msgstr ""
"# drbdsetup events2 r0\n"
"...\n"
"change connection name:r0 peer-node-id:1 conn-name:remote-host connection:StandAlone\n"
"change connection name:r0 peer-node-id:1 conn-name:remote-host connection:Unconnected\n"
"change connection name:r0 peer-node-id:1 conn-name:remote-host connection:Connecting\n"

#. type: Plain text
msgid ""
"Then, for monitoring purposes, there's another argument ''--statistics'', "
"that will produce some performance counters and other facts:"
msgstr ""
"そして監視用途に、''--statistics''という別の引数もあります。これはパフォーマ"
"ンスその他のカウンタを作成するものです。"

#. type: Plain text
msgid "'drbdsetup' **verbose output** (lines broken for readability):"
msgstr "''drbdsetup'' の詳細な出力(読みやすいように一部の行は改行しています)"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdsetup events2 --statistics --now r0\n"
"exists resource name:r0 role:Secondary suspended:no write-ordering:drain\n"
"exists connection name:r0 peer-node-id:1 conn-name:remote-host connection:Connected\n"
"                                                        role:Secondary congested:no\n"
"exists device name:r0 volume:0 minor:7 disk:UpToDate size:6291228 read:6397188\n"
"            written:131844 al-writes:34 bm-writes:0 upper-pending:0 lower-pending:0\n"
"                                                         al-suspended:no blocked:no\n"
"exists device name:r0 volume:1 minor:8 disk:UpToDate size:104854364 read:5910680\n"
"          written:6634548 al-writes:417 bm-writes:0 upper-pending:0 lower-pending:0\n"
"                                                         al-suspended:no blocked:no\n"
"exists peer-device name:r0 peer-node-id:1 conn-name:remote-host volume:0\n"
"          replication:Established peer-disk:UpToDate resync-suspended:no received:0\n"
"                                      sent:131844 out-of-sync:0 pending:0 unacked:0\n"
"exists peer-device name:r0 peer-node-id:1 conn-name:remote-host volume:1\n"
"          replication:Established peer-disk:UpToDate resync-suspended:no received:0\n"
"                                     sent:6634548 out-of-sync:0 pending:0 unacked:0\n"
"exists -\n"
msgstr ""
"# drbdsetup events2 --statistics --now r0\n"
"exists resource name:r0 role:Secondary suspended:no write-ordering:drain\n"
"exists connection name:r0 peer-node-id:1 conn-name:remote-host connection:Connected\n"
"                                                        role:Secondary congested:no\n"
"exists device name:r0 volume:0 minor:7 disk:UpToDate size:6291228 read:6397188\n"
"            written:131844 al-writes:34 bm-writes:0 upper-pending:0 lower-pending:0\n"
"                                                         al-suspended:no blocked:no\n"
"exists device name:r0 volume:1 minor:8 disk:UpToDate size:104854364 read:5910680\n"
"          written:6634548 al-writes:417 bm-writes:0 upper-pending:0 lower-pending:0\n"
"                                                         al-suspended:no blocked:no\n"
"exists peer-device name:r0 peer-node-id:1 conn-name:remote-host volume:0\n"
"          replication:Established peer-disk:UpToDate resync-suspended:no received:0\n"
"                                      sent:131844 out-of-sync:0 pending:0 unacked:0\n"
"exists peer-device name:r0 peer-node-id:1 conn-name:remote-host volume:1\n"
"          replication:Established peer-disk:UpToDate resync-suspended:no received:0\n"
"                                     sent:6634548 out-of-sync:0 pending:0 unacked:0\n"
"exists -\n"

#. type: Plain text
msgid "You might also like the ''--timestamp'' parameter."
msgstr "''--timestamp'' パラメータも便利な機能です。"

#. type: Title ====
#, no-wrap
msgid "Connection States"
msgstr "コネクションステータス"

#. type: Plain text
msgid ""
"indexterm:[drbdadm, cstate]indexterm:[connection state, using drbdadm]A "
"resource's connection state can be observed either by issuing the `drbdadm "
"cstate` command:"
msgstr ""
"indexterm:[drbdadm cstate]indexterm:[connection state]リソースのコネクション"
"ステータスは `drbdadm cstate` コマンドで確認することができます。"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdadm cstate <resource>\n"
"Connected\n"
"Connected\n"
"StandAlone\n"
msgstr ""
"# drbdadm cstate <resource>\n"
"Connected\n"
"Connected\n"
"StandAlone\n"

#. type: Plain text
msgid ""
"If you are interested in only a single connection of a resource, specify the "
"connection name, too:"
msgstr ""
"確認したいのが１つのコネクションステータスだけの場合にはコネクション名を指定"
"してください。"

#. type: Plain text
msgid "The default is the peer's hostname as given in the configuration file."
msgstr "デフォルトでは設定ファイルに記載のある対向ノードのホスト名です。"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdadm cstate <peer>:<resource>\n"
"Connected\n"
msgstr ""
"# drbdadm cstate <peer>:<resource>\n"
"Connected\n"

#. type: Plain text
msgid "A resource may have one of the following connection states:"
msgstr "リソースのコネクションステータスには次のようなものがあります。"

#. type: Block title
#, no-wrap
msgid "_StandAlone_"
msgstr "_StandAlone_"

#. type: Plain text
msgid ""
"indexterm:[connection state, StandAlone]No network configuration available. "
"The resource has not yet been connected, or has been administratively "
"disconnected (using `drbdadm disconnect`), or has dropped its connection due "
"to failed authentication or split brain."
msgstr ""
"indexterm:[connection state]ネットワーク構成は使用できません。リソースがまだ"
"接続されていない、管理上の理由で切断している( `drbdadm disconnect` を使用)、"
"認証の失敗またはスプリットブレインにより接続が解除された、のいずれかが考えら"
"れます。"

#. type: Block title
#, no-wrap
msgid "_Disconnecting_"
msgstr "_Disconnecting_"

#. type: Plain text
msgid ""
"indexterm:[connection state, Disconnecting]Temporary state during "
"disconnection. The next state is _StandAlone_."
msgstr ""
"indexterm:[connection state]切断中の一時的な状態です。次の状態は "
"`StandAlone` です。"

#. type: Block title
#, no-wrap
msgid "_Unconnected_"
msgstr "_Unconnected_"

#. type: Plain text
msgid ""
"indexterm:[connection state, Unconnected]Temporary state, prior to a "
"connection attempt. Possible next states: _Connecting_."
msgstr ""
"indexterm:[connection state, Unconnected]接続を試行する前の一時的な状態です。"
"次に考えられる状態は、 _Connecting_ です。"

#. type: Block title
#, no-wrap
msgid "_Timeout_"
msgstr "_Timeout_"

#. type: Plain text
msgid ""
"indexterm:[connection state, Timeout]Temporary state following a timeout in "
"the communication with the peer. Next state: _Unconnected_."
msgstr ""
"indexterm:[connection state]対向ノードとの通信のタイムアウト後の一時的な状態"
"です。次の状態は `Unconnected` です。"

#. type: Block title
#, no-wrap
msgid "_BrokenPipe_"
msgstr "_BrokenPipe_"

#. type: Plain text
msgid ""
"indexterm:[connection state, BrokenPipe]Temporary state after the connection "
"to the peer was lost. Next state: _Unconnected_."
msgstr ""
"indexterm:[connection state]対向ノードとの接続が失われた後の一時的な状態で"
"す。次の状態は `Unconnected` です。"

#. type: Block title
#, no-wrap
msgid "_NetworkFailure_"
msgstr "_NetworkFailure_"

#. type: Plain text
msgid ""
"indexterm:[connection state, NetworkFailure]Temporary state after the "
"connection to the partner was lost. Next state: _Unconnected_."
msgstr ""
"indexterm:[connection state]対向ノードとの接続が失われた後の一時的な状態で"
"す。次の状態は `Unconnected` です。"

#. type: Block title
#, no-wrap
msgid "_ProtocolError_"
msgstr "_ProtocolError_"

#. type: Plain text
msgid ""
"indexterm:[connection state, ProtocolError]Temporary state after the "
"connection to the partner was lost. Next state: _Unconnected_."
msgstr ""
"indexterm:[connection state]対向ノードとの接続が失われた後の一時的な状態で"
"す。次の状態は `Unconnected` です。"

#. type: Block title
#, no-wrap
msgid "_TearDown_"
msgstr "_TearDown_"

#. type: Plain text
msgid ""
"indexterm:[connection state, TearDown]Temporary state. The peer is closing "
"the connection. Next state: _Unconnected_."
msgstr ""
"indexterm:[connection state]一時的な状態です。対向ノードが接続を閉じていま"
"す。次の状態は `Unconnected` です。"

#. type: Block title
#, no-wrap
msgid "_Connecting_"
msgstr "_Connecting_"

#. type: Plain text
msgid ""
"indexterm:[connection state, Connecting]This node is waiting until the peer "
"node becomes visible on the network."
msgstr ""
"indexterm:[connection state, Connecting]対向ノードがネットワーク上で可視にな"
"るまでノードが待機します。"

#. type: Block title
#, no-wrap
msgid "_Connected_"
msgstr "_Connected_"

#. type: Plain text
msgid ""
"indexterm:[connection state, Connected]A DRBD connection has been "
"established, data mirroring is now active. This is the normal state."
msgstr ""
"indexterm:[connection state, Connected]DRBDの接続が確立され、データミラー化が"
"アクティブになっています。これが正常な状態です。"

#. type: Title ====
#, no-wrap
msgid "Replication States"
msgstr "複製ステータス"

#. type: Plain text
msgid ""
"Each volume has a replication state for each connection. The possible "
"replication states are:"
msgstr ""
"各ボリュームは各接続ごとに複製ステータスを持ちます。可能な複製ステータスは以"
"下になります。"

#. type: Block title
#, no-wrap
msgid "_Off_"
msgstr "_Off_"

#. type: Plain text
msgid ""
"indexterm:[replication state, Off]The volume is not replicated over this "
"connection, since the connection is not _Connected_."
msgstr ""
"indexterm:[replication state, Off]ボリュームはこの接続を通して複製されていま"
"せん。接続が _Connected_ になっていません。す。次の状態は `Unconnected` で"
"す。"

#. type: Block title
#, no-wrap
msgid "_Established_"
msgstr "_Established_"

#. type: Plain text
msgid ""
"indexterm:[replication state, Established]All writes to that volume are "
"replicated online. This is the normal state."
msgstr ""
"indexterm:[replication state, Established]このボリュームへのすべての書き込み"
"がオンラインで複製されています。これは通常の状態です。"

#. type: Block title
#, no-wrap
msgid "_StartingSyncS_"
msgstr "_StartingSyncS_"

#. type: Plain text
msgid ""
"indexterm:[replication state, StartingSyncS]Full synchronization, initiated "
"by the administrator, is just starting. The next possible states are: "
"_SyncSource_ or _PausedSyncS_."
msgstr ""
"indexterm:[replication state,StartingSyncS]管理者により開始されたフル同期が始"
"まっています。次に考えられる状態は `SyncSource` または `PausedSyncS` です。"

#. type: Block title
#, no-wrap
msgid "_StartingSyncT_"
msgstr "_StartingSyncT_"

#. type: Plain text
msgid ""
"indexterm:[replication state, StartingSyncT]Full synchronization, initiated "
"by the administrator, is just starting. Next state: _WFSyncUUID_."
msgstr ""
"indexterm:[replication state, StartingSyncT]管理者により開始されたフル同期が"
"始まっています。次の状態は _WFSyncUUID_ です。"

#. type: Block title
#, no-wrap
msgid "_WFBitMapS_"
msgstr "_WFBitMapS_"

#. type: Plain text
msgid ""
"indexterm:[replication state, WFBitMapS]Partial synchronization is just "
"starting. Next possible states: _SyncSource_ or _PausedSyncS_."
msgstr ""
"indexterm:[replication state, WFBitMapS]部分同期が始まっています。次に考えら"
"れる状態は _SyncSource_ または _PausedSyncS_ です。"

#. type: Block title
#, no-wrap
msgid "_WFBitMapT_"
msgstr "_WFBitMapT_"

#. type: Plain text
msgid ""
"indexterm:[replication state, WFBitMapT]Partial synchronization is just "
"starting. Next possible state: _WFSyncUUID_."
msgstr ""
"indexterm:[replication state, WFBitMapT]部分同期が始まっています。次に考えら"
"れる状態は `WFSyncUUID` です。"

#. type: Block title
#, no-wrap
msgid "_WFSyncUUID_"
msgstr "_WFSyncUUID_"

#. type: Plain text
msgid ""
"indexterm:[replication state, WFSyncUUID]Synchronization is about to begin. "
"Next possible states: _SyncTarget_ or _PausedSyncT_."
msgstr ""
"indexterm:[replication state, WFSyncUUID]同期が開始されるところです。次に考え"
"られる状態は _SyncTarget_ または _PausedSyncT_ です。"

#. type: Block title
#, no-wrap
msgid "_SyncSource_"
msgstr "_SyncSource_"

#. type: Plain text
msgid ""
"indexterm:[replication state, SyncSource]Synchronization is currently "
"running, with the local node being the source of synchronization."
msgstr ""
"indexterm:[replication state, SyncSource]現在、ローカルノードを同期元にして同"
"期を実行中です。"

#. type: Block title
#, no-wrap
msgid "_SyncTarget_"
msgstr "_SyncTarget_"

#. type: Plain text
msgid ""
"indexterm:[replication state, SyncTarget]Synchronization is currently "
"running, with the local node being the target of synchronization."
msgstr ""
"indexterm:[replication state, SyncTarget]現在、ローカルノードを同期先にして同"
"期を実行中です。"

#. type: Block title
#, no-wrap
msgid "_PausedSyncS_"
msgstr "_PausedSyncS_"

#. type: Plain text
msgid ""
"indexterm:[replication state, PausedSyncS]The local node is the source of an "
"ongoing synchronization, but synchronization is currently paused. This may "
"be due to a dependency on the completion of another synchronization process, "
"or due to synchronization having been manually interrupted by `drbdadm pause-"
"sync`."
msgstr ""
"indexterm:[replication state, PausedSyncS]ローカルノードが進行中の同期の同期"
"元ですが、現在は同期が一時停止しています。原因として、別の同期プロセスの完了"
"との依存関係、または `drbdadm pause-sync` を使用して手動で同期が中断されたこ"
"とが考えられます。"

#. type: Block title
#, no-wrap
msgid "_PausedSyncT_"
msgstr "_PausedSyncT_"

#. type: Plain text
msgid ""
"indexterm:[replication state, PausedSyncT]The local node is the target of an "
"ongoing synchronization, but synchronization is currently paused. This may "
"be due to a dependency on the completion of another synchronization process, "
"or due to synchronization having been manually interrupted by `drbdadm pause-"
"sync`."
msgstr ""
"indexterm:[replication state, PausedSyncT]ローカルノードが進行中の同期の同期"
"先ですが、現在は同期が一時停止しています。原因として、別の同期プロセスの完了"
"との依存関係、または `drbdadm pause-sync` を使用して手動で同期が中断されたこ"
"とが考えられます。"

#. type: Block title
#, no-wrap
msgid "_VerifyS_"
msgstr "_VerifyS_"

#. type: Plain text
msgid ""
"indexterm:[replication state, VerifyS]On-line device verification is "
"currently running, with the local node being the source of verification."
msgstr ""
"indexterm:[replication state, VerifyS]ローカルノードを照合元にして、オンライ"
"ンデバイスの照合を実行中です。"

#. type: Block title
#, no-wrap
msgid "_VerifyT_"
msgstr "_VerifyT_"

#. type: Plain text
msgid ""
"indexterm:[replication state, VerifyT]On-line device verification is "
"currently running, with the local node being the target of verification."
msgstr ""
"indexterm:[replication state, VerifyT]現在、ローカルノードを照合先にして、オ"
"ンラインデバイスの照合を実行中です。"

#. type: Block title
#, no-wrap
msgid "_Ahead_"
msgstr "_Ahead_"

#. type: Plain text
msgid ""
"indexterm:[replication state, Ahead]Data replication was suspended, since "
"the link can not cope with the load. This state is enabled by the "
"configuration `on-congestion` option (see <<s-configure-congestion-policy>>)."
msgstr ""
"indexterm:[replication state, Ahead]リンクが負荷に対応できないので、データの"
"複製が中断しました。このステータスは `on-congestion` オプションの設定で有効に"
"できます(<<s-configure-congestion-policy>>を参照)。"

#. type: Block title
#, no-wrap
msgid "_Behind_"
msgstr "_Behind_"

#. type: Plain text
msgid ""
"indexterm:[replication state, Behind]Data replication was suspended by the "
"peer, since the link can not cope with the load. This state is enabled by "
"the configuration `on-congestion` option on the peer node (see <<s-configure-"
"congestion-policy>>)."
msgstr ""
"indexterm:[replication state, Behind]リンクが負荷に対応できないので、データの"
"複製が対向ノードによって中断されました。このステータスは対向ノードの `on-"
"congestion` オプション設定で有効にできま>す(<<s-configure-congestion-policy>>"
"を参照)。"

#. type: Title ====
#, no-wrap
msgid "Resource Roles"
msgstr "リソースのロール"

#. type: Plain text
msgid ""
"indexterm:[resource]A resource's role can be observed by issuing the "
"indexterm:[drbdadm, role]`drbdadm role` command:"
msgstr ""
"indexterm:[resource]リソースのロールはindexterm:[drbdadm role]`drbdadm role` "
"コマンドを実行することで確認できます。"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdadm role <resource>\n"
"Primary\n"
msgstr ""
"# drbdadm role <resource>\n"
"Primary\n"

#. type: Plain text
msgid "You may see one of the following resource roles:"
msgstr "以下のいずれかのリソースのロールが表示されます。"

#. type: Block title
#, no-wrap
msgid "_Primary_"
msgstr "_Primary_"

#. type: Plain text
msgid ""
"indexterm:[role, Primary]The resource is currently in the primary role, and "
"may be read from and written to. This role only occurs on one of the two "
"nodes, unless <<s-dual-primary-mode,dual-primary mode>> is enabled."
msgstr ""
"リソースは現在プライマリロールで読み書き加能です。2つのノードの一方だけがこの"
"ロールになることができます。ただし、<<s-dual-primary-mode,デュアルプライマリ"
"モード>>の場合は例外です。"

#. type: Block title
#, no-wrap
msgid "_Secondary_"
msgstr "_Secondary_"

#. type: Plain text
msgid ""
"indexterm:[role, Secondary]The resource is currently in the secondary role. "
"It normally receives updates from its peer (unless running in disconnected "
"mode), but may neither be read from nor written to. This role may occur on "
"one or both nodes."
msgstr ""
"リソースは現在セカンダリロールです。対向ノードから正常に更新を受け取ることが"
"できますが(切断モード以外の場合)、このリソースに対して読み書きは実行できませ"
"ん。1つまたは両ノードがこのロールになることができます。"

#. type: Block title
#, no-wrap
msgid "_Unknown_"
msgstr "_Unknown_"

#. type: Plain text
msgid ""
"indexterm:[role, Unknown]The resource's role is currently unknown. The local "
"resource role never has this status. It is only displayed for the peer's "
"resource role, and only in disconnected mode."
msgstr ""
"リソースのロールが現在不明です。ローカルリソースロールがこの状態になることは"
"ありません。切断モードの場合に、対向ノードのリソースロールにのみ表示されま"
"す。"

#. type: Title ====
#, no-wrap
msgid "Disk States"
msgstr "ディスク状態"

#. type: Plain text
msgid ""
"A resource's disk state can be observed either by issuing the `drbdadm "
"dstate` command:"
msgstr ""
"リソースのディスク状態は `drbdadm dstate` コマンドを実行することで確認できま"
"す。"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdadm dstate <resource>\n"
"UpToDate\n"
msgstr ""
"# drbdadm dstate <resource>\n"
"UpToDate\n"

#. type: Plain text
msgid "The disk state may be one of the following:"
msgstr "ディスク状態は以下のいずれかです。"

#. type: Block title
#, no-wrap
msgid "_Diskless_"
msgstr "_Diskless_"

#. type: Plain text
msgid ""
"indexterm:[disk state, Diskless]No local block device has been assigned to "
"the DRBD driver. This may mean that the resource has never attached to its "
"backing device, that it has been manually detached using `drbdadm detach`, "
"or that it automatically detached after a lower-level I/O error."
msgstr ""
"indexterm:[disk state]DRBDドライバにローカルブロックデバイスが割り当てられて"
"いません。原因として、リソースが下位デバイスに接続されなかった、 `drbdadm "
"detach` を使用して手動でリソースを切り離した、または下位レベルのI/Oエラーによ"
"り自動的に切り離されたことが考えられます。"

#. type: Block title
#, no-wrap
msgid "_Attaching_"
msgstr "_Attaching_"

#. type: Plain text
msgid ""
"indexterm:[disk state, Attaching]Transient state while reading meta data."
msgstr "indexterm:[disk state]メタデータ読み取り中の一時的な状態です。"

#. type: Block title
#, no-wrap
msgid "_Detaching_"
msgstr "_Detaching_"

#. type: Plain text
msgid ""
"indexterm:[disk state, Detaching]Transient state while detaching and waiting "
"for ongoing I/O operations to complete."
msgstr ""
"indexterm:[disk state, Detaching]切断され、進行中のIO処理が完了するのを待って"
"いる一時的な状態。"

#. type: Block title
#, no-wrap
msgid "_Failed_"
msgstr "_Failed_"

#. type: Plain text
msgid ""
"indexterm:[disk state, Failed]Transient state following an I/O failure "
"report by the local block device. Next state: _Diskless_."
msgstr ""
"indexterm:[disk state]ローカルブロックデバイスがI/O障害を報告した後の一時的な"
"状態です。次の状態は `Diskless` です。"

#. type: Block title
#, no-wrap
msgid "_Negotiating_"
msgstr "_Negotiating_"

#. type: Plain text
msgid ""
"indexterm:[disk state, Negotiating]Transient state when an _Attach_ is "
"carried out on an already-__Connected__ DRBD device."
msgstr ""
"indexterm:[disk state]すでに `Connected` のDRBDデバイスで `attach` が実行され"
"た場合の一時的状態です。"

#. type: Block title
#, no-wrap
msgid "_Inconsistent_"
msgstr "_Inconsistent_"

#. type: Plain text
msgid ""
"indexterm:[disk state, Inconsistent]The data is inconsistent. This status "
"occurs immediately upon creation of a new resource, on both nodes (before "
"the initial full sync). Also, this status is found in one node (the "
"synchronization target) during synchronization."
msgstr ""
"indexterm:[disk state]データが一致しません。新規リソースを作成した直後に(初期"
"フル同期の前に)両方のノードがこの状態になります。また、同期中には片方のノード"
"(同期先)がこの状態になります。"

#. type: Block title
#, no-wrap
msgid "_Outdated_"
msgstr "_Outdated_"

#. type: Plain text
msgid ""
"indexterm:[disk state, Outdated]Resource data is consistent, but <<s-outdate,"
"outdated>>."
msgstr ""
"indexterm:[disk state]リソースデータは一致していますが、<<s-outdate,無効>>で"
"す。"

#. type: Block title
#, no-wrap
msgid "_DUnknown_"
msgstr "_DUnknown_"

#. type: Plain text
msgid ""
"indexterm:[disk state, DUnknown]This state is used for the peer disk if no "
"network connection is available."
msgstr ""
"indexterm:[disk state]ネットワーク接続を使用できない場合に、対向ノードディス"
"クにこの状態が使用されます。"

#. type: Block title
#, no-wrap
msgid "_Consistent_"
msgstr "_Consistent_"

#. type: Plain text
msgid ""
"indexterm:[disk state, Consistent]Consistent data of a node without "
"connection. When the connection is established, it is decided whether the "
"data is _UpToDate_ or _Outdated_."
msgstr ""
"indexterm:[disk state]接続していない状態でノードのデータが一致しています。接"
"続が確立すると、データが _UpToDate_ か _Outdated_ か判断されます。"

#. type: Block title
#, no-wrap
msgid "_UpToDate_"
msgstr "_UpToDate_"

#. type: Plain text
msgid ""
"indexterm:[disk state, UpToDate]Consistent, up-to-date state of the data. "
"This is the normal state."
msgstr ""
"indexterm:[disk state]データが一致していて最新の状態です。これが正常な状態で"
"す。"

#. type: Title ====
#, no-wrap
msgid "Connection Information Data"
msgstr "接続情報データ"

#. type: Block title
#, no-wrap
msgid "_local_"
msgstr "_local_"

#. type: Plain text
msgid ""
"Shows the network family, the local address and port that is used to accept "
"connections from the peer."
msgstr ""
"ネットワークファミリ、ローカルアドレス、対向ノードから接続を許可されたポート"
"を表示します。"

#. type: Block title
#, no-wrap
msgid "_peer_"
msgstr "_peer_"

#. type: Plain text
msgid ""
"Shows the network family, the peer address and port that is used to connect."
msgstr ""
"ネットワークファミリ、ローカルアドレス、接続に使用しているポートを表示しま"
"す。"

#. type: Block title
#, no-wrap
msgid "_congested_"
msgstr "_congested_"

#. type: Plain text
msgid ""
"This flag tells whether the TCP send buffer of the data connection is more "
"than 80% filled."
msgstr ""
"データのTCP送信バッファを80%より多く使用している場合にこのフラグがつきます。"

#. type: Title ====
#, no-wrap
msgid "Performance Indicators"
msgstr "パフォーマンス指標"

#. type: Plain text
msgid ""
"indexterm:[performance indicators] The command ``drbdsetup status --verbose "
"--statistics`` can be used to show performance statistics.  These are also "
"available in ``drbdsetup events2 --statistics``, although there will not be "
"a _changed_ event for every change.  The statistics include the following "
"counters and gauges:"
msgstr ""
"indexterm:[performance indicators] コマンド `drbdsetup status --verbose --"
"statistics`` を使用して、パフォーマンス統計を表示できます。これは "
"``drbdsetup events2 --statistics`` でも利用できますが、変更ごとに _changed_ "
"イベントが発生するわけではありません。統計には、次のカウンターとゲージが含ま"
"れます。"

#. type: Plain text
msgid "Per volume/device:"
msgstr "ボリューム/デバイス単位:"

#. type: Block title
#, no-wrap
msgid "_read_ (disk read)"
msgstr "_read_ (disk read)"

#. type: Plain text
msgid "Net data read from local disk; in KiB."
msgstr "ローカルディスクから読み取られたネットデータ (kibyte単位)。"

#. type: Block title
#, no-wrap
msgid "_written_ (disk written)"
msgstr "_written_ (disk written)"

#. type: Plain text
msgid "Net data written to local disk; in KiB."
msgstr "ローカルのディスクに書き込んだ正味データ量(kibyte単位)。"

#. type: Block title
#, no-wrap
msgid "_al-writes_ (activity log)"
msgstr "_al-writes_ (activity log)"

#. type: Plain text
msgid "Number of updates of the activity log area of the meta data."
msgstr "メタデータのアクティビティログエリアのアップデート数。"

#. type: Block title
#, no-wrap
msgid "_bm-writes_ (bitmap)"
msgstr "_bm-writes_ (bitmap)"

#. type: Plain text
msgid "Number of updates of the bitmap area of the meta data."
msgstr "メタデータのビットマップエリアのアップデート数。"

#. type: Block title
#, no-wrap
msgid "_upper-pending_ (application pending)"
msgstr "_upper-pending_ (application pending)"

#. type: Plain text
msgid ""
"Number of block I/O requests forwarded to DRBD, but not yet answered "
"(completed)  by DRBD."
msgstr ""
"まだDRBDから応答がない（完了していない）DRBDへのブロックI/Oリクエスト数。"

#. type: Block title
#, no-wrap
msgid "_lower-pending_ (local count)"
msgstr "_lower-pending_ (local count)"

#. type: Plain text
msgid "Number of open requests to the local I/O sub-system issued by DRBD."
msgstr "DRBDが発行したローカルI/Oサブシステムへのオープンリクエストの数。"

#. type: Block title
#, no-wrap
msgid "_blocked_"
msgstr "_blocked_"

#. type: Plain text
msgid "indexterm:[blocked]Shows local I/O congestion."
msgstr "indexterm:[blocked]ローカルI/Oの輻輳を示します。"

#. type: Plain text
msgid "_no_: No congestion."
msgstr "_no_:輻輳なし"

#. type: Plain text
msgid ""
"_upper_: I/O _above_ the DRBD device is blocked, that is, to the filesystem. "
"Typical causes are"
msgstr ""
"_uppeer_: ファイルシステムなどDRBD _より上位_ のI/Oがブロックされている。代表"
"的なものには以下がある。"

#. type: Plain text
msgid ""
"I/O suspension by the administrator, see the `suspend-io` command in "
"`drbdadm`."
msgstr "管理者によるI/O中断。 `drbdadm` コマンドの `suspend-io` を参照。"

#. type: Plain text
msgid "Transient blocks, for example, during attach/detach."
msgstr "アタッチ/デタッチ時の一時的なブロック。"

#. type: Plain text
msgid "Buffers depleted, see <<p-performance>>."
msgstr "バッファーの枯渇。<<p-performance>> 参照。"

#. type: Plain text
msgid "Waiting for bitmap I/O."
msgstr "ビットマップIO待ち"

#. type: Plain text
msgid "_lower_: Backing device is congested."
msgstr "_lower_: 下位デバイスの輻輳"

#. type: Plain text
msgid "_upper,lower_: Both _upper_ and _lower_ are blocked."
msgstr "上位、下位両方がブロックされている。"

#. type: Plain text
msgid "Per connection:"
msgstr "接続単位:"

#. type: Block title
#, no-wrap
msgid "_ap-in-flight_ (application in-flight)"
msgstr "_ap-in-flight_ (application in-flight)"

#. type: Plain text
msgid ""
"Application data that is being written by the peer.  That is, DRBD has sent "
"it to the peer and is waiting for the acknowledgement that it has been "
"written.  In sectors (512 bytes)."
msgstr ""
"対向ノードによって書き込まれているアプリケーションデータ。つまり、DRBD はそれ"
"を対向ノードに送信し、書き込まれたという確認応答を待っています。セクター単位"
"（512バイト）。"

#. type: Block title
#, no-wrap
msgid "_rs-in-flight_ (resync in-flight)"
msgstr "_rs-in-flight_ (resync in-flight)"

#. type: Plain text
msgid ""
"Resync data that is being written by the peer.  That is, DRBD is "
"_SyncSource_, has sent data to the peer as part of a resync and is waiting "
"for the acknowledgement that it has been written.  In sectors (512 bytes)."
msgstr ""
"対向ノードによって書き込まれている同期データ。つまり、DRBD は _SyncSource_ "
"が　同期データを対向ノードに送信し、データが書き込まれたことの確認応答を待っ"
"ています。セクター単位（512バイト）。"

#. type: Plain text
msgid "Per connection and volume (\"peer device\"):"
msgstr "接続とボリューム単位 (\"peer device\"):"

#. type: Block title
#, no-wrap
msgid "_done_"
msgstr "_done_"

#. type: Plain text
msgid "Percentage of data synchronized out of the amount to be synchronized."
msgstr "同期されるデータのうち同期されたデータのパーセンテージ。"

#. type: Block title
#, no-wrap
msgid "_resync-suspended_"
msgstr "_resync-suspended_"

#. type: Plain text
msgid ""
"Whether the resynchronization is currently suspended or not. Possible values "
"are _no_, _user_, _peer_, _dependency_.  Comma separated."
msgstr ""
"現在同期が中断されているかどうかを示す。値は _no_, _user_, _peer_, "
"_dependency_ でカンマ区切り。"

#. type: Block title
#, no-wrap
msgid "_received_ (network receive)"
msgstr "_received_ (network receive)"

#. type: Plain text
msgid "Net data received from the peer; in KiB."
msgstr "対向ノードから受信したネットデータ（KiB単位）。"

#. type: Block title
#, no-wrap
msgid "_sent_ (network send)"
msgstr "_sent_ (network send)"

#. type: Plain text
msgid "Net data sent to the peer; in KiB."
msgstr "対向ノードへ送信したネットデータ（KiB単位）。"

#. type: Block title
#, no-wrap
msgid "_out-of-sync_"
msgstr "_out-of-sync_"

#. type: Plain text
msgid ""
"indexterm:[out-of-sync]indexterm:[oos]Amount of data currently out of sync "
"with this peer, according to the bitmap that DRBD has for it; in KiB."
msgstr ""
"indexterm:[out-of-sync]indexterm:[oos]DRBD のビットマップによる現在この対向"
"ノードと同期していないデータ量（KiB単位）。"

#. type: Block title
#, no-wrap
msgid "_pending_"
msgstr "_pending_"

#. type: Plain text
msgid ""
"Number of requests sent to the peer, but that have not yet been acknowledged "
"by the peer."
msgstr ""
"対向ノードに送信されたが、対向ノードによってまだ確認されていないリクエスト"
"数。"

#. type: Block title
#, no-wrap
msgid "_unacked_ (unacknowledged)"
msgstr "_unacked_ (unacknowledged)"

#. type: Plain text
msgid ""
"Number of requests received from the peer, but that have not yet been "
"acknowledged by DRBD on this node."
msgstr ""
"対向ノードから受信したが、このノードの DRBD によってまだ確認されていないリク"
"エスト数。"

#. type: Block title
#, no-wrap
msgid "_dbdt1_"
msgstr "_dbdt1_"

#. type: Plain text
msgid ""
"Rate of synchronization within the last few seconds, reported as MiB/"
"seconds. You can affect the synchronization rate by configuring options that "
"are detailed in the link:https://linbit.com/drbd-user-guide/drbd-guide-9_0-"
"en/#s-configure-sync-rate[Configuring the Rate of Synchronization] section "
"of this user's guide."
msgstr ""
"過去数秒以内の同期速度。単位は MiB/秒。このユーザーズガイドの link:https://"
"linbit.com/drbd-user-guide/drbd-guide-9_0-en/#s-configure-sync-rate[同期速度"
"の設定] セクションで説明されているオプションで、同期速度を変更できます。"

#. type: Block title
#, no-wrap
msgid "_eta_"
msgstr "_eta_"

#. type: Plain text
msgid ""
"Number of seconds remaining for the synchronization to complete. This number "
"is calculated based on the synchronization rate within the last few seconds "
"and the size of the resource's backing device that remains to be "
"synchronized."
msgstr ""
"同期が完了するまでの残り秒数。この数値は、過去数秒以内の同期速度と、同期され"
"ていないリソースの下位デバイスのサイズに基づいて計算されます。"

#. type: Title ===
#, no-wrap
msgid "Enabling and Disabling Resources"
msgstr "リソースの有効化と無効化"

#. type: Title ====
#, no-wrap
msgid "Enabling Resources"
msgstr "リソースの有効化"

#. type: Plain text
msgid ""
"indexterm:[resource]Normally, all configured DRBD resources are "
"automatically enabled"
msgstr ""
"indexterm:[resource]通常、自動的にすべての設定済みDRBDリソースが有効になりま"
"す。これは、"

#. type: Plain text
msgid ""
"by a cluster resource management application at its discretion, based on "
"your cluster configuration, or"
msgstr "クラスタ構成に応じたクラスタ管理アプリケーションの操作による、または"

#. type: Plain text
msgid "by the systemd units (e.g., `drbd@.target`)"
msgstr "systemd units (e.g., `drbd@.target`) による"

#. type: Plain text
msgid ""
"If, however, you need to enable resources manually for any reason, you may "
"do so by issuing the command"
msgstr ""
"手動でリソースを起動する必要がある場合には、以下のコマンドの実行によって行う"
"ことができます。"

#. type: delimited block -
#, no-wrap
msgid "# drbdadm up <resource>\n"
msgstr "# drbdadm up <resource>\n"

#. type: Plain text
msgid ""
"As always, you may use the keyword `all` instead of a specific resource name "
"if you want to enable all resources configured in `/etc/drbd.conf` at once."
msgstr ""
"他の場合と同様に、特定のリソース名の代わりにキーワード `all` を使用すれば、 "
"`/etc/drbd.conf` で設定しているすべてのリソースを一度に有効にできます。"

#. type: Title ====
#, no-wrap
msgid "Disabling Resources"
msgstr "リソースを無効にする"

#. type: Plain text
msgid ""
"indexterm:[resource]You may temporarily disable specific resources by "
"issuing the command"
msgstr ""
"indexterm:[resource]特定のリソースを一時的に無効にするには、次のコマンドを実"
"行します。"

#. type: delimited block -
#, no-wrap
msgid "# drbdadm down <resource>\n"
msgstr "# drbdadm down <resource>\n"

#. type: Plain text
msgid ""
"Here, too, you may use the keyword `all` in place of a resource name if you "
"want to temporarily disable all resources listed in `/etc/drbd.conf` at once."
msgstr ""
"ここでも、リソース名の代わりにキーワード `all` を使用して、1回で `/etc/drbd."
"conf` に記述しているすべてのリソースを一時的に無効にできます。"

#. type: Title ===
#, no-wrap
msgid "Reconfiguring Resources"
msgstr "リソースの再設定"

#. type: Plain text
msgid ""
"indexterm:[resource]DRBD allows you to reconfigure resources while they are "
"operational. To that end,"
msgstr ""
"indexterm:[resource]DRBDの動作中にリソースを再設定することができます。次の手"
"順を行います。"

#. type: Plain text
msgid ""
"make any necessary changes to the resource configuration in `/etc/drbd.conf`,"
msgstr "`/etc/drbd.conf` のリソース設定を変更します。"

#. type: Plain text
msgid "synchronize your `/etc/drbd.conf` file between both nodes,"
msgstr "両方のノードで `/etc/drbd.conf` ファイルを同期します。"

#. type: Plain text
msgid ""
"issue the indexterm:[drbdadm, adjust]`drbdadm adjust <resource>` command on "
"both nodes."
msgstr ""
"indexterm:[drbdadm] `drbdadm adjust <resource>` コマンドを 両ノードで実行しま"
"す。"

#. type: Plain text
msgid ""
"`drbdadm adjust` then hands off to `drbdsetup` to make the necessary "
"adjustments to the configuration. As always, you are able to review the "
"pending `drbdsetup` invocations by running `drbdadm` with the `-d` (dry-run) "
"option."
msgstr ""
"`drbdadm adjust` は `drbdsetup` を通じて実行中のリソースを調整します。保留中"
"の `drbdsetup` 呼び出しを確認するには、 `drbdadm` を `-d` (dry-run,予行演習)"
"オプションを付けて実行します。"

#. type: Plain text
msgid ""
"When making changes to the `common` section in `/etc/drbd.conf`, you can "
"adjust the configuration for all resources in one run, by issuing `drbdadm "
"adjust all`."
msgstr ""
"`/etc/drbd.conf` の `common` セクションを変更して一度にすべてのリソースに反映"
"させたいときには `drbdadm adjust all` を実行します。"

#. type: Title ===
#, no-wrap
msgid "Promoting and Demoting Resources"
msgstr "リソースの昇格と降格"

#. type: Plain text
msgid ""
"indexterm:[resource]Manually switching a <<s-resource-roles,resource's "
"role>> from secondary to primary (promotion) or vice versa (demotion)  is "
"done using one of the following commands:"
msgstr ""
"indexterm:[resource]手動で<<s-resource-roles,リソースロール>>をセカンダリから"
"プライマリに切り替える(昇格)、またはその逆に切り替える(降格)には、次のコマン"
"ドを実行します。"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdadm primary <resource>\n"
"# drbdadm secondary <resource>\n"
msgstr ""
"# drbdadm primary <resource>\n"
"# drbdadm secondary <resource>\n"

#. type: Plain text
msgid ""
"In <<s-single-primary-mode,single-primary mode>> (DRBD's default), any "
"resource can be in the primary role on only one node at any given time while "
"the <<s-connection-states,connection state>> is _Connected_. Therefore, "
"issuing `drbdadm primary <resource>` on one node while the specified "
"resource is still in the primary role on another node will result in an "
"error."
msgstr ""
"DRBDが<<s-single-primary-mode,シングルプライマリモード>>(DRBDのデフォルト)"
"で、<<s-connection-states,コネクションステータス>>が `Connected` の場合、任意"
"のタイミングでどちらか1つのノード上でのみリソースはプライマリロールになれま"
"す。したがって、あるリソースが他のノードに対してプライマリロールになっている"
"ときに `drbdadm primary <resource>` を実行すると、エラーが発生します。"

#. type: Plain text
msgid ""
"A resource configured to allow <<s-dual-primary-mode,dual-primary mode>> can "
"be switched to the primary role on two nodes; this is, for example, needed "
"for online migration of virtual machines."
msgstr ""
"リソースが<<s-dual-primary-mode,デュアルプライマリモード>>に対応するよう設定"
"している場合には、両方のノードをプライマリロールに切り替えることができます。"
"これは、例えば仮想マシンのオンラインマイグレーションの際に利用できます。"

#. type: Title ===
#, no-wrap
msgid "Basic Manual Failover"
msgstr "基本的な手動フェイルオーバ"

#. type: Plain text
msgid ""
"If not using a cluster manager and looking to handle failovers manually in a "
"passive/active configuration, the process is as follows."
msgstr ""
"Pacemakerを使わず、パッシブ/アクティブ構成でフェイルオーバを手動で制御するに"
"は次のようにします。"

#. type: Plain text
msgid ""
"On the current primary node stop any applications or services using the DRBD "
"device, unmount the DRBD device, and demote the resource to secondary."
msgstr ""
"現在のプライマリノードでDRBDデバイスを使用するすべてのアプリケーションとサー"
"ビスを停止し、リソースをセカンダリに降格します。"

#. type: delimited block -
#, no-wrap
msgid ""
"# umount /dev/drbd/by-res/<resource>/<vol-nr>\n"
"# drbdadm secondary <resource>\n"
msgstr ""
"# umount /dev/drbd/by-res/<resource>/<vol-nr>\n"
"# drbdadm secondary <resource>\n"

#. type: Plain text
msgid ""
"Now on the node you want to make primary promote the resource and mount the "
"device."
msgstr "プライマリにしたいノードでリソースを昇格してデバイスをマウントします。"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdadm primary <resource>\n"
"# mount /dev/drbd/by-res/<resource>/<vol-nr> <mountpoint>\n"
msgstr ""
"# drbdadm primary <resource>\n"
"# mount /dev/drbd/by-res/<resource>/<vol-nr> <mountpoint>\n"

#. type: Plain text
msgid ""
"If you're using the `auto-promote` feature, you don't need to change the "
"roles (_Primary_/_Secondary_) manually; only stopping of the services and "
"unmounting, respectively mounting, is necessary."
msgstr ""
"`自動プロモート` 機能を使用している場合はロール(`プライマリ`/`セカンダリ`)を"
"手動で変更する必要はありません。それぞれサービス停止とアンマウント、マウント"
"の操作のみ必要です。"

#. type: Title ===
#, no-wrap
msgid "Using Online Device Verification"
msgstr "オンラインデバイス照合の使用"

#. type: Title ====
#, no-wrap
msgid "Enabling Online Verification"
msgstr "オンライン照合を有効にする"

#. type: Plain text
msgid ""
"indexterm:[online device verification]<<s-online-verify,Online device "
"verification>> for resources is not enabled by default. To enable it, add "
"the following lines to your resource configuration in `/etc/drbd.conf`:"
msgstr ""
"indexterm:[on-line device verification]<<s-online-verify,オンラインデバイス照"
"合>>はデフォルトでは有効になっていません。有効にするには `/etc/drbd.conf` の"
"リソース設定に以下の行を追加します。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource>\n"
"  net {\n"
"    verify-alg <algorithm>;\n"
"  }\n"
"  ...\n"
"}\n"
msgstr ""
"resource <resource>\n"
"  net {\n"
"    verify-alg <algorithm>;\n"
"  }\n"
"  ...\n"
"}\n"

#. type: Plain text
msgid ""
"_<algorithm>_ may be any message digest algorithm supported by the kernel "
"crypto API in your system's kernel configuration. Normally, you should be "
"able to choose at least from `sha1`, `md5`, and `crc32c`."
msgstr ""
"_<algorithm>_ は、システムのカーネル構成内のカーネルcrypto APIでサポートされ"
"る任意のメッセージダイジェストアルゴリズムです。通常は `sha1` 、 `md5` 、 "
"`crc32c` から選択します。"

#. type: Plain text
msgid ""
"If you make this change to an existing resource, as always, synchronize your "
"`drbd.conf` to the peer, and run `drbdadm adjust _<resource>_` on both nodes."
msgstr ""
"既存のリソースに対してこの変更を行う場合は、 `drbd.conf` を対向ノードと同期"
"し、両方のノードで `drbdadm adjust <resource>` を実行します。"

#. type: Title ====
#, no-wrap
msgid "Invoking Online Verification"
msgstr "オンライン照合の実行"

#. type: Plain text
msgid ""
"indexterm:[online device verification]After you have enabled online "
"verification, you will be able to initiate a verification run using the "
"following command:"
msgstr ""
"indexterm:[on-line device verification]オンライン照合を有効にしたら、次のコマ"
"ンドでオンライン照合を開始します。"

#. type: delimited block -
#, no-wrap
msgid "# drbdadm verify <resource>:<peer>/<volume>\n"
msgstr "# drbdadm verify <resource>:<peer>/<volume>\n"

#. type: Plain text
msgid ""
"When you do so, DRBD starts an online verification run for _<volume>_ to "
"_<peer_> in _<resource>_, and if it detects any blocks that are not in sync, "
"will mark those blocks as such and write a message to the kernel log. Any "
"applications using the device at that time can continue to do so unimpeded, "
"and you may also <<s-switch-resource-roles,switch resource roles>> at will."
msgstr ""
"コマンドを実行すると、DRBD が _<peer_> の _<resource>_ の _<volume>_ に対して"
"オンライン照合を実行します。同期していないブロックを検出した場合は、ブロック"
"に非同期のマークを付け、カーネルログにメッセージを書き込みます。このときにデ"
"バイスを使用しているアプリケーションは中断なく動作し続けます。また、<<s-"
"switch-resource-roles,リソースロールの切り替え>>も行うことができます。"

#. type: Plain text
msgid ""
"_<Volume>_ is optional, if ommited, it will verify all volumes in that "
"resource."
msgstr ""
"_<Volume>_ はオプションで、省略した場合、そのリソース内のすべてのボリュームを"
"照合します。"

#. type: Plain text
msgid ""
"If out-of-sync blocks were detected during the verification run, you may "
"resynchronize them using the following commands after verification has "
"completed."
msgstr ""
"照合中に同期していないブロックが検出された場合は、照合の完了後に、次のコマン"
"ド使用して再同期できます。"

#. type: Plain text
msgid "Since drbd-9.0.29 the preferred way is one of these commands:"
msgstr "drbd-9.0.29 以降、推奨される方法は次のいずれかのコマンドです。"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdadm invalidate <resource>:<peer>/volume --reset-bitmap=no\n"
"# drbdadm invalidate-remote <resource>:<peer>/volume --reset-bitmap=no\n"
msgstr ""
"# drbdadm invalidate <resource>:<peer>/volume --reset-bitmap=no\n"
"# drbdadm invalidate-remote <resource>:<peer>/volume --reset-bitmap=no\n"

#. type: Plain text
msgid ""
"The first command will cause the local differences to be overwritten by the "
"remote version. The second command does it in the opposite direction."
msgstr ""
"最初のコマンドは、リモートバージョンによってローカルの違いが上書きされます。 "
"2 番目のコマンドは反対方向にそれを行います。"

#. type: Plain text
msgid ""
"Before drbd-9.0.29 one needs to initiate a resync. A way to do that is "
"disconnecting from a primary and ensuring that the primary changes at least "
"one block while the peer is away."
msgstr ""
"drbd-9.0.29 より前のバージョンでは、再同期を開始する必要があります。これを行"
"う方法は、対向ノードをプライマリから切断し、切断している間にプライマリが少な"
"くとも1 つのブロックを変更するようにすることです。"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdadm disconnect <resource>:<peer>\n"
"## write one block on the primary\n"
"# drbdadm connect <resource>:<peer>\n"
msgstr ""
"# drbdadm disconnect <resource>:<peer>\n"
"## write one block on the primary\n"
"# drbdadm connect <resource>:<peer>\n"

#. type: Title ====
#, no-wrap
msgid "Automating Online Verification"
msgstr "自動オンライン照合"

#. type: Plain text
msgid ""
"indexterm:[online device verification]Most users will want to automate "
"online device verification. This can be easily accomplished. Create a file "
"with the following contents, named `/etc/cron.d/drbd-verify` on *one* of "
"your nodes:"
msgstr ""
"indexterm:[on-line device verification]通常は、オンラインデバイス照合を自動的"
"に実行するほうが便利です。自動化は簡単です。*一方* のノードに `/etc/cron.d/"
"drbd-verify` という名前で、次のような内容のファイルを作成します。"

#. type: delimited block -
#, no-wrap
msgid "42 0 * * 0    root    /sbin/drbdadm verify <resource>\n"
msgstr "42 0 * * 0    root    /sbin/drbdadm verify <resource>\n"

#. type: Plain text
msgid ""
"This will have `cron` invoke a device verification every Sunday at 42 "
"minutes past midnight; so, if you come into the office on Monday morning, a "
"quick examination of the resource's status would show the result. If your "
"devices are very big, and the \\~32 hours were not enough, then you'll "
"notice _VerifyS_ or _VerifyT_ as connection state, meaning that the `verify` "
"is still in progress."
msgstr ""
"これにより、毎週日曜日の午前0時42分に、 `cron` がデバイス照合を呼び出します。"
"そのため、月曜の朝にリソース状態をチェックして結果を確認することができます。"
"デバイスが大きくて32時間では足りなかった場合、 コネクションステータスが "
"`VerifyS` または `VerifyT` になっています。これは `verify` がまだ動作中である"
"ことを意味しています。"

#. type: Plain text
msgid ""
"If you have enabled online verification for all your resources (for example, "
"by adding `verify-alg _<algorithm>_` to the `common` section in `/etc/drbd.d/"
"global_common.conf`), you may also use:"
msgstr ""
"オンライン照合をすべてのリソースで有効にした場合（例えば `/etc/drbd.d/"
"global_common.conf` の `common` セクションに `verify-alg <アルゴリズム>` を追"
"加するなど)には、以下のようにします。"

#. type: delimited block -
#, no-wrap
msgid "42 0 * * 0    root    /sbin/drbdadm verify all\n"
msgstr "42 0 * * 0    root    /sbin/drbdadm verify all\n"

#. type: Title ===
#, no-wrap
msgid "Configuring the Rate of Synchronization"
msgstr "同期速度の設定"

#. type: Plain text
msgid ""
"indexterm:[synchronization]Normally, one tries to ensure that background "
"synchronization (which makes the data on the synchronization target "
"temporarily inconsistent) completes as quickly as possible. However, it is "
"also necessary to keep background synchronization from hogging all bandwidth "
"otherwise available for foreground replication, which would be detrimental "
"to application performance. Therefore, you must configure the "
"synchronization bandwidth to match your hardware -- which you may do in a "
"permanent fashion or on-the-fly."
msgstr ""
"indexterm:[synchronization]バックグラウンド同期中は同期先のデータとの一貫性が"
"一時的に失われるため、同期はできるだけ短時間で完了させるべきです。ただし、す"
"べての帯域幅がバックグラウンド同期に占有されてしまうと、フォアグラウンドレプ"
"リケーションに使用できなくなり、アプリケーションのパフォーマンス低下につなが"
"ります。これは避ける必要があります。同期用の帯域幅はハードウェアに合わせて設"
"定する必要があります。"

#. type: Plain text
msgid ""
"It does not make sense to set a synchronization rate that is higher than the "
"maximum write throughput on your secondary node. You must not expect your "
"secondary node to miraculously be able to write faster than its I/O "
"subsystem allows, just because it happens to be the target of an ongoing "
"device synchronization."
msgstr ""
"同期速度をセカンダリノードの最大書き込みスループットを上回る速度に設定しても"
"意味がありません。デバイス同期の速度をどれほど高速に設定しても、セカンダリ"
"ノードがそのI/Oサブシステムの能力より高速に書き込みを行うことは不可能です。"

#. type: Plain text
msgid ""
"Likewise, and for the same reasons, it does not make sense to set a "
"synchronization rate that is higher than the bandwidth available on the "
"replication network."
msgstr ""
"また、同じ理由で、同期速度をレプリケーションネットワークの帯域幅の能力を上回"
"る速度に設定しても意味がありません。"

#. type: Title ====
#, no-wrap
msgid "Estimating a Synchronization Speed"
msgstr "同期速度の計算"

#. type: Plain text
msgid ""
"A good rule for this value is to use about 30% of the available replication "
"bandwidth. Therefore, if you had an I/O subsystem capable of sustaining "
"write throughput of 400MB/s, and a Gigabit Ethernet network capable of "
"sustaining 110 MB/s network throughput (the network being the bottleneck), "
"you would calculate:"
msgstr ""
"概算としては使用可能なレプリケーション帯域幅の30%程度を想定するのがよいでしょ"
"う。400MB/sの書き込みスループットを維持できるI/Oサブシステム、および110MB/sの"
"ネットワークスループットを維持できるギガビットイーサネットネットワークの場合"
"は、ネットワークがボトルネックになります。速度は次のように計算できます。"

#. type: Block title
#, no-wrap
msgid "Syncer rate example, 110MB/s effective available bandwidth"
msgstr "syncer 速度の例(有効帯域幅が110MB/sの場合)"

#. type: Target for macro image
#, no-wrap
msgid "images/sync-rate-example1.svg"
msgstr "images/sync-rate-example1.svg"

#. type: Plain text
msgid "Therefore, the recommended value for the `rate` option would be `33M`."
msgstr "この結果、 `resynce-rate` オプションの推奨値は `33M` になります。"

#. type: Plain text
msgid ""
"By contrast, if you had an I/O subsystem with a maximum throughput of 80MB/s "
"and a Gigabit Ethernet connection (the I/O subsystem being the bottleneck), "
"you would calculate:"
msgstr ""
"一方、最大スループットが80MB/sのI/Oサブシステム、およびギガビットイーサネット"
"接続を使用する場合は、I/Oサブシステムが律速要因になります。速度は次のように計"
"算できます。"

#. type: Block title
#, no-wrap
msgid "Syncer rate example, 80MB/s effective available bandwidth"
msgstr "syncer 速度の例(有効帯域幅が80MB/sの場合)"

#. type: Target for macro image
#, no-wrap
msgid "images/sync-rate-example2.svg"
msgstr "images/sync-rate-example2.svg"

#. type: Plain text
msgid ""
"In this case, the recommended value for the `rate` option would be `24M`."
msgstr "この場合、 `resync-rate` オプションの推奨値は `24M` です。"

#. type: Plain text
msgid ""
"Similarly, for a storage speed of 800MB/s and a 10Gbe network connection, "
"you would shoot for \\~240MB/s synchronization rate."
msgstr ""
"同じようにして800MB/sのストレージ速度で10Gbeのネットワークコネクションであれ"
"ば、〜240MB/sの同期速度が得られます。"

#. type: Title ====
#, no-wrap
msgid "Variable Synchronization Rate Configuration"
msgstr "可変同期速度設定"

#. type: Plain text
msgid ""
"When multiple DRBD resources share a single replication/synchronization "
"network, synchronization with a fixed rate may not be an optimal approach. "
"So, in DRBD 8.4.0 the variable-rate synchronization was enabled by default. "
"In this mode, DRBD uses an automated control loop algorithm to determine, "
"and adjust, the synchronization rate. This algorithm ensures that there is "
"always sufficient bandwidth available for foreground replication, greatly "
"mitigating the impact that background synchronization has on foreground I/O."
msgstr ""
"複数のDRBDリソースが1つのレプリケーション/同期ネットワークを共有する場合、同"
"期が固定レートであることは最適なアプローチではありません。そのためDRBD 8.4.0"
"から可変同期速度がデフォルトで有効になっています。このモードではDRBDが自動制"
"御のループアルゴリズムで同期速度を決定して調整を行います。このアルゴリズムは"
"フォアグラウンド同期に常に十分な帯域幅を確保し、バックグラウンド同期がフォア"
"グラウンドのI/Oに与える影響を少なくします。"

#. type: Plain text
msgid ""
"The optimal configuration for variable-rate synchronization may vary greatly "
"depending on the available network bandwidth, application I/O pattern and "
"link congestion."
msgstr ""
"最適な可変同期速度の設定は、使用できるネットワーク帯域幅、アプリケーションの"
"I/Oパターンやリンクの輻輳によって変わります。"

#. type: Plain text
msgid ""
"Ideal configuration settings also depend on whether <<s-drbd-proxy,DRBD "
"Proxy>> is in use or not.  It may be wise to engage professional consultancy "
"to optimally configure this DRBD feature. An _example_ configuration (which "
"assumes a deployment in conjunction with DRBD Proxy) is provided below:"
msgstr ""
"<<s-drbd-proxy,DRBD Proxy>> の有無によっても適切な設定は異なります。DRBDの機"
"能を最適化するためにコンサルタントを利用するのもよいでしょう。以下は(DRBD "
"Proxy使用を想定した環境での)設定の _一例_ です。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource> {\n"
"  disk {\n"
"    c-plan-ahead 5;\n"
"    c-max-rate 10M;\n"
"    c-fill-target 2M;\n"
"  }\n"
"}\n"
msgstr ""
"resource <resource> {\n"
"  disk {\n"
"    c-plan-ahead 5;\n"
"    c-max-rate 10M;\n"
"    c-fill-target 2M;\n"
"  }\n"
"}\n"

#. type: Plain text
msgid ""
"A good starting value for `c-fill-target` is _BDP * 2_, where _BDP_ is your "
"bandwidth-delay-product on the replication link."
msgstr ""
"`c-fill-target` の初期値は _BDP✕2_ がよいでしょう。 _BDP_ とはレプリケーショ"
"ンリンク上の帯域幅遅延積(Bandwidth Delay Product)です。"

#. type: Plain text
msgid ""
"For example, when using a 1GBit/s crossover connection, you'll end up with "
"about 200µs latencyfootnote:[The rule-of-thumb is using the time reported by "
"`ping`.]. + 1GBit/s means about 120MB/s; times 200*10^-6^ seconds gives "
"24000 Byte. Just round that value up to the next MB, and you're good to go."
msgstr ""
"例えば、1GBit/sの接続の場合、200µsのレイテンシになります。footnote:[概算は "
"`ping` の結果を使用しています]1GBit/sは約120MB/sです。120掛ける200*10^-6^秒は"
"24000Byteです。この値はMB単位まで丸めてもよいでしょう。"

#. type: Plain text
msgid ""
"Another example: a 100MBit WAN connection with 200ms latency means 12MB/s "
"times 0.2s, or about 2.5MB \"on the wire\". Here a good starting value for "
"`c-fill-target` would be 3MB."
msgstr ""
"別の例をあげると、100MBitのWAN接続で200msのレイテンシなら12MB/s掛ける0.2sで"
"す。2.5MBくらいになります。`c-fill-target` の初期値は3MBがよいでしょう。"

#. type: Plain text
msgid ""
"Please see the `drbd.conf` manual page for more details on the other "
"configuration items."
msgstr ""
"他の設定項目については `drbd.conf` のマニュアルページを参照してください。"

#. type: Title ====
#, no-wrap
msgid "Permanent Fixed Synchronization Rate Configuration"
msgstr "永続的な固定同期速度の設定"

#. type: Plain text
msgid ""
"In a few, very restricted situationsfootnote:[Like benchmarking.], it might "
"make sense to just use some fixed synchronization rate. In this case, first "
"of all you need to turn the dynamic sync rate controller off, by using `c-"
"plan-ahead 0;`."
msgstr ""
"ごく限られた状況footnote:[ベンチマークなど]では、固定同期速度を使うことがある"
"でしょう。この場合には、まず `c-plan-ahead 0;` にして可変同期速度調節の機能を"
"オフにします。"

#. type: Plain text
msgid ""
"Then, the maximum bandwidth a resource uses for background re-"
"synchronization is determined by the `resync-rate` option for a resource. "
"This must be included in the resource's `disk` section in `/etc/drbd.conf`:"
msgstr ""
"そして、リソースがバックグラウンド再同期に使用する最大帯域幅をリソースの "
"`resync-rate` オプションによって決定します。この設定はリソースの `/etc/drbd."
"conf` の `disk` セクションに記載します。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource>\n"
"  disk {\n"
"    resync-rate 40M;\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"
msgstr ""
"resource <resource>\n"
"  disk {\n"
"    resync-rate 40M;\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"

#. type: Plain text
msgid ""
"Note that the rate setting is given in _bytes_, not _bits_ per second; the "
"default unit is _Kibibyte_, so a value of `4096` would be interpreted as "
"`4MiB`."
msgstr ""
"同期速度の設定は1秒あたりの _バイト_ 単位であり _ビット_ 単位でない点に注意し"
"てください。デフォルトの単位は _kibibyte_ で、 `4096` であれば `4MiB` となり"
"ます。"

#. type: Plain text
msgid ""
"This just defines a rate that DRBD tries to achieve. If there is a "
"bottleneck with lower throughput (network, storage speed), the defined speed "
"(aka the \"wished-for\" performance ;) won't be reached."
msgstr ""
"これはあくまでDRBDが行おうとする速度にすぎません。低スループットのボトルネッ"
"ク(ネットワークやストレージの速度)がある場合、設定した速度(いわゆる\"理想値"
"\")には達しません。"

#. type: Title ====
#, no-wrap
msgid "Further Synchronization Hints"
msgstr "同期速度の設定"

#. type: Plain text
msgid ""
"When some amount of the to-be-synchronized data isn't really in use anymore "
"(for example, because files got deleted while one node wasn't connected), "
"you might benefit from the <<s-trim-discard>>."
msgstr ""
"同期すべきデータ領域の一部が不要になった場合、例えば、対向ノードとの接続が切"
"れている時にデータを削除した場合などには<<s-trim-discard>>の有効性が感じられ"
"るかもしれません。"

#. type: Plain text
msgid ""
"Furthermore, `c-min-rate` is easy to misunderstand - it doesn't define a "
"*minimum* synchronization speed, but rather a limit below which DRBD will "
"not slow down further *on purpose*. + Whether you manage to *reach* that "
"synchronization rate depends on your network and storage speed, network "
"latency (which might be highly variable for shared links), and application I/"
"O (which you might not be able to do anything about)."
msgstr ""
"`c-min-rate` は間違われやすいです。これは同期速度の *最低値* ではなくて、この"
"速度以上の速度低下を *意図的に* 行わないという制限です。ネットワークとスト"
"レージの速度、ネットワーク遅延(これは回線共有による影響が大きいでしょう)、ア"
"プリケーションIO（関与することは難しいかもしれません）に応じた同期速度の管理"
"まで *手が及ぶか* どうかによります。"

#. type: Title ===
#, no-wrap
msgid "Configuring Checksum-based Synchronization"
msgstr "チェックサムベース同期の設定"

#. type: Plain text
msgid ""
"indexterm:[checksum-based synchronization]<<p-checksum-sync,Checksum-based "
"synchronization>> is not enabled for resources by default. To enable it, add "
"the following lines to your resource configuration in `/etc/drbd.conf`:"
msgstr ""
"indexterm:[checksum-based synchronization]<<p-checksum-sync, チェックサムベー"
"ス同期>>はデフォルトでは有効になっていません。有効にするには、 `/etc/drbd."
"conf` のリソース構成に次の行を追加します。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource>\n"
"  net {\n"
"    csums-alg <algorithm>;\n"
"  }\n"
"  ...\n"
"}\n"
msgstr ""
"resource <resource>\n"
"  net {\n"
"    csums-alg <algorithm>;\n"
"  }\n"
"  ...\n"
"}\n"

#. type: Title ===
#, no-wrap
msgid "Configuring Congestion Policies and Suspended Replication"
msgstr "輻輳ポリシーと中断したレプリケーションの構成"

#. type: Plain text
msgid ""
"In an environment where the replication bandwidth is highly variable (as "
"would be typical in WAN replication setups), the replication link may "
"occasionally become congested. In a default configuration, this would cause "
"I/O on the primary node to block, which is sometimes undesirable."
msgstr ""
"レプリケーション帯域幅が大きく変動する環境(WANレプリケーション設定で典型的)の"
"場合、レプリケーションリンクは時に輻輳します。デフォルト設定では、プライマリ"
"ノードのI/Oのブロックを引き起こし、望ましくない場合があります。"

#. type: Plain text
msgid ""
"Instead, you may configure DRBD to _suspend_ the ongoing replication in this "
"case, causing the Primary's data set to _pull ahead_ of the Secondary. In "
"this mode, DRBD keeps the replication channel open -- it never switches to "
"disconnected mode -- but does not actually replicate until sufficient "
"bandwidth becomes available again."
msgstr ""
"その代わりに、進行中の同期を suspend (中断)に設定し、プライマリのデータセット"
"をセカンダリから _pull ahead_ (引き離す)にします。このモードではDRBDはレプリ"
"ケーションチャネルを開いたままにし、切断モードにはしません。しかし十分な帯域"
"幅が利用できるようになるまで実際にはレプリケートを行いません。"

#. type: Plain text
msgid "The following example is for a DRBD Proxy configuration:"
msgstr "次の例は、DRBD Proxy構成のためのものです。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource> {\n"
"  net {\n"
"    on-congestion pull-ahead;\n"
"    congestion-fill 2G;\n"
"    congestion-extents 2000;\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"
msgstr ""
"resource <resource> {\n"
"  net {\n"
"    on-congestion pull-ahead;\n"
"    congestion-fill 2G;\n"
"    congestion-extents 2000;\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"

#. type: Plain text
msgid ""
"It is usually wise to set both `congestion-fill` and `congestion-extents` "
"together with the `pull-ahead` option."
msgstr ""
"通常は `congestion-fill` と `congestion-extents` を `pull-ahead` オプションと"
"合わせて設定するのがよい方法でしょう。"

#. type: Plain text
msgid "A good value for `congestion-fill` is 90%"
msgstr "`congestion-fill` の値は以下の値の90%にするとよいでしょう。"

#. type: Plain text
msgid ""
"of the allocated DRBD proxy buffer memory, when replicating over DRBD Proxy, "
"or"
msgstr ""
"DRBD Proxy越しの同期の場合のDRBD Proxyのバッファメモリの割り当て、 または"

#. type: Plain text
msgid "of the TCP network send buffer, in non-DRBD Proxy setups."
msgstr "DRBD Proxy構成でない環境でのTCPネットワークの送信バッファ"

#. type: Plain text
msgid ""
"A good value for `congestion-extents` is 90% of your configured `al-extents` "
"for the affected resources."
msgstr ""
"`congestion-extents` の値は、影響するリソースの `al-extents` に設定した値の"
"90%がよいでしょう。"

#. type: Title ===
#, no-wrap
msgid "Configuring I/O Error Handling Strategies"
msgstr "I/Oエラー処理方針の設定"

#. type: Plain text
msgid ""
"indexterm:[I/O errors]indexterm:[drbd.conf]DRBD's <<s-handling-disk-errors,"
"strategy for handling lower-level I/O errors>> is determined by the `on-io-"
"error` option, included in the resource `disk` configuration in `/etc/drbd."
"conf`:"
msgstr ""
"indexterm:[I/O errors]indexterm:[drbd.conf]DRBDが <<s-handling-disk-errors,下"
"位レベルI/Oエラーを処理する際の方針>>は、リソースの `/etc/drbd.conf` の "
"`disk` セクションの `on-io-error` で指定します。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource> {\n"
"  disk {\n"
"    on-io-error <strategy>;\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"
msgstr ""
"resource <resource> {\n"
"  disk {\n"
"    on-io-error <strategy>;\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"

#. type: Plain text
msgid ""
"You may, of course, set this in the `common` section too, if you want to "
"define a global I/O error handling policy for all resources."
msgstr ""
"すべてのリソースのグローバルI/Oエラー処理方針を定義したい場合は、これを "
"`common` セクションで設定します。"

#. type: Plain text
msgid "_<strategy>_ may be one of the following options:"
msgstr "_<strategy>_ は以下のいずれかを指定します。"

#. type: Block title
#, no-wrap
msgid "`detach`"
msgstr "`detach`"

#. type: Plain text
msgid ""
"This is the default and recommended option. On the occurrence of a lower-"
"level I/O error, the node drops its backing device, and continues in "
"diskless mode."
msgstr ""
"これがデフォルトで、推奨オプションです。下位レベルI/Oエラーが発生すると、DRBD"
"はそのノードの下位デバイスを切り離し、ディスクレスモードで動作を継続します。"

#. type: Block title
#, no-wrap
msgid "`pass-on`"
msgstr "`pass-on`"

#. type: Plain text
msgid ""
"This causes DRBD to report the I/O error to the upper layers. On the primary "
"node, it is reported to the mounted file system. On the secondary node, it "
"is ignored (because the secondary has no upper layer to report to)."
msgstr ""
"上位層にI/Oエラーを通知します。プライマリノードの場合は、マウントされたファイ"
"ルシステムに通知されます。セカンダリノードの場合は無視されます(セカンダリノー"
"ドには通知すべき上位層がないため)。"

#. type: Block title
#, no-wrap
msgid "`call-local-io-error`"
msgstr "`call-local-io-error`"

#. type: Plain text
msgid ""
"Invokes the command defined as the local I/O error handler. This requires "
"that a corresponding `local-io-error` command invocation is defined in the "
"resource's `handlers` section. It is entirely left to the administrator's "
"discretion to implement I/O error handling using the command (or script) "
"invoked by `local-io-error`."
msgstr ""
"ローカルI/Oエラーハンドラとして定義されたコマンドを呼び出します。このオプショ"
"ンを使うには、対応する `local-io-error` ハンドラをリソースの `handlers` セク"
"ションに定義する必要があります。`local-io-error` で呼び出されるコマンド(また"
"はスクリプト)にI/Oエラー処理を実装するかどうかは管理者の判断です。"

#. type: Plain text
msgid ""
"Early DRBD versions (prior to 8.0) included another option, `panic`, which "
"would forcibly remove the node from the cluster by way of a kernel panic, "
"whenever a local I/O error occurred. While that option is no longer "
"available, the same behavior may be mimicked through the `local-io-error`/"
"`call-local-io-error` interface. You should do so only if you fully "
"understand the implications of such behavior."
msgstr ""
"DRBDの以前のバージョン(8.0以前)にはもう1つのオプション panic があり、これを使"
"用すると、ローカルI/Oエラーが発生するたびにカーネルパニックによりノードがクラ"
"スタから強制的に削除されました。このオプションは現在は使用できませんが、 "
"`local-io-error` / `call-local-io-error` インタフェースを使用すると同じような"
"動作を実現します。ただし、この動作の意味を十分理解した上で使用してください。"

#. type: Plain text
msgid ""
"You may reconfigure a running resource's I/O error handling strategy by "
"following this process:"
msgstr ""
"次のコマンドで、実行中のリソースのI/Oエラー処理方針を再構成することができま"
"す。"

#. type: Plain text
msgid "Edit the resource configuration in `/etc/drbd.d/__<resource>__.res`."
msgstr "`/etc/drbd.d/<resource>.res` のリソース構成の編集"

#. type: Plain text
msgid "Copy the configuration to the peer node."
msgstr "構成の対向ノードへのコピー"

#. type: Plain text
msgid "Issue `drbdadm adjust _<resource>_` on both nodes."
msgstr "両ノードでの `drbdadm adjust <resource>` の実行"

#. type: Title ===
#, no-wrap
msgid "Configuring Replication Traffic Integrity Checking"
msgstr "レプリケーショントラフィックの整合性チェックを設定"

#. type: Plain text
msgid ""
"indexterm:[replication traffic integrity checking]<<s-integrity-check,"
"Replication traffic integrity checking>> is not enabled for resources by "
"default. To enable it, add the following lines to your resource "
"configuration in `/etc/drbd.conf`:"
msgstr ""
"indexterm:[replication traffic integrity checking]<<s-integrity-check,レプリ"
"ケーショントラフィックの整合性チェック>> はデフォルトでは有効になっていませ"
"ん。有効にする場合は、 `/etc/drbd.conf` のリソース構成に次の行を追加します。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource>\n"
"  net {\n"
"    data-integrity-alg <algorithm>;\n"
"  }\n"
"  ...\n"
"}\n"
msgstr ""
"resource <resource>\n"
"  net {\n"
"    data-integrity-alg <algorithm>;\n"
"  }\n"
"  ...\n"
"}\n"

#. type: Plain text
msgid ""
"This feature is not intended for production use. Enable only if you need to "
"diagnose data corruption problems, and want to see whether the transport "
"path (network hardware, drivers, switches) might be at fault!"
msgstr ""
"この機能は本番環境での使用は想定していません。データ破壊の問題や、通信経路"
"(ネットワークハードウェア、ドライバ、スイッチ)に障害があるかどうかを診断する"
"場合にのみ使用してください。"

#. type: Title ===
#, no-wrap
msgid "Resizing Resources"
msgstr "リソースのサイズ変更"

#. type: Plain text
msgid ""
"When growing (extending) DRBD volumes, you need to grow from bottom to top.  "
"You need to extend the backing block devices on all nodes first.  Then you "
"can tell DRBD to use the new space."
msgstr ""
"DRBD ボリュームを拡張する場合は、下から上に拡張する必要があります。最初に、す"
"べてのノードで下位ブロックデバイスを拡張する必要があります。次に、DRBD に新し"
"いスペースを使用するように指示します。"

#. type: Plain text
msgid ""
"Once the DRBD volume is extended, you need to still propagate that into "
"whatever is using DRBD: extend the file system, or make a VM running with "
"this volume attached aware of the new \"disk size\"."
msgstr ""
"DRBD ボリュームが拡張された後、DRBD を使用しているものにそれを伝える必要があ"
"ります。ファイルシステムを拡張する、あるいはこのボリュームが接続された状態で"
"実行されている VM に新しい「ディスクサイズ」を認識させます。"

#. type: Plain text
msgid "That all typically boils down to"
msgstr "これは通常、次のようになります。"

#. type: delimited block -
#, no-wrap
msgid ""
"# # on all nodes, resize the backing LV:\n"
"# lvextend -L +${additional_gb}g VG/LV\n"
"# # on one node:\n"
"# drbdadm resize ${resource_name}/${volume_number}\n"
"# # on the Primary only:\n"
"# # resize the file system using the file system specific tool, see below\n"
msgstr ""
"# # on all nodes, resize the backing LV:\n"
"# lvextend -L +${additional_gb}g VG/LV\n"
"# # on one node:\n"
"# drbdadm resize ${resource_name}/${volume_number}\n"
"# # on the Primary only:\n"
"# # resize the file system using the file system specific tool, see below\n"

#. type: Plain text
msgid "See also the next sections <<s-growing-online>> and following."
msgstr "次のセクション <<s-growing-online>> も参照ください。"

#. type: Plain text
msgid ""
"Note that different file systems have different capabilities and different "
"sets of management tools. For example XFS can only grow.  You point its tool "
"to the active mount point: `xfs_growfs /where/you/have/it/mounted`."
msgstr ""
"ファイルシステムが異なれば、機能や管理ツールのセットも異なることに注意してく"
"ださい。例えば、XFS は拡張しかできません。また、引数にアクティブなマウントポ"
"イントを指定します: `xfs_growfs /where/you/have/it/mounted`"

#. type: Plain text
msgid ""
"While the EXT family can both grow (even online), and also shrink (only "
"offline; you have to unmount it first). To resize an ext3 or ext4, you would "
"point the tool not to the mount point, but to the (mounted)  block device: "
"`resize2fs /dev/drbd#`"
msgstr ""
"EXT ファミリは、拡張（オンラインでも）と縮小（オフラインのみ。最初にマウント"
"を解除する必要があります）の両方が可能です。 ext3 または ext4 のサイズを変更"
"するには、引数にマウントポイントではなく、（マウントされた）ブロックデバイス"
"を指定します: `resize2fs /dev/drbd#`"

#. type: Plain text
msgid ""
"Obviously use the correct DRBD (as displayed by `mount` or `df -T`, while "
"mounted), and *not* the backing block device. If DRBD is up, that's not "
"supposed to work anyways (`resize2fs: Device or resource busy while trying "
"to open /dev/mapper/VG-LV Couldn't find valid filesystem superblock.`).  If "
"you tried to do that offline (with DRBD stopped), you may corrupt DRBD meta "
"data if you ran the file system tools directly against the backing LV or "
"partition. So don't."
msgstr ""
"デバイスには DRBD デバイス（マウント中に `mount` または `df -T` で表示され"
"る）を使用し、下位ブロックデバイスは使用しないでください。 DRBD が起動してい"
"る限り、それは機能しないはずです（ resize2fs ではオープンしにようとするとデバ"
"イスまたはリソースがビジーで、有効なファイルシステムのスーパーブロックが見つ"
"かりません）。しかし、オフラインで（DRBDを停止して）実行した場合、ファイルシ"
"ステムツールを下位 LV またはパーティションに対して直接実行すると、DRBD メタ"
"データが破壊する可能性があります。よって決して実行しないでください。"

#. type: Plain text
msgid ""
"You do the file system resize only *once* on the Primary, against the active "
"DRBD device.  DRBD replicates the changes to the file system structure.  "
"That is what you have it for."
msgstr ""
"ファイルシステムのサイズ変更は、アクティブな DRBD デバイスに対して、プライマ"
"リで１回のみ行います。DRBD はファイルシステム構造への変更を複製します。"

#. type: Plain text
msgid ""
"Also, don't use resize2fs on XFS volumes, or XFS tools on EXT, or ...  but "
"the right tool for the file system in use."
msgstr ""
"また、XFS ボリュームで resize2fs を使用したり、EXT で XFS ツールを使用したり"
"しないでください。使用中のファイルシステムに適したツールを使用してください。"

#. type: Plain text
msgid ""
"`resize2fs: Bad magic number in super-block while trying to open /dev/drbd7` "
"is probably just trying to tell you that this is *not* an EXT file system, "
"and you should try an other tool instead. Maybe `xfs_growfs`? But as "
"mentioned, that does not take the block device, but the mount point as "
"argument."
msgstr ""
"resize2fs で /dev/drbd7 をオープンしたとき、スーパーブロックの不正なマジック"
"ナンバーは、これが EXT ファイルシステムではないことを伝えているので、代わりに"
"他のツールを試す必要があります。例えば `xfs_growfs` です。ブロックデバイスで"
"はなく、マウントポイントを引数として取ることに注意してください。"

#. type: Plain text
msgid ""
"When shrinking (reducing) DRBD volumes, you need to shrink from top to "
"bottom.  So first verify that no one is using the space you want to cut "
"off.  Next, shrink the file system (if your file system supports that).  "
"Then tell DRBD to stop using that space, which is not so easy with DRBD "
"internal meta data, because they are by design \"at the end\" of the backing "
"device."
msgstr ""
"DRBD ボリュームを縮小する場合は、上から下に縮小する必要があります。したがっ"
"て、最初に、切り取りたいスペースを誰も使用していないことを確認してください。"
"次に、ファイルシステムを縮小します（ファイルシステムがサポートしている場"
"合）。次に、DRBD にそのスペースの使用を停止するように指示します。DRBD 内部メ"
"タデータは下位デバイスの最後にあるので、それほど簡単ではありません。"

#. type: Plain text
msgid ""
"Once you are sure that DRBD won't use the space anymore either, you can cut "
"it off from the backing device, for example using `lvreduce`."
msgstr ""
"DRBD がスペースを使用しないことが確実になったら、たとえば `lvreduce` を使用し"
"て、下位デバイスからスペースを切り離すことができます。"

#. type: Plain text
msgid "See also <<s-shrinking-online>>, <<s-shrinking-offline>>."
msgstr "<<s-shrinking-online>>, <<s-shrinking-offline>> も参照ください。"

#. type: Title ====
#, no-wrap
msgid "Growing Online"
msgstr "オンライン拡張"

#. type: Plain text
msgid ""
"indexterm:[resource]If the backing block devices can be grown while in "
"operation (online), it is also possible to increase the size of a DRBD "
"device based on these devices during operation. To do so, two criteria must "
"be fulfilled:"
msgstr ""
"indexterm:[resource]動作中(オンライン)に下位ブロックデバイスを拡張できる場合"
"は、これらのデバイスをベースとするDRBDデバイスについても動作中にサイズを拡張"
"することができます。その際に、次の2つの条件を満たす必要があります。"

#. type: Plain text
msgid ""
"The affected resource's backing device must be one managed by a logical "
"volume management subsystem, such as LVM."
msgstr ""
"影響を受けるリソースの下位デバイスが、 LVMやEVMSなどの論理ボリューム管理サブ"
"システムによって管理されている。"

#. type: Plain text
msgid "The resource must currently be in the _Connected_ connection state."
msgstr "現在、リソースのコネクションステータスが `Connected` になっている。"

#. type: Plain text
msgid ""
"Having grown the backing block devices on all nodes, ensure that only one "
"node is in primary state. Then enter on one node:"
msgstr ""
"両方のノードの下位ブロックデバイスを拡張したら、一方のノードだけがプライマリ"
"状態であることを確認してください。プライマリノードで次のように入力します。"

#. type: delimited block -
#, no-wrap
msgid "# drbdadm resize <resource>\n"
msgstr "# drbdadm resize <resource>\n"

#. type: Plain text
msgid ""
"This triggers a synchronization of the new section. The synchronization is "
"done from the primary node to the secondary node."
msgstr ""
"新しいセクションの同期がトリガーされます。同期はプライマリノードからセカンダ"
"リノードへ実行されます。"

#. type: Plain text
msgid ""
"If the space you're adding is clean, you can skip syncing the additional "
"space by using the --assume-clean option."
msgstr ""
"追加する領域がクリーンな場合には、追加領域の同期を--assume-cleanオプションで"
"スキップできます。"

#. type: delimited block -
#, no-wrap
msgid "# drbdadm -- --assume-clean resize <resource>\n"
msgstr "# drbdadm -- --assume-clean resize <resource>\n"

#. type: Title ====
#, no-wrap
msgid "Growing Offline"
msgstr "オフライン拡張する"

#. type: Plain text
msgid ""
"indexterm:[resource]When the backing block devices on both nodes are grown "
"while DRBD is inactive, and the DRBD resource is using <<s-external-meta-"
"data,external meta data>>, then the new size is recognized automatically. No "
"administrative intervention is necessary. The DRBD device will have the new "
"size after the next activation of DRBD on both nodes and a successful "
"establishment of a network connection."
msgstr ""
"indexterm:[resource]<<s-external-meta-data,外部メタデータ>>を使っている場合、"
"DRBD停止中に両ノードの下位ブロックデバイスを拡張すると、新しいサイズが自動的"
"に認識されます。管理者による作業は必要ありません。両方のノードで次にDRBDを起"
"動した際に、DRBDデバイスのサイズが新しいサイズになり、ネットワーク接続が正常"
"に確立します。"

#. type: Plain text
msgid ""
"If however the DRBD resource is configured to use <<s-internal-meta-data,"
"internal meta data>>, then this meta data must be moved to the end of the "
"grown device before the new size becomes available. To do so, complete the "
"following steps:"
msgstr ""
"DRBDリソースで<<s-internal-meta-data,内部メタデータ>>を使用している場合は、リ"
"ソースのサイズを変更する前に、メタデータを拡張されるデバイス領域の後ろの方に"
"移動させる必要があります。これを行うには次の手順を実行します。"

#. type: Plain text
msgid "This is an advanced procedure. Use at your own discretion."
msgstr "これは高度な手順です。慎重に検討した上で実行してください。"

#. type: Plain text
msgid "Unconfigure your DRBD resource:"
msgstr "DRBDリソースを停止します。"

#. type: Plain text
msgid "Save the meta data in a text file prior to resizing:"
msgstr "縮小する前に、メタデータをテキストファイルに保存します。"

#. type: delimited block -
#, no-wrap
msgid "# drbdadm dump-md <resource> > /tmp/metadata\n"
msgstr "# drbdadm dump-md <resource> > /tmp/metadata\n"

#. type: Plain text
msgid ""
"You must do this on both nodes, using a separate dump file for every node. "
"*Do not* dump the meta data on one node, and simply copy the dump file to "
"the peer. *This. will. not. work.*"
msgstr ""
"各ノードごとにそれぞれのダンプファイルを作成する必要があります。この手順は、"
"両方のノードでそれぞれ実行します。一方のノードのメタデータのダンプを対向ノー"
"ドに *コピーしないでください* 。 DRBDは *動作しなくなります* 。"

#. type: Plain text
msgid "Grow the backing block device on both nodes."
msgstr "両方のノードの下位ブロックデバイスを拡大します。"

#. type: Plain text
msgid ""
"Adjust the size information (`la-size-sect`) in the file `/tmp/metadata` "
"accordingly, on both nodes. Remember that `la-size-sect` must be specified "
"in sectors."
msgstr ""
"`/tmp/metadata` ファイルのサイズ情報( `la-size-sect` )を書き換えます。`la-"
"size-sect` は、必ずセクタ単位で指定する必要があります。"

#. type: Plain text
msgid "Re-initialize the metadata area:"
msgstr "メタデータ領域の再初期化をします。"

#. type: delimited block -
#, no-wrap
msgid "# drbdadm create-md <resource>\n"
msgstr "# drbdadm create-md <resource>\n"

#. type: Plain text
msgid "Re-import the corrected meta data, on both nodes:"
msgstr "両ノードで修正したメタデータをインポートします。"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdmeta_cmd=$(drbdadm -d dump-md <resource>)\n"
"# ${drbdmeta_cmd/dump-md/restore-md} /tmp/metadata\n"
"Valid meta-data in place, overwrite? [need to type 'yes' to confirm]\n"
"yes\n"
"Successfully restored meta data\n"
msgstr ""
"# drbdmeta_cmd=$(drbdadm -d dump-md <resource>)\n"
"# ${drbdmeta_cmd/dump-md/restore-md} /tmp/metadata\n"
"Valid meta-data in place, overwrite? [need to type 'yes' to confirm]\n"
"yes\n"
"Successfully restored meta data\n"

#. type: Plain text
msgid ""
"This example uses `bash` parameter substitution. It may or may not work in "
"other shells. Check your `SHELL` environment variable if you are unsure "
"which shell you are currently using."
msgstr ""
"この例では `bash` パラメータ置換を使用しています。他のシェルの場合、機能する"
"場合もしない場合もあります。現在使用しているシェルが分からない場合は、 "
"`SHELL` 環境変数を確認してください。"

#. type: Plain text
msgid "Re-enable your DRBD resource:"
msgstr "再度DRBDリソースを起動します。"

#. type: Plain text
msgid "On one node, promote the DRBD resource:"
msgstr "一方のノードでDRBDリソースを昇格します。"

#. type: delimited block -
#, no-wrap
msgid "# drbdadm primary <resource>\n"
msgstr "# drbdadm primary <resource>\n"

#. type: Plain text
msgid ""
"Finally, grow the file system so it fills the extended size of the DRBD "
"device."
msgstr ""
"最後に、拡張したDRBDデバイスを活用するために、ファイルシステムを拡張します。"

#. type: Title ====
#, no-wrap
msgid "Shrinking Online"
msgstr "オンライン縮小"

#. type: Plain text
msgid "Online shrinking is only supported with external metadata."
msgstr ""
"警告 : オンラインでの縮小は外部メタデータ使用の場合のみサポートしています。"

#. type: Plain text
msgid ""
"indexterm:[resource]Before shrinking a DRBD device, you _must_ shrink the "
"layers above DRBD (usually the file system). Since DRBD cannot ask the file "
"system how much space it actually uses, you have to be careful to not cause "
"data loss."
msgstr ""
"indexterm:[resource]DRBDデバイスを縮小する前に、DRBDの上位層(通常はファイルシ"
"ステム)を縮小 _しなければいけません_ 。ファイルシステムが実際に使用している容"
"量を、DRBDが知ることはできないため、データが失われないように注意する必要があ"
"ります。"

#. type: Plain text
msgid ""
"Whether or not the _filesystem_ can be shrunk online depends on the "
"filesystem being used. Most filesystems do not support online shrinking. XFS "
"does not support shrinking at all."
msgstr ""
"ファイルシステムをオンラインで縮小できるかどうかは、使用しているファイルシス"
"テムによって異なります。ほとんどのファイルシステムはオンラインでの縮小をサ"
"ポートしません。XFSは縮小そのものをサポートしません。"

#. type: Plain text
msgid ""
"To shrink DRBD online, issue the following command _after_ you have shrunk "
"the file system residing on top of it:"
msgstr ""
"オンラインでDRBDを縮小するには、その上位に常駐するファイルシステムを縮小した_"
"後に_、次のコマンドを実行します。"

#. type: delimited block -
#, no-wrap
msgid "# drbdadm resize --size=<new-size> <resource>\n"
msgstr "# drbdadm resize --size=<new-size> <resource>\n"

#. type: Plain text
msgid ""
"You may use the usual multiplier suffixes for _<new-size>_ (K, M, G, and so "
"on). After you have shrunk DRBD, you may also shrink the containing block "
"device (if it supports shrinking)."
msgstr ""
"_<new-size>_ には通常の乗数サフィックス(K、M、Gなど)を使用できます。DRBDを縮"
"小したら、DRBDに含まれるブロックデバイスも縮小できます(デバイスが縮小をサポー"
"トする場合)。"

#. type: Plain text
msgid ""
"It might be a good idea to issue `drbdadm resize _<resource>_` after "
"resizing the lower level device, so that the DRBD metadata *really* gets "
"written into the expected space at the end of the volume."
msgstr ""
"DRBDのメタデータがボリュームの想定される箇所に *実際に* 書き込まれるように下"
"位デバイスのリサイズ後に `drbdadm resize <resource>` を実行してもよいでしょ"
"う。"

#. type: Title ====
#, no-wrap
msgid "Shrinking Offline"
msgstr "オフライン縮小"

#. type: Plain text
msgid ""
"indexterm:[resource]If you were to shrink a backing block device while DRBD "
"is inactive, DRBD would refuse to attach to this block device during the "
"next attach attempt, since it is now too small (in case external meta data "
"is used), or it would be unable to find its meta data (in case internal meta "
"data is used). To work around these issues, use this procedure (if you "
"cannot use <<s-shrinking-online,online shrinking>>):"
msgstr ""
"indexterm:[resource]DRBDが停止しているときに下位ブロックデバイスを縮小する"
"と、次にそのブロックデバイスを接続しようとしてもDRBDが拒否します。これは、ブ"
"ロックデバイスが小さすぎる(外部メタデータを使用する場合)、またはメタデータを"
"見つけられない(内部メタデータを使用する場合)ことが原因です。この問題を回避す"
"るには、次の手順を行います (<<s-shrinking-online,オンライン縮小>>を使用出来な"
"い場合)。"

#. type: Plain text
msgid "Shrink the file system from one node, while DRBD is still configured."
msgstr ""
"DRBDがまだ動作している状態で、一方のノードのファイルシステムを縮小します。"

#. type: Plain text
msgid "Save the meta data in a text file prior to shrinking:"
msgstr "縮小する前に、メタデータをテキストファイルに保存します。"

#. type: Plain text
msgid "Shrink the backing block device on both nodes."
msgstr "両方のノードの下位ブロックデバイスを縮小します。"

#. type: Plain text
#, no-wrap
msgid ""
"*Only if you are using internal metadata* (which at this time have\n"
"probably been lost due to the shrinking process), re-initialize the\n"
"metadata area:\n"
msgstr "*内部メタデータを使用している場合は、メタデータ領域を再初期化します(この時点では、縮小によりおそらく内部メタデータが失われています)。\n"

#. type: Title ===
#, no-wrap
msgid "Disabling Backing Device Flushes"
msgstr "下位デバイスのフラッシュを無効にする"

#. type: Plain text
msgid ""
"You should only disable device flushes when running DRBD on devices with a "
"battery-backed write cache (BBWC). Most storage controllers allow to "
"automatically disable the write cache when the battery is depleted, "
"switching to write-through mode when the battery dies. It is strongly "
"recommended to enable such a feature."
msgstr ""
"バッテリバックアップ書き込みキャッシュ(BBWC)を備えたデバイスでDRBDを実行して"
"いる場合にのみ、デバイスのフラッシュを無効にできます。ほとんどのストレージコ"
"ントローラは、バッテリが消耗すると書き込みキャッシュを自動的に無効にし、バッ"
"テリが完全になくなると即時書き込み(ライトスルー)モードに切り替える機能を備え"
"ています。このような機能を有効にすることを強くお勧めします。"

#. type: Plain text
msgid ""
"Disabling DRBD's flushes when running without BBWC, or on BBWC with a "
"depleted battery, is _likely to cause data loss_ and should not be attempted."
msgstr ""
"BBWC機能を使用していない、またはバッテリが消耗した状態でBBWCを使用していると"
"きに、DRBDのフラッシュを無効にすると、 _データが失われるおそれがあります_ し"
"たがって、これはお勧めできません。"

#. type: Plain text
msgid ""
"DRBD allows you to enable and disable <<s-disk-flush-support,backing device "
"flushes>> separately for the replicated data set and DRBD's own metadata. "
"Both of these options are enabled by default. If you want to disable either "
"(or both), you would set this in the `disk` section for the DRBD "
"configuration file, `/etc/drbd.conf`."
msgstr ""
"DRBDは<<s-disk-flush-support,下位デバイスのフラッシュ>>を、レプリケートされた"
"データセットとDRBD独自のメタデータについて、個別に有効と無効を切り替える機能"
"を備えています。この2つのオプションはデフォルトで有効になっています。このオプ"
"ションのいずれか(または両方)を無効にしたい場合は、DRBD設定ファイルの `/etc/"
"drbd.conf` の `disk` セクションで設定できます。"

#. type: Plain text
msgid ""
"To disable disk flushes for the replicated data set, include the following "
"line in your configuration:"
msgstr ""
"レプリケートされたデータセットのディスクフラッシュを無効にするには、構成に次"
"の行を記述します。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource>\n"
"  disk {\n"
"    disk-flushes no;\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"
msgstr ""
"resource <resource>\n"
"  disk {\n"
"    disk-flushes no;\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"

#. type: Plain text
msgid ""
"To disable disk flushes on DRBD's meta data, include the following line:"
msgstr ""
"DRBDのメタデータのディスクフラッシュを無効にするには、次の行を記述します。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource>\n"
"  disk {\n"
"    md-flushes no;\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"
msgstr ""
"resource <resource>\n"
"  disk {\n"
"    md-flushes no;\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"

#. type: Plain text
msgid ""
"After you have modified your resource configuration (and synchronized your `/"
"etc/drbd.conf` between nodes, of course), you may enable these settings by "
"issuing this command on both nodes:"
msgstr ""
"リソースの構成を修正し、また、もちろん両ノードの `/etc/drbd.conf` を同期した"
"ら、両ノードで次のコマンドを実行して、これらの設定を有効にします。"

#. type: delimited block -
#, no-wrap
msgid "# drbdadm adjust <resource>\n"
msgstr "# drbdadm adjust <resource>\n"

#. type: Plain text
msgid ""
"If only one of the servers has a BBWCfootnote:[For example, in the DR site "
"you might be using different hardware, right?], you should move the setting "
"into a host section, like this:"
msgstr ""
"1台のサーバのみがBBWCがある場合footnote:[例えばDRサイトでは異なるハードウェア"
"を使うでしょう]には、ホストセクションに以下のような設定をしてください。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource> {\n"
"  disk {\n"
"    ... common settings ...\n"
"  }\n"
msgstr ""
"resource <resource> {\n"
"  disk {\n"
"    ... common settings ...\n"
"  }\n"

#. type: delimited block -
#, no-wrap
msgid ""
"  on host-1 {\n"
"    disk {\n"
"      md-flushes no;\n"
"    }\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"
msgstr ""
"  on host-1 {\n"
"    disk {\n"
"      md-flushes no;\n"
"    }\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"

#. type: Title ===
#, no-wrap
msgid "Configuring Split Brain Behavior"
msgstr "スプリットブレイン時の動作の設定"

#. type: Title ====
#, no-wrap
msgid "Split Brain Notification"
msgstr "スプリットブレインの通知"

#. type: Plain text
msgid ""
"DRBD invokes the `split-brain` handler, if configured, at any time split "
"brain is _detected_. To configure this handler, add the following item to "
"your resource configuration:"
msgstr ""
"スプリットブレインが _検出される_ と、DRBDはつねに `split-brain` ハンドラを呼"
"び出します(設定されていれば)。このハンドラを設定するには、リソース構成に次の"
"項目を追加します。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource>\n"
"  handlers {\n"
"    split-brain <handler>;\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"
msgstr ""
"resource <resource>\n"
"  handlers {\n"
"    split-brain <handler>;\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"

#. type: Plain text
msgid "_<handler>_ may be any executable present on the system."
msgstr "_<handler>_ はシステムに存在する任意の実行可能ファイルです。"

#. type: Plain text
msgid ""
"The DRBD distribution contains a split brain handler script that installs as "
"`/usr/lib/drbd/notify-split-brain.sh`. It simply sends a notification e-mail "
"message to a specified address. To configure the handler to send a message "
"to `root@localhost` (which is expected to be an email address that forwards "
"the notification to a real system administrator), configure the `split-brain "
"handler` as follows:"
msgstr ""
"DRBDディストリビューションでは `/usr/lib/drbd/notify-split-brain.sh` という名"
"前のスプリットブレイン対策用のハンドラスクリプトを提供しています。これは指定"
"したアドレスに電子メールで通知を送信するだけのシンプルなものです。"
"`root@localhost` (このアドレス宛のメールは実際のシステム管理者に転送されると"
"仮定)にメッセージを送信するようにハンドラを設定するには、 `split-brain "
"handler` を次のように記述します。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource>\n"
"  handlers {\n"
"    split-brain \"/usr/lib/drbd/notify-split-brain.sh root\";\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"
msgstr ""
"resource <resource>\n"
"  handlers {\n"
"    split-brain \"/usr/lib/drbd/notify-split-brain.sh root\";\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"

#. type: Plain text
msgid ""
"After you have made this modification on a running resource (and "
"synchronized the configuration file between nodes), no additional "
"intervention is needed to enable the handler. DRBD will simply invoke the "
"newly-configured handler on the next occurrence of split brain."
msgstr ""
"実行中のリソースで上記の変更を行い(ノード間で設定ファイルを同期すれば)、後は"
"ハンドラを有効にするための他の操作は必要ありません。次にスプリットブレインが"
"発生すると、DRBDが新しく設定したハンドラを呼び出します。"

#. type: Title ====
#, no-wrap
msgid "Automatic Split Brain Recovery Policies"
msgstr "スプリットブレインからの自動復旧ポリシー"

#. type: Plain text
msgid ""
"Configuring DRBD to automatically resolve data divergence situations "
"resulting from split-brain (or other) scenarios is configuring for potential "
"*automatic data loss*.  Understand the implications, and don't do it if you "
"don't mean to."
msgstr ""
"スプリットブレイン(またはその他)のシナリオの結果、データの相違状況を自動的に"
"解決するDRBDの構成は、潜在的な *自動データ損失* を構成することを意味します。"
"その意味をよく理解し、それを意味しない場合は設定しないでください。"

#. type: Plain text
msgid ""
"You rather want to look into fencing policies, quorum settings, cluster "
"manager integration, and redundant cluster manager communication links to "
"*avoid* data divergence in the first place."
msgstr ""
"むしろ、フェンシングポリシー、クォーラム設定、クラスタマネージャの統合、クラ"
"スタマネージャの冗長化通信リンクなどを調べて、まず最初にデータの相違状況をつ"
"くらないようにすべてきです。"

#. type: Plain text
msgid ""
"To be able to enable and configure DRBD's automatic split brain recovery "
"policies, you must understand that DRBD offers several configuration options "
"for this purpose. DRBD applies its split brain recovery procedures based on "
"the number of nodes in the Primary role at the time the split brain is "
"detected. To that end, DRBD examines the following keywords, all found in "
"the resource's `net` configuration section:"
msgstr ""
"スプリットブレインからの自動復旧ポリシーには、状況に応じた複数のオプションが"
"用意されています。DRBDは、スプリットブレインを検出したときのプライマリロール"
"のノードの数にもとづいてスプリットブレイン回復手続きを適用します。そのため"
"に、DRBDはリソース設定ファイルの net セクションの次のキーワードを読み取りま"
"す。"

#. type: Block title
#, no-wrap
msgid "`after-sb-0pri`"
msgstr "`after-sb-0pri`"

#. type: Plain text
msgid ""
"Split brain has just been detected, but at this time the resource is not in "
"the Primary role on any host. For this option, DRBD understands the "
"following keywords:"
msgstr ""
"スプリットブレインが検出されたときに両ノードともセカンダリロールの場合に適用"
"されるポリシーを定義します。次のキーワードを指定できます。"

#. type: Plain text
msgid ""
"`disconnect`: Do not recover automatically, simply invoke the `split-brain` "
"handler script (if configured), drop the connection and continue in "
"disconnected mode."
msgstr ""
"`disconnect`: 自動復旧は実行されません。 `split-brain` ハンドラスクリプト(設"
"定されている場合)を呼び出し、 コネクションを切断して切断モードで続行します。"

#. type: Plain text
msgid ""
"`discard-younger-primary`: Discard and roll back the modifications made on "
"the host which assumed the Primary role last."
msgstr ""
"`discard-younger-primary`: 最後にプライマリロールだったホストに加えられた変更"
"内容を破棄して ロールバックします。"

#. type: Plain text
msgid ""
"`discard-least-changes`: Discard and roll back the modifications on the host "
"where fewer changes occurred."
msgstr ""
"`discard-least-changes`:変更が少なかったほうのホストの変更内容を破棄してロー"
"ルバックします。"

#. type: Plain text
msgid ""
"`discard-zero-changes`: If there is any host on which no changes occurred at "
"all, simply apply all modifications made on the other and continue."
msgstr ""
"`discard-zero-changes`: 変更がなかったホストがある場合は、 他方に加えられたす"
"べての変更内容を適用して 続行します。"

#. type: Block title
#, no-wrap
msgid "`after-sb-1pri`"
msgstr "`after-sb-1pri`"

#. type: Plain text
msgid ""
"Split brain has just been detected, and at this time the resource is in the "
"Primary role on one host. For this option, DRBD understands the following "
"keywords:"
msgstr ""
"スプリットブレインが検出されたときにどちらか1つのノードがプライマリロールであ"
"る場合に適用されるポリシーを定義します。次のキーワードを指定できます。"

#. type: Plain text
msgid ""
"`disconnect`: As with `after-sb-0pri`, simply invoke the `split-brain` "
"handler script (if configured), drop the connection and continue in "
"disconnected mode."
msgstr ""
"`disconnect`: `after-sb-0pri` と同様に `split-brain` ハンドラスクリプト(構成"
"されている場合)を呼び出し、 コネクションを切断して切断モードで続行します。"

#. type: Plain text
msgid ""
"`consensus`: Apply the same recovery policies as specified in `after-"
"sb-0pri`. If a split brain victim can be selected after applying these "
"policies, automatically resolve. Otherwise, behave exactly as if "
"`disconnect` were specified."
msgstr ""
"`consensus`: `after-sb-0pri` で設定したものと同じ復旧ポリシーが適用されま"
"す。 これらのポリシーを適用した後で、 スプリットブレインの犠牲ノードを選択で"
"きる場合は自動的に解決します。それ以外の場合は、 `disconnect` を指定した場合"
"と同様に動作します。"

#. type: Plain text
msgid ""
"`call-pri-lost-after-sb`: Apply the recovery policies as specified in `after-"
"sb-0pri`. If a split brain victim can be selected after applying these "
"policies, invoke the `pri-lost-after-sb` handler on the victim node. This "
"handler must be configured in the `handlers` section and is expected to "
"forcibly remove the node from the cluster."
msgstr ""
"`call-pri-lost-after-sb`: `after-sb-0pri` で指定した復旧ポリシーが適用されま"
"す。 これらのポリシーを適用した後で、 スプリットブレインの犠牲ノードを選択で"
"きる場合は、犠牲ノードで `pri-lost-after-sb` ハンドラを起動します このハンド"
"ラは `handlers` セクションで設定する必要があります。 また、クラスタからノード"
"を強制的に削除します。"

#. type: Plain text
msgid ""
"`discard-secondary`: Whichever host is currently in the Secondary role, make "
"that host the split brain victim."
msgstr ""
"`discard-secondary`: 現在のセカンダリロールのホストを、 スプリットブレインの"
"犠牲ノードにします。"

#. type: Block title
#, no-wrap
msgid "`after-sb-2pri`"
msgstr "`after-sb-2pri`"

#. type: Plain text
msgid ""
"Split brain has just been detected, and at this time the resource is in the "
"Primary role on both hosts. This option accepts the same keywords as `after-"
"sb-1pri` except `discard-secondary` and `consensus`."
msgstr ""
"スプリットブレインが検出されたときに両ノードともプライマリロールである場合に"
"適用されるポリシーを定義します。このオプションは `after-sb-1pri` と同じキー"
"ワードを受け入れます。ただし、 `discard-secondary` と `consensus` は除きま"
"す。"

#. type: Plain text
msgid ""
"DRBD understands additional keywords for these three options, which have "
"been omitted here because they are very rarely used. Refer to the man page "
"of `drbd.conf` for details on split brain recovery keywords not discussed "
"here."
msgstr ""
"上記の3つのオプションで、DRBDは他のキーワードも認識しますが、それらはめったに"
"使用されないためここでは省略します。ここで説明されていないスプリットブレイン"
"の復旧キーワードに関しては `drbd.conf` のマニュアルページを参照ください。"

#. type: Plain text
msgid ""
"For example, a resource which serves as the block device for a GFS or OCFS2 "
"file system in dual-Primary mode may have its recovery policy defined as "
"follows:"
msgstr ""
"たとえば、デュアルプライマリモードでGFSまたはOCFS2ファイルシステムのブロック"
"デバイスとして機能するリソースの場合、次のように復旧ポリシーを定義できます。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource <resource> {\n"
"  handlers {\n"
"    split-brain \"/usr/lib/drbd/notify-split-brain.sh root\"\n"
"    ...\n"
"  }\n"
"  net {\n"
"    after-sb-0pri discard-zero-changes;\n"
"    after-sb-1pri discard-secondary;\n"
"    after-sb-2pri disconnect;\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"
msgstr ""
"resource <resource> {\n"
"  handlers {\n"
"    split-brain \"/usr/lib/drbd/notify-split-brain.sh root\"\n"
"    ...\n"
"  }\n"
"  net {\n"
"    after-sb-0pri discard-zero-changes;\n"
"    after-sb-1pri discard-secondary;\n"
"    after-sb-2pri disconnect;\n"
"    ...\n"
"  }\n"
"  ...\n"
"}\n"

#. type: Title ===
#, no-wrap
msgid "Creating a Stacked Three-node Setup"
msgstr "スタック3ノード構成の作成"

#. type: Plain text
msgid "A three-node setup involves one DRBD device _stacked_ atop another."
msgstr ""
"3ノード構成では、1つのDRBDデバイスを別のデバイスの上に _スタック_ (積み重ね)"
"します。"

#. type: Plain text
msgid ""
"Stacking is deprecated in DRBD version 9.x, as more nodes can be implemented "
"on a single level. See <<s-drbdconf-conns>> for details."
msgstr ""
"DRBD9.xでは1つの階層で複数ノードを使用できるのでスタッキングは非推奨です。詳"
"細は <<s-drbdconf-conns>>をご参照ください。"

#. type: Title ====
#, no-wrap
msgid "Device Stacking Considerations"
msgstr "デバイススタックの留意事項"

#. type: Plain text
msgid "The following considerations apply to this type of setup:"
msgstr "次のような事項に注意する必要があります。"

#. type: Plain text
msgid ""
"The stacked device is the active one. Assume you have configured one DRBD "
"device `/dev/drbd0`, and the stacked device atop it is `/dev/drbd10`, then `/"
"dev/drbd10` will be the device that you mount and use."
msgstr ""
"スタックデバイス側が利用可能です。1つのDRBDデバイス `/dev/drbd0` を設定して、"
"その上位にスタックデバイス `/dev/drbd10` があるとします。この場合は、 `/dev/"
"drbd10` がマウントして使用するデバイスになります 。"

#. type: Plain text
msgid ""
"Device meta data will be stored twice, on the underlying DRBD device _and_ "
"the stacked DRBD device. On the stacked device, you must always use <<s-"
"internal-meta-data,internal meta data>>. This means that the effectively "
"available storage area on a stacked device is slightly smaller, compared to "
"an unstacked device."
msgstr ""
"下位のDRBDデバイス _および_ スタックDRBDデバイス(上位DRBDデバイス)の両方にそ"
"れぞれメタデータが存在します 。上位デバイスには、必ず <<s-internal-meta-data,"
"内部メタデータ>>を使用してください。このため、 3ノード構成時の使用可能なディ"
"スク領域は、 2ノード構成に比べてわずかに小さくなります。"

#. type: Plain text
msgid ""
"To get the stacked upper level device running, the underlying device must be "
"in the primary role."
msgstr ""
"スタックした上位デバイスを実行するには、下位のデバイスが プライマリロールに"
"なっている必要があります。"

#. type: Plain text
msgid ""
"To be able to synchronize the backup node, the stacked device on the active "
"node must be up and in the primary role."
msgstr ""
"バックアップノードにデータを同期するには、 アクティブなノードのスタックデバイ"
"スがプライマリモードで動作している必要があります。"

#. type: Title ====
#, no-wrap
msgid "Configuring a Stacked Resource"
msgstr "スタックリソースの設定"

#. type: Plain text
msgid ""
"In the following example, nodes are named 'alice', 'bob', and 'charlie', "
"with 'alice' and 'bob' forming a two-node cluster, and 'charlie' being the "
"backup node."
msgstr ""
"次の例では `alice` 、 `bob` 、 `charlie` という名前のノードがあり、 `alice` "
"と `bob` が2ノードクラスタを構成し、 `charlie` がバックアップノードになってい"
"ます。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource r0 {\n"
"  protocol C;\n"
"  device    /dev/drbd0;\n"
"  disk      /dev/sda6;\n"
"  meta-disk internal;\n"
msgstr ""
"resource r0 {\n"
"  protocol C;\n"
"  device    /dev/drbd0;\n"
"  disk      /dev/sda6;\n"
"  meta-disk internal;\n"

#. type: delimited block -
#, no-wrap
msgid ""
"  on alice {\n"
"    address    10.0.0.1:7788;\n"
"  }\n"
msgstr ""
"  on alice {\n"
"    address    10.0.0.1:7788;\n"
"  }\n"

#. type: delimited block -
#, no-wrap
msgid ""
"  on bob {\n"
"    address   10.0.0.2:7788;\n"
"  }\n"
"}\n"
msgstr ""
"  on bob {\n"
"    address   10.0.0.2:7788;\n"
"  }\n"
"}\n"

#. type: delimited block -
#, no-wrap
msgid ""
"resource r0-U {\n"
"  protocol A;\n"
msgstr ""
"resource r0-U {\n"
"  protocol A;\n"

#. type: delimited block -
#, no-wrap
msgid ""
"  stacked-on-top-of r0 {\n"
"    device     /dev/drbd10;\n"
"    address    192.168.42.1:7789;\n"
"  }\n"
msgstr ""
"  stacked-on-top-of r0 {\n"
"    device     /dev/drbd10;\n"
"    address    192.168.42.1:7789;\n"
"  }\n"

#. type: delimited block -
#, no-wrap
msgid ""
"  on charlie {\n"
"    device     /dev/drbd10;\n"
"    disk       /dev/hda6;\n"
"    address    192.168.42.2:7789; # Public IP of the backup node\n"
"    meta-disk  internal;\n"
"  }\n"
"}\n"
msgstr ""
"  on charlie {\n"
"    device     /dev/drbd10;\n"
"    disk       /dev/hda6;\n"
"    address    192.168.42.2:7789; # Public IP of the backup node\n"
"    meta-disk  internal;\n"
"  }\n"
"}\n"

#. type: Plain text
msgid ""
"As with any `drbd.conf` configuration file, this must be distributed across "
"all nodes in the cluster -- in this case, three nodes. Notice the following "
"extra keyword not found in an unstacked resource configuration:"
msgstr ""
"他の `drbd.conf` 設定ファイルと同様に、この設定ファイルもクラスタのすべての"
"ノード(この場合は3つ)に配布する必要があります。非スタックリソースの設定にはな"
"い、次のキーワードにご注意ください。"

#. type: Block title
#, no-wrap
msgid "`stacked-on-top-of`"
msgstr "`stacked-on-top-of`"

#. type: Plain text
msgid ""
"This option informs DRBD that the resource which contains it is a stacked "
"resource. It replaces one of the `on` sections normally found in any "
"resource configuration. Do not use `stacked-on-top-of` in an lower-level "
"resource."
msgstr ""
"このオプションによって、DRBDに含まれるリソースがスタックリソースであることを"
"DRBDに知らせます。これは、通常リソース設定内にある `on` セクションのうちの１"
"つを置き換えます。`stacked-on-top-of` は下位レベルのリソースには使用しないで"
"ください。"

#. type: Plain text
msgid ""
"It is not a requirement to use <<fp-protocol-a,Protocol A>> for stacked "
"resources. You may select any of DRBD's replication protocols depending on "
"your application."
msgstr ""
"スタックリソースに<<fp-protocol-a,Protocol A>>を使用することは必須ではありま"
"せん。アプリケーションに応じて任意のDRBDのレプリケーションプロトコルを選択で"
"きます。"

#. type: Block title
#, no-wrap
msgid "Single stacked setup"
msgstr "単一スタックの構成"

#. type: Target for macro image
#, no-wrap
msgid "images/single-stacked.svg"
msgstr "images/single-stacked.svg"

#. type: Title ====
#, no-wrap
msgid "Enabling Stacked Resources"
msgstr "スタックリソースを有効にする "

#. type: Plain text
msgid ""
"To enable a stacked resource, you first enable its lower-level resource and "
"promote it:"
msgstr ""
"スタックリソースを有効にするには、まず、下位レベルリソースを有効にしてどちら"
"か一方をプライマリに昇格します。"

#. type: delimited block -
#, no-wrap
msgid ""
"drbdadm up r0\n"
"drbdadm primary r0\n"
msgstr ""
"drbdadm up r0\n"
"drbdadm primary r0\n"

#. type: Plain text
msgid ""
"As with unstacked resources, you must create DRBD meta data on the stacked "
"resources. This is done using the following command:"
msgstr ""
"非スタックリソースと同様に、スタックリソースの場合もDRBDメタデータを作成する"
"必要があります。次のコマンドで実行します。次に、スタックリソースを有効にしま"
"す。"

#. type: delimited block -
#, no-wrap
msgid "# drbdadm create-md --stacked r0-U\n"
msgstr "# drbdadm create-md --stacked r0-U\n"

#. type: Plain text
msgid "Then, you may enable the stacked resource:"
msgstr ""
"この後でバックアップノードのリソースを起動し、3ノードレプリケーションを有効に"
"します。"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdadm up --stacked r0-U\n"
"# drbdadm primary --stacked r0-U\n"
msgstr ""
"# drbdadm up --stacked r0-U\n"
"# drbdadm primary --stacked r0-U\n"

#. type: Plain text
msgid ""
"After this, you may bring up the resource on the backup node, enabling three-"
"node replication:"
msgstr ""
"この後でバックアップノードのリソースを起動し、3ノードレプリケーションを有効に"
"します。"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdadm create-md r0-U\n"
"# drbdadm up r0-U\n"
msgstr ""
"# drbdadm create-md r0-U\n"
"# drbdadm up r0-U\n"

#. type: Plain text
msgid ""
"To automate stacked resource management, you may integrate stacked resources "
"in your cluster manager configuration."
msgstr "クラスタ管理システムを使えばスタックリソースの管理を自動化できます。"

#. type: Plain text
msgid ""
"See <<s-pacemaker-stacked-resources>> for information on doing this in a "
"cluster managed by the Pacemaker cluster management framework."
msgstr ""
"Pacemakerクラスタ管理フレームワークで管理する方法については、<<s-pacemaker-"
"stacked-resources>>を参照してください。"

#. type: Title ===
#, no-wrap
msgid "Permanently Diskless Nodes"
msgstr "永続的なディスクレスノード"

#. type: Plain text
msgid ""
"A node might be permanently diskless in DRBD. Here is a configuration "
"example showing a resource with 3 diskful nodes (servers) and one "
"permanently diskless node (client)."
msgstr ""
"ノードはしばしDRBDの中で永続的にディスクレスになるときがあります。以下はディ"
"スクをもつ３つのノードと永続的なディスクレスノードの構成例です。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource kvm-mail {\n"
"  device      /dev/drbd6;\n"
"  disk        /dev/vg/kvm-mail;\n"
"  meta-disk   internal;\n"
msgstr ""
"resource kvm-mail {\n"
"  device      /dev/drbd6;\n"
"  disk        /dev/vg/kvm-mail;\n"
"  meta-disk   internal;\n"

#. type: delimited block -
#, no-wrap
msgid ""
"  on store1 {\n"
"    address   10.1.10.1:7006;\n"
"    node-id   0;\n"
"  }\n"
"  on store2 {\n"
"    address   10.1.10.2:7006;\n"
"    node-id   1;\n"
"  }\n"
"  on store3 {\n"
"    address   10.1.10.3:7006;\n"
"    node-id   2;\n"
"  }\n"
msgstr ""
"  on store1 {\n"
"    address   10.1.10.1:7006;\n"
"    node-id   0;\n"
"  }\n"
"  on store2 {\n"
"    address   10.1.10.2:7006;\n"
"    node-id   1;\n"
"  }\n"
"  on store3 {\n"
"    address   10.1.10.3:7006;\n"
"    node-id   2;\n"
"  }\n"

#. type: delimited block -
#, no-wrap
msgid ""
"  on for-later-rebalancing {\n"
"    address   10.1.10.4:7006;\n"
"    node-id   3;\n"
"  }\n"
msgstr ""
"  on for-later-rebalancing {\n"
"    address   10.1.10.4:7006;\n"
"    node-id   3;\n"
"  }\n"

#. type: delimited block -
#, no-wrap
msgid ""
"  # DRBD \"client\"\n"
"  floating 10.1.11.6:8006 {\n"
"    disk      none;\n"
"    node-id   4;\n"
"  }\n"
msgstr ""
"  # DRBD \"client\"\n"
"  floating 10.1.11.6:8006 {\n"
"    disk      none;\n"
"    node-id   4;\n"
"  }\n"

#. type: delimited block -
#, no-wrap
msgid ""
"  # rest omitted for brevity\n"
"  ...\n"
"}\n"
msgstr ""
"  # rest omitted for brevity\n"
"  ...\n"
"}\n"

#. type: Plain text
msgid ""
"For permanently diskless nodes no bitmap slot gets allocated. For such nodes "
"the diskless status is displayed in green color since it is not an error or "
"unexpected state. See <<s-drbd-client-internals>> for internal details."
msgstr ""
"永続的なディスクレスノードはビットマップスロットが割り当てられません。このよ"
"うなノードのステータスは、エラーでも予期せぬ状態でもないので緑で表示されま"
"す。詳細は <<s-drbd-client-internals>> を参照ください。"

#. type: Title ===
#, no-wrap
msgid "Data Rebalancing"
msgstr "データ再配置"

#. type: Plain text
msgid ""
"indexterm:[rebalance]Given the (example) policy that data needs to be "
"available on 3 nodes, you need at least 3 servers for your setup."
msgstr ""
"indexterm:[rebalance]以下の例では、すべてのデータ領域は3台に冗長化するポリ"
"シーを想定しています。したがって最小構成で3台のサーバが必要です。"

#. type: Plain text
msgid ""
"Now, as your storage demands grow, you will encounter the need for "
"additional servers. Rather than having to buy 3 more servers at the same "
"time, you can _rebalance_ your data across a single additional node."
msgstr ""
"しかし、データ量が増えてくると、サーバ追加の必要性に迫られます。その際には、"
"また新たに3台のサーバを購入する必要はなく、１つのノードだけを追加をしてデータ"
"を _再配置_ することができます。"

#. type: Block title
#, no-wrap
msgid "DRBD data rebalancing"
msgstr "DRBDデータ再配置"

#. type: Target for macro image
#, no-wrap
msgid "images/rebalance.svg"
msgstr "images/rebalance.svg"

#. type: Plain text
msgid ""
"In the figure above you can see the _before_ and _after_ states: from 3 "
"nodes with three 25TiB volumes each (for a net 75TiB), to 4 nodes, with net "
"100TiB."
msgstr ""
"上の図では、3ノードの各々に25TiBのボリュームがある合計75TiBの状態から、4ノー"
"ドで合計100TiBの状態にしています。"

#. type: Plain text
msgid ""
"To redistribute the data across your cluster you have to choose a _new_ "
"node, and one where you want to remove this DRBD resource. + Please note "
"that removing the resource from a currently _active_ node (that is, where "
"DRBD is _Primary_) will involve either migrating the service or running this "
"resource on this node as a <<s-drbd-client,DRBD client>>; it's easier to "
"choose a node in _Secondary_ role. (Of course, that might not always be "
"possible.)"
msgstr ""
"データを再配置する時には、 _新しい_ ノードとDRBDリソースを削除したいノードを"
"選択する必要があります。現在 _アクティブ_ なノードからリソースを削除する場合"
"には注意が必要です。 DRBDが `プライマリ` のノードからリソースを削除する場合に"
"はサービスを移行するか、そのノードのリソースを<<s-drbd-client,DRBDクライアン"
"ト>>として稼働させるかにしてください。通常は `セカンダリ` のノードから選ぶほ"
"うが簡単です(それができない場合もあるでしょうが)。"

#. type: Title ====
#, no-wrap
msgid "Prepare a Bitmap Slot"
msgstr "ビットマップスロットの用意"

#. type: Plain text
msgid ""
"You will need to have a free <<s-quick-sync-bitmap,bitmap slot>> for "
"temporary use, on each of the nodes that have the resource that is to be "
"moved."
msgstr ""
"移動するリソースには一時的に未使用の<<s-quick-sync-bitmap,ビットマップスロッ"
"ト>>用のスペースが必要です。"

#. type: Plain text
msgid ""
"You can allocate one more at <<s-first-time-up,`drbdadm create-md` time>>, "
"or simply put a placeholder in your configuration, so that `drbdadm` sees "
"that it should reserve one more slot:"
msgstr ""
"<<s-first-time-up,`drbdadm create-md` の時>>にもう一つ割り当てます。または、 "
"`drbdadm` がもう１つスロットを取っておくように設定にプレースホルダを設けても"
"よいでしょう。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource r0 {\n"
"  ...\n"
"  on for-later-rebalancing {\n"
"    address   10.254.254.254:65533;\n"
"    node-id   3;\n"
"  }\n"
"}\n"
msgstr ""
"resource r0 {\n"
"  ...\n"
"  on for-later-rebalancing {\n"
"    address   10.254.254.254:65533;\n"
"    node-id   3;\n"
"  }\n"
"}\n"

#. type: delimited block =
msgid ""
"If you need to make that slot available during live use, you will have to"
msgstr "このスロットを実際に利用するには以下が必要です。"

#. type: delimited block =
msgid "dump the metadata,"
msgstr "メタデータをダンプする,"

#. type: delimited block =
msgid "enlarge the metadata space,"
msgstr "メタデータ領域を拡大する,"

#. type: delimited block =
msgid "edit the dumpfile,"
msgstr "ダンプファイルを編集する,"

#. type: delimited block =
msgid "load the changed metadata."
msgstr "メタデータをロードする"

#. type: delimited block =
msgid ""
"In a future version `drbdadm` will have a shortcut for you; most probably "
"you'll be able to say `drbdadm resize --peers _N_` and have the kernel "
"rewrite the metadata for you."
msgstr ""
"今後のバージョンの `drbdadm` ではショートカットキーが用意されます。 `drbdadm "
"resize --peers N` が使用できるようになる予定であり、カーネルがメタデータを書"
"き換えられるようになります。"

#. type: Title ====
#, no-wrap
msgid "Preparing and Activating the New Node"
msgstr "新しいノードの用意と有効化"

#. type: Plain text
msgid ""
"First of all you have to create the underlying storage volume on the new "
"node (using e.g. `lvcreate`).  Then the placeholder in the configuration can "
"be filled with the correct host name, address, and storage path. Now copy "
"the resource configuration to all relevant nodes."
msgstr ""
"まずは新しいノードに( `lvcreate` 等で)下位のストレージリュームを作成する必要"
"があります。 次に設定ファイルのプレイスホルダーに現在のホスト名、アドレス、ス"
"トレージのパスを書き込みます。そしてすべての必要なノードにリソース設定をコ"
"ピーします。"

#. type: Plain text
msgid "On the new node initialize the meta-data (once) by doing"
msgstr "新しいノードでメタデータを次のようにして(一度だけ)初期化します"

#. type: delimited block -
#, no-wrap
msgid ""
"# drbdadm create-md <resource>\n"
"v09 Magic number not found\n"
"Writing meta data...\n"
"initialising activity log\n"
"NOT initializing bitmap\n"
"New drbd meta data block successfully created.\n"
msgstr ""
"# drbdadm create-md <resource>\n"
"v09 Magic number not found\n"
"Writing meta data...\n"
"initialising activity log\n"
"NOT initializing bitmap\n"
"New drbd meta data block successfully created.\n"

#. type: Title ====
#, no-wrap
msgid "Starting the Initial Synchronization"
msgstr "初期同期の開始"

#. type: Plain text
msgid "Now the new node needs to get the data."
msgstr "新しいノードでデータを受け取ります。"

#. type: Plain text
msgid ""
"This is done by defining the network connection on the existing nodes using "
"the command:"
msgstr ""
"そのために以下のようにして既存のノードでネットワークコネクションを定義しま"
"す。"

#. type: Plain text
msgid "and starting the DRBD device on the new node using the command:"
msgstr "そして新しいノードでDRBDデバイスを開始します。"

#. type: Title ====
#, no-wrap
msgid "Check Connectivity"
msgstr "接続確認"

#. type: Plain text
msgid "At this time please do a"
msgstr "この時に、新しいノードで以下のコマンドを実行してください。"

#. type: delimited block -
#, no-wrap
msgid "# drbdadm status <resource>\n"
msgstr "# drbdadm status <resource>\n"

#. type: Plain text
msgid "on the new node, and check that _all_ other nodes are connected."
msgstr "他のノード _すべて_ が接続しているか確認します。"

#. type: Title ====
#, no-wrap
msgid "After the Initial Synchronization"
msgstr "初期同期後"

#. type: Plain text
msgid ""
"As soon as the new host is _UpToDate_, one of the other nodes in the "
"configuration can be renamed to `for-later-rebalancing`, and kept for "
"another migration."
msgstr ""
"新しいノードが `UpToDate` になったらすぐに、設定中の他のノードのうち１つが "
"`for-later-rebalancing` に変更できるようになり、次のマイグレーション用にキー"
"プしておけるようになります。　"

#. type: Plain text
msgid ""
"Perhaps you want to comment the section; although that has the risk that "
"doing a `drbdadm create-md` for a new node has too few bitmap slots for the "
"next rebalancing. + It might be easier to use a reserved (unused) IP address "
"and host name."
msgstr ""
"次の再配置用に小さなビットマップスロットしかない新規ノードに `drbdadm create-"
"md` をすることにはリスクがあると思う方もいることでしょう。あらかじめIPアドレ"
"スとホスト名を用意しておくのが簡単な方法でしょう。"

#. type: Plain text
msgid "Copy the changed configuration around again, and use it by running"
msgstr "再度変更した設定をコピーして、以下のコマンドを"

#. type: Plain text
msgid "on all nodes."
msgstr "全ノードで実行します。"

#. type: Title ====
#, no-wrap
msgid "Cleaning Up"
msgstr "クリーニング"

#. type: Plain text
msgid ""
"On the one node that had the data up to now, but isn't used anymore for this "
"resource, you can now take the DRBD device down by entering:"
msgstr ""
"今までデータのあったノードでは、もうリソースを使用しない場合にはDRBDデバイス"
"を次のようにして停止できます。"

#. type: Plain text
msgid ""
"Now the lower level storage device isn't used anymore, and can either be re-"
"used for other purposes or, if it is a logical volume, its space can be "
"returned to the volume group using the `lvremove` command."
msgstr ""
"これで下位デバイスを使用しなくなり、他の用途で使用することができるようになり"
"ます。論理ボリュームであれば lvremove でボリュームグループに戻すことができま"
"す。"

#. type: Title ====
#, no-wrap
msgid "Conclusion and Further Steps"
msgstr "まとめと他のステップ"

#. type: Plain text
msgid ""
"One of the resources has been migrated to the new node. The same could be "
"done for one or more other resources, to make free space on two or three "
"nodes in the existing cluster."
msgstr ""
"１つのリソースを新しいノードに移動しました。同様の手順で１つまたはそれ以上の"
"リソースを、クラスタ内の既存の2つまたは3つのノードの空きスペースに行う事も可"
"能です。"

#. type: Plain text
msgid ""
"Then new resources can be configured, as there are enough nodes with free "
"space to achieve 3-way redundancy again."
msgstr ""
"再び3重の冗長化を行うのに必要な空き容量のあるノードが揃えば、新しいリソースを"
"設定することが出来ます。"

#. type: Title ===
#, no-wrap
msgid "Configuring Quorum"
msgstr "クォーラム設定"

#. type: Plain text
msgid ""
"To avoid split brain or diverging data of replicas one has to configure "
"fencing. All the options for fencing rely on redundant communication in the "
"end.  That might be in the form of a management network that connects the "
"nodes to the IPMI network interfaces of the peer machines. In case of the "
"crm-fence-peer script it is necessary that Pacemaker's communication stays "
"available when DRBD's network link breaks."
msgstr ""
"スプリットブレインや複製データの相違を防ぐために、フェンシングを構成する必要"
"があります。フェンシングのすべてのオプションは、最後には冗長な通信路に依存し"
"ます。それはノードが対向ノードのIPMIネットワークインタフェースに接続する形か"
"もしれません。crm-fence-peerスクリプトの場合、DRBDのネットワークリンクが切断"
"されたときに、pacemaker の通信が有効であることが必要になります。"

#. type: Plain text
msgid ""
"The quorum mechanism, however, takes a completely different approach. The "
"basic idea is that a cluster partition may only modify the replicated data "
"set if the number of nodes that can communicate is greater than half of the "
"overall number of nodes. A node of such a partition _has quorum_.  However, "
"a node that does not have quorum needs to guarantee that the replicated data "
"set is not touched, so that the node does not create a diverging data set."
msgstr ""
"一方クォーラムは完全に異なるアプローチをとります。基本的な考え方は、通信でき"
"るノードの数がノード総数の半分を超える場合、クラスタパーティションは複製され"
"たデータセットを変更できるということです。そのようなパーティションのノード"
"は、クォーラムを持つといいます。言い換えると、クォーラムを持たないノードは、"
"複製されたデータを変更しないことを保証します。これはデータの相違を作成しない"
"ことを意味します。"

#. type: Plain text
msgid ""
"The quorum implementation in DRBD gets enabled by setting the `quorum` "
"resource option to `majority`, `all` or a numeric value. Where `majority` "
"selects the behavior that was described in the previous paragraph."
msgstr ""
"DRBDのクォーラムの実装は、`quorum` リソースに `majority` , `all` または数値を"
"設定することで有効にできます。 `majority` の動作が、前の文章で説明した動作に"
"なります。"

#. type: Title ====
#, no-wrap
msgid "Guaranteed Minimal Redundancy"
msgstr "保証された最低限の冗長化"

#. type: Plain text
msgid ""
"By default every node with a disk gets a vote in the quorum election. That "
"is, only diskless nodes do not count. So a partition with two _Inconsistent_ "
"disks gets quorum, while a partition with one _UpToDate_ node will have "
"quorum in a 3 node cluster. By configuring `quorum-minimum-redundancy` this "
"behavior can be changed so that only nodes that are `UpToDate` have a vote "
"in the quorum election. The option takes the same arguments as the `quorum` "
"option."
msgstr ""
"デフォルトでは、ディスクを持つすべてのノードがクォーラム選挙で投票権を持ちま"
"す。言い換えると、ディスクレスノードだけが持ちません。従って、3ノードクラスタ"
"では、 _Inconsistent_ ディスクを持つ2つのノード、 _UpToDate_ を持つ1つノード"
"は、クォーラム投票権を持つことができます。 `quorum-minimum-redundancy` を設定"
"することによって、`UpToDate` ノードだけがクォーラム選挙で投票権を持つように変"
"更することもできます。このオプションは `quorum` オプションと同じ引数をとりま"
"す。"

#. type: Plain text
msgid ""
"With this option you express that you rather want to wait until eventually "
"necessary resync operations finish before any services start. So in a way "
"you prefer that the minimal redundancy of your data is guaranteed over the "
"availability of your service. Financial data and services is an example that "
"comes to mind."
msgstr ""
"このオプションを使用すると、サービスを開始する前に必要な再同期操作が完了する"
"まで待機する、ということも表現できます。 したがって、データの最低限の冗長性が"
"サービスの可用性よりも保証されることを好む方法です。金融データとサービスなど"
"はその一例です。"

#. type: Plain text
msgid ""
"Consider the following example for a five node cluster. It requires a "
"partitions to have at least three nodes, and two of them must be `UpToDate`:"
msgstr ""
"以下に5ノードクラスタの設定例を示します。パーティションは少なくとも3つのノー"
"ドが必要であり、そのうち2つは `UpToDate` である必要があります。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource quorum-demo {\n"
"  options {\n"
"    quorum majority;\n"
"    quorum-minimum-redundancy 2;\n"
"    ...\n"
"  }\n"
"}\n"
msgstr ""
"resource quorum-demo {\n"
"  options {\n"
"    quorum majority;\n"
"    quorum-minimum-redundancy 2;\n"
"    ...\n"
"  }\n"
"}\n"

#. type: Title ====
#, no-wrap
msgid "Actions on Loss of Quorum"
msgstr "クォーラムを失った時の動作"

#. type: Plain text
msgid ""
"When a node that is running the service loses quorum it needs to cease write-"
"operations on the data set immediately. That means that I/O immediately "
"starts to complete all I/O requests with errors. Usually that means that a "
"graceful shutdown is not possible, since that would require more "
"modifications to the data set. The I/O errors propagate from the block level "
"to the file system and from the file system to the user space application(s)."
msgstr ""
"サービスを実行しているノードがクォーラムを失うと、すぐにデータセットの書き込"
"み操作を中止する必要があります。これはIOがすぐにすべてのIO要求をエラーで完了"
"し始めることを意味します。通常、これは、正常なシャットダウンが不可能であるこ"
"とを意味します。これはデータセットをさらに変更する必要があるためです。IOエ"
"ラーはブロックレベルからファイルシステムに、ファイルシステムからユーザース"
"ペースアプリケーションに伝わります。"

#. type: Plain text
msgid ""
"Ideally the application simply terminates in case of I/O errors. This then "
"allows Pacemaker to unmount the filesystem and to demote the DRBD resource "
"to secondary role.  If that is true you should set the `on-no-quorum` "
"resource option to `io-error`.  Here is an example:"
msgstr ""
"理想的には、IOエラーの場合、アプリケーションを単に終了させることです。これは"
"その後、Pacemaker がファイルシステムをアンマウントし、DRBDリソースを降格させ"
"セカンダリロールに移すことを可能にします。その場合は、`on-no-quorum` リソース"
"に `io-error` を設定してください。以下はその設定例です。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource quorum-demo {\n"
"  options {\n"
"    quorum majority;\n"
"    on-no-quorum io-error;\n"
"    ...\n"
"  }\n"
"}\n"
msgstr ""
"resource quorum-demo {\n"
"  options {\n"
"    quorum majority;\n"
"    on-no-quorum io-error;\n"
"    ...\n"
"  }\n"
"}\n"

#. type: Plain text
msgid ""
"If your application does not terminate on the first I/O error, you can "
"choose to freeze I/O instead and to reboot the node. Here is a configuration "
"example:"
msgstr ""
"アプリケーションが最初のIOエラーで終了しない場合は、IOをフリーズさせノードを"
"リブートさせることもできます。以下はその設定例です。"

#. type: delimited block -
#, no-wrap
msgid ""
"resource quorum-demo {\n"
"  options {\n"
"    quorum majority;\n"
"    on-no-quorum suspend-io;\n"
"    ...\n"
"  }\n"
msgstr ""
"resource quorum-demo {\n"
"  options {\n"
"    quorum majority;\n"
"    on-no-quorum suspend-io;\n"
"    ...\n"
"  }\n"

#. type: delimited block -
#, no-wrap
msgid ""
"  handlers {\n"
"    quorum-lost \"echo b > /proc/sysrq-trigger\";\n"
"  }\n"
"  ...\n"
"}\n"
msgstr ""
"  handlers {\n"
"    quorum-lost \"echo b > /proc/sysrq-trigger\";\n"
"  }\n"
"  ...\n"
"}\n"

#. type: Title ====
#, no-wrap
msgid "Using a Diskless Node as a Tiebreaker"
msgstr "タイブレーカーとしてのディスクレスノードを使用"

#. type: Plain text
msgid ""
"A diskless node with connections to all nodes in a cluster can be used to "
"break ties in the quorum negotiation process."
msgstr ""
"クラスタ内のすべてのノードに接続されているディスクレスノードを利用して、"
"クォーラムネゴシエーションプロセスのタイブレークを解消できます。"

#. type: Plain text
msgid ""
"Consider the following two-node cluster, where node A is the primary and "
"node B is a secondary:"
msgstr ""
"ノードAがプライマリで、ノードBがセカンダリである、次の2ノードクラスタを考えま"
"す。"

#. type: Target for macro image
#, no-wrap
msgid "images/quorum-tiebreaker-without.svg"
msgstr "images/quorum-tiebreaker-without.svg"

#. type: Plain text
msgid ""
"As soon as the connection between the two nodes is interrupted, they lose "
"quorum and the application on top of the cluster cannot write data anymore."
msgstr ""
"2つのノード間の接続が失われるとすぐに、2つのノードはクォーラムを失い、クラス"
"タ上のアプリケーションはデータを書き込めなくなります。"

#. type: Target for macro image
#, no-wrap
msgid "images/quorum-tiebreaker-without-disconnect.svg"
msgstr "images/quorum-tiebreaker-without-disconnect.svg"

#. type: Plain text
msgid ""
"Now if we add a third node, C, to the cluster and configure it as diskless, "
"we can take advantage of the tiebreaker mechanism."
msgstr ""
"3番目のノードCをクラスタに追加し、それをディスクレスとして構成すると、タイブ"
"レーカーメカニズムを利用できます。"

#. type: Target for macro image
#, no-wrap
msgid "images/quorum-tiebreaker.svg"
msgstr "images/quorum-tiebreaker.svg"

#. type: Plain text
msgid ""
"In this case, when the primary and secondary nodes lose connection, they can "
"still \"see\" the diskless tiebreaker. Because of this, the primary can "
"continue working, while the secondary demotes its disk to Outdated and the "
"service can therefore not be migrated there."
msgstr ""
"この場合、プライマリノードとセカンダリノードが接続を失っても、両ノードはディ"
"スクレスタイブレーカーとの接続をまだ維持しています。このため、プライマリは機"
"能し続けることができますが、セカンダリはそのディスクをOutdatedに降格させるた"
"め、サービスをそこに移行することはできません。"

#. type: Target for macro image
#, no-wrap
msgid "images/quorum-tiebreaker-disconnect.svg"
msgstr "images/quorum-tiebreaker-disconnect.svg"

#. type: Plain text
msgid ""
"There are a few special cases if two connections fail. Consider the "
"following scenario:"
msgstr "同時に2つの接続が失われる場合は特別なケースであり、次に説明します。"

#. type: Target for macro image
#, no-wrap
msgid "images/quorum-tiebreaker-disconnect-case2.svg"
msgstr "images/quorum-tiebreaker-disconnect-case2.svg"

#. type: Plain text
msgid ""
"In this case, the tiebreaker node forms a partition with the primary node. "
"The primary therefore keeps quorum, while the secondary becomes outdated. "
"Note that the secondary's disk state will be \"UpToDate\", but regardless it "
"cannot be promoted to primary because it lacks quorum."
msgstr ""
"この場合、タイブレーカーノードはプライマリとパーティションを形成します。その"
"ため、プライマリはクォーラムを維持し、セカンダリは古くなります。セカンダリの"
"ディスクの状態は \"UpToDate\" のままですが、クォーラムがないためにプライマリ"
"に昇格できません。"

#. type: Plain text
msgid ""
"Let's consider the possibility of the primary losing connection to the "
"tiebreaker:"
msgstr "プライマリがタイブレーカーとの接続を失う可能性を考えてみます。"

#. type: Target for macro image
#, no-wrap
msgid "images/quorum-tiebreaker-disconnect-case3.svg"
msgstr "images/quorum-tiebreaker-disconnect-case3.svg"

#. type: Plain text
msgid ""
"In this case, the primary becomes unusable and goes into a \"quorum suspended"
"\" state. This effectively results in the application on top of DRBD "
"receiving I/O errors. A cluster manager could then promote node B to primary "
"and keep the service running there instead."
msgstr ""
"この場合、プライマリは使用できなくなり、\"クォーラム中断\" 状態になります。こ"
"れにより、DRBD上のアプリケーションが I/O エラーを受信します。その後、クラスタ"
"マネージャはノードBをプライマリに昇格させ、代わりにそこでサービスを実行し続け"
"ることができます。"

#. type: Plain text
msgid ""
"In case the diskless tiebreaker \"switches sides\", we need to avoid data "
"divergence. Consider this scenario:"
msgstr ""
"ディスクレスタイブレーカーが \"サイドを切り替える\" 場合、データの相違を避け"
"る必要があります。このシナリオを考えます。"

#. type: Target for macro image
#, no-wrap
msgid "images/quorum-tiebreaker-disconnect-case1a.svg"
msgstr "images/quorum-tiebreaker-disconnect-case1a.svg"

#. type: Plain text
msgid ""
"The connection between the primary and secondary has failed, and the "
"application is continuing to run on the primary, when the primary suddenly "
"loses its connection to the diskless node."
msgstr ""
"プライマリとセカンダリ間の接続が失われ、プライマリのディスクレスノードへの接"
"続が突然失われた場合でも、アプリケーションはプライマリ上で実行を継続していま"
"す。"

#. type: Plain text
msgid ""
"In this case, no node can be promoted to primary and the cluster cannot "
"continue to operate."
msgstr ""
"この場合は、どのノードもプライマリに昇格できず、クラスタは動作を継続できませ"
"ん。"

#. type: delimited block =
msgid ""
"Protecting from data divergence always takes priority over ensuring service "
"availability."
msgstr ""
"データの分離を避けることは、サービスの可用性を確保することよりも常に優先され"
"ます。"

#. type: Plain text
msgid "Examining another scenario:"
msgstr "他のシナリオを見てみます。"

#. type: Target for macro image
#, no-wrap
msgid "images/quorum-tiebreaker-disconnect-case2a.svg"
msgstr "images/quorum-tiebreaker-disconnect-case2a.svg"

#. type: Plain text
msgid ""
"Here, the application is running on the primary, while the secondary is "
"unavailable. Then, the tiebreaker first loses connection to the primary, and "
"then reconnects to the secondary.  It is important to note here that *a node "
"that has lost quorum cannot regain quorum by connecting to a diskless node*. "
"Therefore, in this case, no node has quorum and the cluster halts."
msgstr ""
"ここでは、アプリケーションはプライマリで実行されていますが、セカンダリは利用"
"できません。その後、タイブレーカーはプライマリへの接続を失い、次にセカンダリ"
"に再接続します。ここで重要なのは、クォーラムを失ったノードは、ディスクレス"
"ノードに接続してもクォーラムを取り戻すことはできないことです。したがって、こ"
"の場合、どのノードもクォーラムを持たず、クラスタは停止します。"

#. type: Title ====
#, no-wrap
msgid "Last Man Standing"
msgstr "ラストマン・スタンディング"

#. type: Plain text
msgid ""
"It needs to be mentioned that nodes that leave a cluster gracefully are "
"counted differently from failed nodes. In this context _leaving gracefully_ "
"means that the leaving node marked its data as Outdated, and that it was "
"able to tell the remaining nodes that its data is Outdated."
msgstr ""
"クラスタから正常に離脱するノードは、障害が発生したノードとは異なるものとして"
"カウントされることに注意する必要があります。正常に離脱した場合、離脱ノードの"
"データは Outdated(無効状態) としてマークされ、残りのノードにデータが無効状態"
"であることを伝えることができます。"

#. type: Plain text
msgid ""
"In a group of nodes where all disks are Outdated no one in that group can "
"promote to Primary footnote:[The exception is a manual promotion with the `--"
"force` flag. It's assumed that before you use the `--force` flag, you know "
"what you are doing.]."
msgstr ""
"すべてのディスクが無効状態になっているノードのグループでは、そのグループの誰"
"もプライマリに昇格できません footnote:[例外は -force フラグを使用した手動昇格"
"です。 --force を使用する場合、それが何を意味するかを認識していると仮定しま"
"す。]。"

#. type: Plain text
msgid ""
"An implication is that, if one node remains in a cluster where all the other "
"nodes left gracefully, the remaining node can keep quorum. However, if any "
"of the other nodes left ungracefully, the remaining node must assume that "
"the departed nodes could form a partition and have access to up-to-date data."
msgstr ""
"つまり、1 つのノードを除くすべてのノードがクラスターから離脱した場合、そのす"
"べてのノードが正常に離脱している限り、クォーラムを維持できます。ただし、他の"
"ノードのいずれかが不当に離脱した場合、残りのノードは、離脱したノードがパー"
"ティションを形成し、最新のデータにアクセスできると想定する必要があります。"

#. type: Title ===
#, no-wrap
msgid "Removing DRBD"
msgstr "DRBD の削除"

#. type: Plain text
msgid ""
"For the unlikely case that you want to remove DRBD, here are the necessary "
"steps."
msgstr "DRBD を削除する場合は、以下のステップに従います。"

#. type: Plain text
msgid ""
"Stop the services and unmount the filesystems on top of the DRBD volumes. In "
"case you are using a cluster manager, verify that it ceases to control the "
"services first."
msgstr ""
"サービスを停止し、DRBD ボリュームのファイルシステムをマウント解除します。クラ"
"スタマネージャを使用している場合は、最初にサービスの制御を停止するようにして"
"ください。"

#. type: Plain text
msgid ""
"Stop the DRBD resource(s) by using `drbdadm down <res>` or `drbdadm down all`"
msgstr ""
"`drbdadm down <res>` または `drbdadm down all` で DRBD リソースを停止します。"

#. type: Plain text
msgid ""
"In case the DRBD resource was using internal meta-data you might choose to "
"resize the filesystem to cover all of the backing device's space. This step "
"effectively removes DRBD's meta-data. This is an action that can not be "
"reversed easily. You can do that with `resize2fs <backing_dev>` for ext[234] "
"family of file systems.  It supports resizing of unmounted filesystem and "
"under certain conditions also online grow. XFS can be grown online only with "
"the `xfs_growfs` command."
msgstr ""
"DRBD リソースが内部メタデータを使用していた場合は、ファイルシステムのサイズを"
"変更して、下位デバイスのすべてのスペースをカバーすることができます。この手順"
"により、DRBD のメタデータが効果的に削除されます。これは簡単に元に戻せないアク"
"ションです。ファイルシステムが ext[234] ファミリの場合 `resize2fs "
"<backing_dev>` でそれを行うことができます。マウントされていないファイルシステ"
"ムのサイズ変更と特定の条件下ではオンラインでも対応可能です。 XFS は "
"`xfs_growfs` コマンドを使用してのみオンラインで拡張できます。"

#. type: Plain text
msgid "Mount the backing device(s) directly, start the services on top of them"
msgstr "下位デバイスを直接マウントし、それらの上でサービスを開始します。"

#. type: Plain text
msgid ""
"Unload the DRBD kernel driver modules with `rmmod drbd_transport_tcp` and "
"`rmmod drbd`."
msgstr ""
"`rmmod drbd_transport_tcp` と `rmmod drbd` で DRBD カーネルモジュールをアン"
"ロードします。"

#. type: Plain text
msgid "Uninstall the DRBD software packages."
msgstr "DRBD ソフトウェアパッケージをアンインストールします。"
